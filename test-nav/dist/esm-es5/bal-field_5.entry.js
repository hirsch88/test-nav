import{__awaiter,__generator,__spreadArray}from"tslib";import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-e015dbc8.js";import{L as ListenToMutation}from"./mutation.decorator-96ae606b.js";import{f as deepReady,b as waitAfterFramePaint}from"./helpers-08b28736.js";import{d as defaultBalAriaForm}from"./form-479fd066.js";import{B as BEM}from"./bem-1b28532d.js";import"./listener-ea90dc02.js";import"./browser-9199b5e2.js";import"./icons.constant-35253412.js";var balFieldCss=".bal-field,.bal-field-label,.bal-field-control,.bal-field-message,.bal-field-hint{display:block;position:relative;font-family:var(--bal-font-family-text)}.bal-field-label{display:inline-block;margin-bottom:.25rem}.bal-field-hint{display:inline-block;margin-left:.25rem;height:1rem;width:1rem}.bal-field-hint__hint{position:absolute;top:2px;left:0}.bal-field-message{line-height:var(--bal-line-height-normal)}.bal-field-control{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-direction:row;flex-direction:row;gap:.5rem}.bal-field-control .bal-input{-ms-flex:1;flex:1}@media screen and (max-width: 768px){.bal-field-control--expanded-on-mobile{-ms-flex-direction:column;flex-direction:column}.bal-field-control--expanded-on-mobile .bal-button,.bal-field-control--expanded-on-mobile .bal-button .button{width:100%}}.bal-field-control{padding-bottom:22px}.bal-field-control+.bal-field-message{margin-top:-24px !important}";var __decorate=undefined&&undefined.__decorate||function(e,t,r,l){var i=arguments.length,a=i<3?t:l===null?l=Object.getOwnPropertyDescriptor(t,r):l,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,l);else for(var o=e.length-1;o>=0;o--)if(n=e[o])a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a;return i>3&&a&&Object.defineProperty(t,r,a),a};var Field=function(){function e(e){registerInstance(this,e);this.balFormControlDidLoad=createEvent(this,"balFormControlDidLoad",7);this.fieldId="bal-field-".concat(FieldIds++);this.formControlElement=["bal-field-control"];this.inputElements=["bal-input","bal-number-input","bal-textarea","bal-select","bal-datepicker","bal-checkbox","bal-radio","bal-input-group","bal-input-stepper","bal-input-slider","bal-file-upload"];this.formElements=__spreadArray(__spreadArray([],this.formControlElement,true),["bal-field-label","bal-field-message"],false);this.mutationObserverActive=true;this.required=undefined;this.invalid=undefined;this.valid=false;this.disabled=undefined;this.readonly=undefined;this.loading=undefined}e.prototype.requiredHandler=function(){this.updateProps(__spreadArray(__spreadArray([],this.inputElements,true),["bal-field-label"],false),"required")};e.prototype.invalidHandler=function(){this.updateProps(__spreadArray(__spreadArray([],this.inputElements,true),this.formElements,true),"invalid")};e.prototype.validHandler=function(){this.updateProps(__spreadArray(__spreadArray([],this.inputElements,true),this.formElements,true),"valid")};e.prototype.disabledHandler=function(){this.updateProps(__spreadArray(__spreadArray([],this.inputElements,true),this.formElements,true),"disabled")};e.prototype.readonlyHandler=function(){this.updateProps(__spreadArray(__spreadArray([],this.inputElements,true),this.formElements,true),"readonly")};e.prototype.loadingHandler=function(){this.updateProps(__spreadArray(__spreadArray([],this.inputElements,true),this.formControlElement,true),"loading")};e.prototype.connectedCallback=function(){this.triggerAllHandlers()};e.prototype.componentWillLoad=function(){this.triggerAllHandlers()};e.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.syncAriaAttributes()];case 1:e.sent();return[2]}}))}))};e.prototype.syncAriaAttributes=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,l,i,a;return __generator(this,(function(n){switch(n.label){case 0:return[4,deepReady(this.el)];case 1:n.sent();return[4,waitAfterFramePaint()];case 2:n.sent();e=this.el.querySelector("bal-field-label bal-label");t=this.el.querySelector("bal-field-message");r=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],Array.from(this.el.querySelectorAll("bal-field-control bal-input")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-select")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-datepicker")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-checkbox")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-radio")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-checkbox-group")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-radio-group")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-number-input")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-time-input")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-input-slider")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-input-stepper")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-textarea")),true),Array.from(this.el.querySelectorAll("bal-field-control bal-file-upload")),true);l=defaultBalAriaForm;if(e){l.labelId="".concat(this.fieldId,"-lbl")}if(t){l.messageId="".concat(this.fieldId,"-msg")}i=0;n.label=3;case 3:if(!(i<r.length))return[3,10];a=r[i];if(!(i===0))return[3,7];l.controlId="".concat(this.fieldId,"-ctrl");return[4,e===null||e===void 0?void 0:e.setAriaForm(l)];case 4:n.sent();return[4,t===null||t===void 0?void 0:t.setAriaForm(l)];case 5:n.sent();return[4,a===null||a===void 0?void 0:a.setAriaForm(l)];case 6:n.sent();return[3,9];case 7:l.controlId="".concat(this.fieldId,"-ctrl-").concat(i);return[4,a===null||a===void 0?void 0:a.setAriaForm(l)];case 8:n.sent();n.label=9;case 9:i++;return[3,3];case 10:return[2]}}))}))};e.prototype.mutationListener=function(){this.triggerAllHandlers();this.syncAriaAttributes()};e.prototype.triggerAllHandlers=function(){this.requiredHandler();this.invalidHandler();this.validHandler();this.readonlyHandler();this.disabledHandler();this.loadingHandler()};e.prototype.updateProps=function(e,t){var r=this[t];if(r!==undefined){this.notifyComponents(e,(function(e){return e[t]=r}))}};e.prototype.notifyComponents=function(e,t){var r=this.el.querySelectorAll(e.join(", "));r.forEach((function(e){return t(e)}))};e.prototype.render=function(){return h(Host,{id:this.fieldId,class:{"bal-field":true,field:true,"bal-field--invalid":this.invalid===true}},h("slot",null),h("span",{class:"hidden"}))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{required:["requiredHandler"],invalid:["invalidHandler"],valid:["validHandler"],disabled:["disabledHandler"],readonly:["readonlyHandler"],loading:["loadingHandler"]}},enumerable:false,configurable:true});return e}();__decorate([ListenToMutation({subtree:false})],Field.prototype,"mutationListener",null);var FieldIds=0;Field.style={css:balFieldCss};var FieldControl=function(){function e(e){registerInstance(this,e);this.iconRight="";this.iconLeft="";this.expandedOnMobile=undefined;this.loading=false}Object.defineProperty(e.prototype,"buildIconLeftTemplate",{get:function(){if(this.iconLeft){return h("bal-icon",{name:this.iconLeft,color:"info",class:"is-left",size:"small"})}return""},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"buildIconRightTemplate",{get:function(){if(this.iconRight){return h("bal-icon",{name:this.iconRight,color:"info",class:"is-right",size:"small"})}return""},enumerable:false,configurable:true});e.prototype.render=function(){return h(Host,{class:{"bal-field-control":true,control:true,"has-icons-left":!!this.iconLeft,"has-icons-right":!!this.iconRight,"is-loading":this.loading,"bal-field-control--expanded-on-mobile":!!this.expandedOnMobile}},h("slot",null),this.buildIconLeftTemplate,this.buildIconRightTemplate)};return e}();var FieldHint=function(){function e(e){registerInstance(this,e);this.subject="";this.closeLabel="Close";this.small=false}e.prototype.render=function(){var e=BEM.block("field-hint");return h(Host,{class:Object.assign({},e.class())},h("bal-hint",{class:Object.assign({},e.element("hint").class()),"data-testid":"bal-field-hint",closeLabel:this.closeLabel,small:this.small},this.subject?h("bal-hint-title",null,this.subject):"",h("bal-hint-text",null,h("slot",null))))};return e}();var FieldLabel=function(){function e(e){registerInstance(this,e);this.htmlFor=undefined;this.required=true;this.valid=undefined;this.invalid=undefined;this.disabled=undefined;this.readonly=undefined;this.weight="bold"}e.prototype.componentDidLoad=function(){if(this.element){this.parentBalFieldElement=this.element.closest("bal-field");if(this.parentBalFieldElement){this.parentBalFieldElement.classList.add("has-label")}}};e.prototype.disconnectedCallback=function(){if(this.parentBalFieldElement){this.parentBalFieldElement.classList.remove("has-label")}};e.prototype.render=function(){return h(Host,{class:"bal-field-label"},h("bal-label",{multiline:true,size:"small",htmlFor:this.htmlFor,required:this.required,valid:this.valid,invalid:this.invalid,disabled:this.disabled,readonly:this.readonly,weight:this.weight},h("slot",null)))};Object.defineProperty(e.prototype,"element",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();var FieldMessage=function(){function e(e){registerInstance(this,e);this.ariaForm=defaultBalAriaForm;this.color="";this.invalid=false;this.valid=false;this.disabled=false;this.readonly=false}e.prototype.setAriaForm=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.ariaForm=Object.assign({},e);return[2]}))}))};e.prototype.render=function(){var e;return h(Host,{id:this.ariaForm.messageId,class:(e={"bal-field-message":true,help:true,"is-danger":this.invalid,"is-success":this.valid,"is-disabled":this.disabled||this.readonly},e["is-".concat(this.color)]=!!this.color,e)},h("slot",null))};return e}();export{Field as bal_field,FieldControl as bal_field_control,FieldHint as bal_field_hint,FieldLabel as bal_field_label,FieldMessage as bal_field_message};