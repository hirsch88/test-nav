import{__awaiter,__generator}from"tslib";import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-e015dbc8.js";import{c as createCommonjsModule,a as commonjsGlobal}from"./_commonjsHelpers-ba3f0406.js";import{h as formatLocaleNumber}from"./index.esm-df73647b.js";import{m as debounceEvent}from"./helpers-08b28736.js";import{i as inheritAttributes}from"./attributes-56afda45.js";import{b as inputListenOnClick}from"./form-input-fd2d14ca.js";import{d as defaultConfig}from"./initialize-92ae5fef.js";import{L as ListenToConfig}from"./config.decorator-54721e29.js";import{B as BEM}from"./bem-1b28532d.js";import{d as defaultBalAriaForm}from"./form-479fd066.js";import{i as i18nBalInputStepper}from"./bal-input-stepper.i18n-1f57ce49.js";import"./index-82aff103.js";import"./browser-9199b5e2.js";import"./icons.constant-35253412.js";import"./log-01623e2c.js";import"./index-8b8ed6bd.js";var big=createCommonjsModule((function(e){(function(t){var i,r=20,n=1,s=1e6,o=1e6,a=-7,l=21,c=false,u="[big.js] ",f=u+"Invalid ",h=f+"decimal places",p=f+"rounding mode",d=u+"Division by zero",b={},m=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function v(){function e(t){var i=this;if(!(i instanceof e))return t===m?v():new e(t);if(t instanceof e){i.s=t.s;i.e=t.e;i.c=t.c.slice()}else{if(typeof t!=="string"){if(e.strict===true&&typeof t!=="bigint"){throw TypeError(f+"value")}t=t===0&&1/t<0?"-0":String(t)}w(i,t)}i.constructor=e}e.prototype=b;e.DP=r;e.RM=n;e.NE=a;e.PE=l;e.strict=c;e.roundDown=0;e.roundHalfUp=1;e.roundHalfEven=2;e.roundUp=3;return e}function w(e,t){var i,r,n;if(!g.test(t)){throw Error(f+"number")}e.s=t.charAt(0)=="-"?(t=t.slice(1),-1):1;if((i=t.indexOf("."))>-1)t=t.replace(".","");if((r=t.search(/e/i))>0){if(i<0)i=r;i+=+t.slice(r+1);t=t.substring(0,r)}else if(i<0){i=t.length}n=t.length;for(r=0;r<n&&t.charAt(r)=="0";)++r;if(r==n){e.c=[e.e=0]}else{for(;n>0&&t.charAt(--n)=="0";);e.e=i-r-1;e.c=[];for(i=0;r<=n;)e.c[i++]=+t.charAt(r++)}return e}function y(e,t,i,r){var n=e.c;if(i===m)i=e.constructor.RM;if(i!==0&&i!==1&&i!==2&&i!==3){throw Error(p)}if(t<1){r=i===3&&(r||!!n[0])||t===0&&(i===1&&n[0]>=5||i===2&&(n[0]>5||n[0]===5&&(r||n[1]!==m)));n.length=1;if(r){e.e=e.e-t+1;n[0]=1}else{n[0]=e.e=0}}else if(t<n.length){r=i===1&&n[t]>=5||i===2&&(n[t]>5||n[t]===5&&(r||n[t+1]!==m||n[t-1]&1))||i===3&&(r||!!n[0]);n.length=t;if(r){for(;++n[--t]>9;){n[t]=0;if(t===0){++e.e;n.unshift(1);break}}}for(t=n.length;!n[--t];)n.pop()}return e}function j(e,t,i){var r=e.e,n=e.c.join(""),s=n.length;if(t){n=n.charAt(0)+(s>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r}else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(r>0){if(++r>s){for(r-=s;r--;)n+="0"}else if(r<s){n=n.slice(0,r)+"."+n.slice(r)}}else if(s>1){n=n.charAt(0)+"."+n.slice(1)}return e.s<0&&i?"-"+n:n}b.abs=function(){var e=new this.constructor(this);e.s=1;return e};b.cmp=function(e){var t,i=this,r=i.c,n=(e=new i.constructor(e)).c,s=i.s,o=e.s,a=i.e,l=e.e;if(!r[0]||!n[0])return!r[0]?!n[0]?0:-o:s;if(s!=o)return s;t=s<0;if(a!=l)return a>l^t?1:-1;o=(a=r.length)<(l=n.length)?a:l;for(s=-1;++s<o;){if(r[s]!=n[s])return r[s]>n[s]^t?1:-1}return a==l?0:a>l^t?1:-1};b.div=function(e){var t=this,i=t.constructor,r=t.c,n=(e=new i(e)).c,o=t.s==e.s?1:-1,a=i.DP;if(a!==~~a||a<0||a>s){throw Error(h)}if(!n[0]){throw Error(d)}if(!r[0]){e.s=o;e.c=[e.e=0];return e}var l,c,u,f,p,b=n.slice(),g=l=n.length,v=r.length,w=r.slice(0,l),j=w.length,E=e,I=E.c=[],x=0,_=a+(E.e=t.e-e.e)+1;E.s=o;o=_<0?0:_;b.unshift(0);for(;j++<l;)w.push(0);do{for(u=0;u<10;u++){if(l!=(j=w.length)){f=l>j?1:-1}else{for(p=-1,f=0;++p<l;){if(n[p]!=w[p]){f=n[p]>w[p]?1:-1;break}}}if(f<0){for(c=j==l?n:b;j;){if(w[--j]<c[j]){p=j;for(;p&&!w[--p];)w[p]=9;--w[p];w[j]+=10}w[j]-=c[j]}for(;!w[0];)w.shift()}else{break}}I[x++]=f?u:++u;if(w[0]&&f)w[j]=r[g]||0;else w=[r[g]]}while((g++<v||w[0]!==m)&&o--);if(!I[0]&&x!=1){I.shift();E.e--;_--}if(x>_)y(E,_,i.RM,w[0]!==m);return E};b.eq=function(e){return this.cmp(e)===0};b.gt=function(e){return this.cmp(e)>0};b.gte=function(e){return this.cmp(e)>-1};b.lt=function(e){return this.cmp(e)<0};b.lte=function(e){return this.cmp(e)<1};b.minus=b.sub=function(e){var t,i,r,n,s=this,o=s.constructor,a=s.s,l=(e=new o(e)).s;if(a!=l){e.s=-l;return s.plus(e)}var c=s.c.slice(),u=s.e,f=e.c,h=e.e;if(!c[0]||!f[0]){if(f[0]){e.s=-l}else if(c[0]){e=new o(s)}else{e.s=1}return e}if(a=u-h){if(n=a<0){a=-a;r=c}else{h=u;r=f}r.reverse();for(l=a;l--;)r.push(0);r.reverse()}else{i=((n=c.length<f.length)?c:f).length;for(a=l=0;l<i;l++){if(c[l]!=f[l]){n=c[l]<f[l];break}}}if(n){r=c;c=f;f=r;e.s=-e.s}if((l=(i=f.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;i>a;){if(c[--i]<f[i]){for(t=i;t&&!c[--t];)c[t]=9;--c[t];c[i]+=10}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;){c.shift();--h}if(!c[0]){e.s=1;c=[h=0]}e.c=c;e.e=h;return e};b.mod=function(e){var t,i=this,r=i.constructor,n=i.s,s=(e=new r(e)).s;if(!e.c[0]){throw Error(d)}i.s=e.s=1;t=e.cmp(i)==1;i.s=n;e.s=s;if(t)return new r(i);n=r.DP;s=r.RM;r.DP=r.RM=0;i=i.div(e);r.DP=n;r.RM=s;return this.minus(i.times(e))};b.neg=function(){var e=new this.constructor(this);e.s=-e.s;return e};b.plus=b.add=function(e){var t,i,r,n=this,s=n.constructor;e=new s(e);if(n.s!=e.s){e.s=-e.s;return n.minus(e)}var o=n.e,a=n.c,l=e.e,c=e.c;if(!a[0]||!c[0]){if(!c[0]){if(a[0]){e=new s(n)}else{e.s=n.s}}return e}a=a.slice();if(t=o-l){if(t>0){l=o;r=c}else{t=-t;r=a}r.reverse();for(;t--;)r.push(0);r.reverse()}if(a.length-c.length<0){r=c;c=a;a=r}t=c.length;for(i=0;t;a[t]%=10)i=(a[--t]=a[t]+c[t]+i)/10|0;if(i){a.unshift(i);++l}for(t=a.length;a[--t]===0;)a.pop();e.c=a;e.e=l;return e};b.pow=function(e){var t=this,i=new t.constructor("1"),r=i,n=e<0;if(e!==~~e||e<-o||e>o){throw Error(f+"exponent")}if(n)e=-e;for(;;){if(e&1)r=r.times(t);e>>=1;if(!e)break;t=t.times(t)}return n?i.div(r):r};b.prec=function(e,t){if(e!==~~e||e<1||e>s){throw Error(f+"precision")}return y(new this.constructor(this),e,t)};b.round=function(e,t){if(e===m)e=0;else if(e!==~~e||e<-s||e>s){throw Error(h)}return y(new this.constructor(this),e+this.e+1,t)};b.sqrt=function(){var e,t,i,r=this,n=r.constructor,s=r.s,o=r.e,a=new n("0.5");if(!r.c[0])return new n(r);if(s<0){throw Error(u+"No square root")}s=Math.sqrt(r+"");if(s===0||s===1/0){t=r.c.join("");if(!(t.length+o&1))t+="0";s=Math.sqrt(t);o=((o+1)/2|0)-(o<0||o&1);e=new n((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)}else{e=new n(s+"")}o=e.e+(n.DP+=4);do{i=e;e=a.times(i.plus(r.div(i)))}while(i.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return y(e,(n.DP-=4)+e.e+1,n.RM)};b.times=b.mul=function(e){var t,i=this,r=i.constructor,n=i.c,s=(e=new r(e)).c,o=n.length,a=s.length,l=i.e,c=e.e;e.s=i.s==e.s?1:-1;if(!n[0]||!s[0]){e.c=[e.e=0];return e}e.e=l+c;if(o<a){t=n;n=s;s=t;c=o;o=a;a=c}for(t=new Array(c=o+a);c--;)t[c]=0;for(l=a;l--;){a=0;for(c=o+l;c>l;){a=t[c]+s[l]*n[c-l-1]+a;t[c--]=a%10;a=a/10|0}t[c]=a}if(a)++e.e;else t.shift();for(l=t.length;!t[--l];)t.pop();e.c=t;return e};b.toExponential=function(e,t){var i=this,r=i.c[0];if(e!==m){if(e!==~~e||e<0||e>s){throw Error(h)}i=y(new i.constructor(i),++e,t);for(;i.c.length<e;)i.c.push(0)}return j(i,true,!!r)};b.toFixed=function(e,t){var i=this,r=i.c[0];if(e!==m){if(e!==~~e||e<0||e>s){throw Error(h)}i=y(new i.constructor(i),e+i.e+1,t);for(e=e+i.e+1;i.c.length<e;)i.c.push(0)}return j(i,false,!!r)};b.toJSON=b.toString=function(){var e=this,t=e.constructor;return j(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])};b.toNumber=function(){var e=Number(j(this,true,true));if(this.constructor.strict===true&&!this.eq(e.toString())){throw Error(u+"Imprecise conversion")}return e};b.toPrecision=function(e,t){var i=this,r=i.constructor,n=i.c[0];if(e!==m){if(e!==~~e||e<1||e>s){throw Error(f+"precision")}i=y(new r(i),e,t);for(;i.c.length<e;)i.c.push(0)}return j(i,e<=i.e||i.e<=r.NE||i.e>=r.PE,!!n)};b.valueOf=function(){var e=this,t=e.constructor;if(t.strict===true){throw Error(u+"valueOf disallowed")}return j(e,e.e<=t.NE||e.e>=t.PE,true)};i=v();i["default"]=i.Big=i;if(e.exports){e.exports=i}else{t.Big=i}})(commonjsGlobal)}));var balInputStepperCss=".bal-input-stepper{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:static;display:inline-block}.bal-input-stepper__inner{display:-ms-flexbox;display:flex;gap:.25rem;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.bal-input-stepper__inner__text{min-width:48px;text-align:center}.bal-input-stepper__input{position:absolute;width:0;height:0;left:0;top:0;margin:0;padding:0;opacity:0;outline:0}";var __decorate=undefined&&undefined.__decorate||function(e,t,i,r){var n=arguments.length,s=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s;return n>3&&s&&Object.defineProperty(t,i,s),s};var InputStepper=function(){function e(e){registerInstance(this,e);this.balChange=createEvent(this,"balChange",7);this.balInput=createEvent(this,"balInput",7);this.balIncrease=createEvent(this,"balIncrease",7);this.balDecrease=createEvent(this,"balDecrease",7);this.inputId="bal-input-stepper-".concat(InputStepperIds++);this.inheritedAttributes={};this.initialValue=0;this.focused=false;this.language=defaultConfig.language;this.region=defaultConfig.region;this.ariaForm=defaultBalAriaForm;this.name=this.inputId;this.min=0;this.max=10;this.steps=1;this.disabled=false;this.readonly=false;this.invalid=false;this.debounce=0;this.value=0}e.prototype.debounceChanged=function(){this.balChange=debounceEvent(this.balChange,this.debounce)};e.prototype.listenOnClick=function(e){inputListenOnClick(this,e)};e.prototype.resetHandler=function(e){var t=e.target;if(t===null||t===void 0?void 0:t.contains(this.el)){this.value=this.initialValue}};e.prototype.connectedCallback=function(){this.debounceChanged();this.initialValue=this.value};e.prototype.componentWillLoad=function(){this.inheritedAttributes=inheritAttributes(this.el,["aria-label","tabindex","title"])};e.prototype.configChanged=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.language=e.language;this.region=e.region;return[2]}))}))};e.prototype.getInputElement=function(){return Promise.resolve(this.nativeInput)};e.prototype.setAriaForm=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.ariaForm=Object.assign({},e);return[2]}))}))};e.prototype.increase=function(){if(!this.disabled&&!this.readonly){var e=new big(this.value).plus(this.steps).toNumber();if(e<=this.max){this.value=e;this.balInput.emit(e);this.balChange.emit(e);this.balIncrease.emit(e)}}};e.prototype.decrease=function(){if(!this.disabled&&!this.readonly){var e=new big(this.value).minus(this.steps).toNumber();if(e>=this.min){this.value=e;this.balInput.emit(e);this.balChange.emit(e);this.balDecrease.emit(e)}}};e.prototype.render=function(){var e=this;var t=BEM.block("input-stepper");var i=t.element("input");var r=t.element("inner");var n=r.element("text");var s=i18nBalInputStepper[this.language].increase;var o=i18nBalInputStepper[this.language].decrease;return h(Host,{"aria-disabled":this.disabled?"true":null,"aria-focused":this.focused?"true":null,class:Object.assign({},t.class())},h("div",{class:Object.assign({},r.class())},h("bal-button",{aria:{title:o,label:o,controls:this.ariaForm.controlId||this.inputId},size:"small",square:true,"data-testid":"bal-input-stepper-decrease",outlined:!this.invalid,icon:"minus",color:this.invalid?"danger":"info",disabled:this.disabled||this.readonly||this.value<=this.min,onClick:function(t){return e.decrease()}}),h("bal-text",{space:"none",color:this.disabled||this.readonly?"grey":this.invalid?"danger":"",bold:true,class:Object.assign({},n.class()),"data-testid":"bal-input-stepper-text"},formatLocaleNumber("".concat(this.language,"-").concat(this.region),this.value)),h("bal-button",{aria:{title:s,label:s,controls:this.ariaForm.controlId||this.inputId},size:"small","data-testid":"bal-input-stepper-increase",square:true,outlined:!this.invalid,icon:"plus",color:this.invalid?"danger":"info",disabled:this.disabled||this.readonly||this.value>=this.max,onClick:function(t){return e.increase()}})),h("input",Object.assign({class:Object.assign({},i.class()),id:this.ariaForm.controlId||this.inputId,"aria-labelledby":this.ariaForm.labelId,"aria-describedby":this.ariaForm.messageId,"aria-invalid":this.invalid===true?"true":"false","aria-disabled":this.disabled?"true":null,"data-testid":"bal-input-stepper",type:"text",value:this.value,name:this.name,tabindex:"-1",ref:function(t){return e.nativeInput=t},readonly:this.readonly,disabled:this.disabled},this.inheritedAttributes)))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{debounce:["debounceChanged"]}},enumerable:false,configurable:true});return e}();__decorate([ListenToConfig()],InputStepper.prototype,"configChanged",null);var InputStepperIds=0;InputStepper.style={css:balInputStepperCss};export{InputStepper as bal_input_stepper};