import{__awaiter,__generator}from"tslib";import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-e015dbc8.js";import{l as raf,t as transitionEndAsync,m as debounceEvent,w as waitForComponent}from"./helpers-08b28736.js";import{L as Logger}from"./log-01623e2c.js";import{L as ListenToConfig}from"./config.decorator-54721e29.js";import{B as BEM}from"./bem-1b28532d.js";import{s as stopEventBubbling}from"./form-input-fd2d14ca.js";import"./browser-9199b5e2.js";import"./icons.constant-35253412.js";import"./index-8b8ed6bd.js";var balAccordionCss=".bal-accordion{display:block;position:relative;width:100%}.bal-accordion--card-v1,.bal-accordion--card-v2{margin-top:var(--bal-space-medium)}@media screen and (min-width: 769px),print{.bal-accordion--card-v1,.bal-accordion--card-v2{margin-top:var(--bal-space-tablet-medium)}}@media screen and (min-width: 1024px){.bal-accordion--card-v1,.bal-accordion--card-v2{margin-top:var(--bal-space-desktop-medium)}}.bal-accordion--card-v2{padding-left:var(--bal-space-medium);padding-right:var(--bal-space-medium);padding-bottom:var(--bal-space-medium)}@media screen and (min-width: 769px),print{.bal-accordion--card-v2{padding-left:var(--bal-space-tablet-medium);padding-right:var(--bal-space-tablet-medium);padding-bottom:var(--bal-space-tablet-medium)}}@media screen and (min-width: 1024px){.bal-accordion--card-v2{padding-left:var(--bal-space-desktop-medium);padding-right:var(--bal-space-desktop-medium);padding-bottom:var(--bal-space-desktop-medium)}}.bal-accordion__wrapper{display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.bal-accordion__trigger--card{margin-left:var(--bal-space-medium);margin-right:var(--bal-space-medium);margin-bottom:var(--bal-space-medium)}@media screen and (min-width: 769px),print{.bal-accordion__trigger--card{margin-left:var(--bal-space-tablet-medium);margin-right:var(--bal-space-tablet-medium);margin-bottom:var(--bal-space-tablet-medium)}}@media screen and (min-width: 1024px){.bal-accordion__trigger--card{margin-left:var(--bal-space-desktop-medium);margin-right:var(--bal-space-desktop-medium);margin-bottom:var(--bal-space-desktop-medium)}}.bal-accordion__content--card{margin-left:var(--bal-space-medium);margin-right:var(--bal-space-medium)}@media screen and (min-width: 769px),print{.bal-accordion__content--card{margin-left:var(--bal-space-tablet-medium);margin-right:var(--bal-space-tablet-medium)}}@media screen and (min-width: 1024px){.bal-accordion__content--card{margin-left:var(--bal-space-desktop-medium);margin-right:var(--bal-space-desktop-medium)}}.bal-accordion--animated{-webkit-transition:all var(--bal-animation-transition-duration) var(--bal-animation-transition-easing);transition:all var(--bal-animation-transition-duration) var(--bal-animation-transition-easing)}.bal-accordion--animated .bal-accordion__content{-webkit-transition:max-height var(--bal-animation-transition-duration) var(--bal-animation-transition-easing);transition:max-height var(--bal-animation-transition-duration) var(--bal-animation-transition-easing)}.bal-accordion__content{overflow:hidden;will-change:max-height}.bal-accordion--collapsing .bal-accordion__content{max-height:0 !important}.bal-accordion--collapsed .bal-accordion__content{display:none}.bal-accordion--expanding .bal-accordion__content{max-height:0}@media (prefers-reduced-motion: reduce){.bal-accordion,.bal-accordion__content{-webkit-transition:none !important;transition:none !important}}";var __decorate$3=undefined&&undefined.__decorate||function(t,e,i,n){var a=arguments.length,r=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)if(o=t[c])r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r;return a>3&&r&&Object.defineProperty(e,i,r),r};var Accordion=function(){function t(t){var e=this;registerInstance(this,t);this.balChange=createEvent(this,"balChange",7);this.balWillAnimate=createEvent(this,"balWillAnimate",7);this.balDidAnimate=createEvent(this,"balDidAnimate",7);this.componentId="bal-accordion-".concat(accordionIds++);this.updateState=function(t){if(t===void 0){t=false}if(e.active){e.expand(t)}else{e.collapse(t)}};this.setState=function(t){e.state=t;if(e.version===2){e.updateTriggerElement();e.updateDetailsElement();e.updateSummaryElement()}};this.updateDetailsElement=function(){var t=e.detailsElement;if(t){t.state=e.state;t.active=e.active;t.animated=e.animated}};this.updateTriggerElement=function(){var t=e.triggerElement;if(t){t.state=e.state;t.active=e.active}};this.updateSummaryElement=function(){var t=e.summaryElement;if(t){t.state=e.state;t.active=e.active}};this.expand=function(t){if(t===void 0){t=false}e.active=true;var i=e.detailsElement;var n=e.detailsWrapperElement;if(t||i===null||n===null){e.setState(4);return e.active}if(e.state===4){return e.active}if(e.currentRaf!==undefined){cancelAnimationFrame(e.currentRaf)}if(e.shouldAnimate()){raf((function(){e.setState(8);e.currentRaf=raf((function(){return __awaiter(e,void 0,void 0,(function(){var t,e;return __generator(this,(function(a){switch(a.label){case 0:t=n.offsetHeight;e=transitionEndAsync(i,300);i.style.setProperty("max-height","".concat(t,"px"));this.balWillAnimate.emit(this.active);return[4,e];case 1:a.sent();this.setState(4);i.style.removeProperty("max-height");this.balDidAnimate.emit(this.active);return[2]}}))}))}))}))}else{e.balWillAnimate.emit(e.active);e.setState(4);e.balDidAnimate.emit(e.active)}return e.active};this.collapse=function(t){if(t===void 0){t=false}e.active=false;var i=e.detailsElement;if(t||i===null){e.setState(1);return e.active}if(e.state===1){return e.active}if(e.currentRaf!==undefined){cancelAnimationFrame(e.currentRaf)}if(e.shouldAnimate()){e.currentRaf=raf((function(){return __awaiter(e,void 0,void 0,(function(){var t;var e=this;return __generator(this,(function(n){t=i.offsetHeight;i.style.setProperty("max-height","".concat(t,"px"));raf((function(){return __awaiter(e,void 0,void 0,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:t=transitionEndAsync(i,300);this.setState(2);this.balDidAnimate.emit(this.active);return[4,t];case 1:e.sent();this.setState(1);i.style.removeProperty("max-height");this.balDidAnimate.emit(this.active);return[2]}}))}))}));return[2]}))}))}))}else{e.balDidAnimate.emit(e.active);e.setState(1);e.balDidAnimate.emit(e.active)}return e.active};this.shouldAnimate=function(){if(typeof window==="undefined"){return false}return e.animated};this.onTriggerClickV1=function(){e.humanToggle()};this.state=1;this.animated=true;this.active=false;this.debounce=0;this.openLabel="";this.openIcon="plus";this.closeLabel="";this.closeIcon="close";this.card=false;this.version=1}t.prototype.createLogger=function(t){this.log=t};t.prototype.activeChanged=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){if(t!==e){this.active=t;this.updateState()}return[2]}))}))};t.prototype.debounceChanged=function(){this.balChange=debounceEvent(this.balChange,this.debounce)};t.prototype.connectedCallback=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:this.debounceChanged();return[4,waitForComponent(this.el)];case 1:t.sent();if(this.active){this.activeChanged(this.active,false)}this.updateState(true);return[2]}}))}))};t.prototype.configChanged=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.animated=t.animated;return[2]}))}))};t.prototype.present=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.expand()]}))}))};t.prototype.dismiss=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.collapse()]}))}))};t.prototype.toggle=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(this.active){return[2,this.collapse()]}else{return[2,this.expand()]}return[2]}))}))};t.prototype.humanToggle=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:if(!this.active)return[3,2];return[4,this.collapse()];case 1:t.sent();return[3,4];case 2:return[4,this.expand()];case 3:t.sent();t.label=4;case 4:this.balChange.emit(this.active);return[2,this.active]}}))}))};Object.defineProperty(t.prototype,"summaryElement",{get:function(){var t;return((t=this.el)===null||t===void 0?void 0:t.querySelector("#".concat(this.componentId,"-summary")))||null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"triggerElement",{get:function(){var t;return((t=this.el)===null||t===void 0?void 0:t.querySelector("#".concat(this.componentId,"-trigger")))||null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"detailsElement",{get:function(){var t;if(this.version===1){return this.contentEl||null}return((t=this.el)===null||t===void 0?void 0:t.querySelector("#".concat(this.componentId,"-details")))||null},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"detailsWrapperElement",{get:function(){var t;if(this.version===1){return this.contentElWrapper||null}return((t=this.el)===null||t===void 0?void 0:t.querySelector("#".concat(this.componentId,"-details > div")))||null},enumerable:false,configurable:true});t.prototype.render=function(){return this.version===2?this.renderVersion2():this.renderVersion1()};t.prototype.renderVersion2=function(){var t=BEM.block("accordion");return h(Host,{id:this.componentId,class:Object.assign(Object.assign(Object.assign(Object.assign({},t.class()),t.modifier("active").class(this.active)),t.modifier("card-v2").class(this.card)),t.modifier("animated").class(this.animated))})};t.prototype.renderVersion1=function(){var t=this;var e=this.active?this.closeLabel:this.openLabel;var i=this.active?this.closeIcon:this.openIcon;var n=BEM.block("accordion");var a=this.state===4||this.state===8;var r=a?"button expanded":"button";var o=a?"content expanded":"content";return h(Host,{id:this.componentId,class:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.class()),n.modifier("card-v1").class(this.card)),n.modifier("active").class(this.active)),n.modifier("expanding").class(this.state===8)),n.modifier("expanded").class(this.state===4)),n.modifier("collapsing").class(this.state===2)),n.modifier("collapsed").class(this.state===1)),n.modifier("animated").class(this.animated))},h("div",{class:Object.assign({},n.element("wrapper").class())},h("div",{class:Object.assign(Object.assign({},n.element("trigger").class()),n.element("trigger").modifier("card").class(this.card)),"data-testid":"bal-accordion-summary"},h("bal-button",{id:"".concat(this.componentId,"-button"),"aria-controls":"".concat(this.componentId,"-content"),part:r,"data-testid":"bal-accordion-trigger",expanded:true,color:"info",icon:i,onClick:this.onTriggerClickV1},e)),h("div",{id:"".concat(this.componentId,"-content"),"aria-labelledby":"".concat(this.componentId,"-button"),role:"region",part:o,class:Object.assign(Object.assign({},n.element("content").class()),n.element("content").modifier("card").class(this.card)),ref:function(e){return t.contentEl=e}},h("div",{id:"".concat(this.componentId,"-content-wrapper"),"data-testid":"bal-accordion-details",class:Object.assign({},n.element("content").element("wrapper").class()),ref:function(e){return t.contentElWrapper=e}},h("slot",null)))))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{active:["activeChanged"],debounce:["debounceChanged"]}},enumerable:false,configurable:true});return t}();__decorate$3([Logger("bal-accordion")],Accordion.prototype,"createLogger",null);__decorate$3([ListenToConfig()],Accordion.prototype,"configChanged",null);var accordionIds=0;Accordion.style={css:balAccordionCss};var balAccordionDetailsCss=".bal-accordion__details{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;will-change:max-height;min-block-size:auto;min-height:auto;min-inline-size:auto;min-width:auto}.bal-accordion__details--animated{-webkit-transition:max-height var(--bal-animation-transition-duration) var(--bal-animation-transition-easing);transition:max-height var(--bal-animation-transition-duration) var(--bal-animation-transition-easing)}.bal-accordion__details--collapsing{max-height:0 !important}.bal-accordion__details--collapsed{display:none}.bal-accordion__details--expanding{max-height:0}@media (prefers-reduced-motion: reduce){.bal-accordion__details{-webkit-transition:none !important;transition:none !important}}";var __decorate$2=undefined&&undefined.__decorate||function(t,e,i,n){var a=arguments.length,r=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)if(o=t[c])r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r;return a>3&&r&&Object.defineProperty(e,i,r),r};var AccordionDetail=function(){function t(t){var e=this;registerInstance(this,t);this.componentId="bal-accordion-details-".concat(accordionDetailIds++);this.updateAccordionId=function(){var t;return e.parentAccordionId=(t=e.parentAccordionElement)===null||t===void 0?void 0:t.id};this.parentAccordionId=undefined;this.state=1;this.active=false;this.animated=true}t.prototype.createLogger=function(t){this.log=t};t.prototype.connectedCallback=function(){this.updateAccordionId()};t.prototype.componentWillRender=function(){this.updateAccordionId()};Object.defineProperty(t.prototype,"parentAccordionElement",{get:function(){var t;return((t=this.el)===null||t===void 0?void 0:t.closest("bal-accordion"))||null},enumerable:false,configurable:true});t.prototype.render=function(){var t=BEM.block("accordion").element("details");var e=t.element("container");var i=e.element("wrapper");var n=this.parentAccordionId?"".concat(this.parentAccordionId,"-details"):this.componentId;var a=this.state===4||this.state===8;var r=a?"content expanded":"content";return h(Host,{id:n,class:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t.class()),t.modifier("active").class(this.active)),t.modifier("expanding").class(this.state===8)),t.modifier("expanded").class(this.state===4)),t.modifier("collapsing").class(this.state===2)),t.modifier("collapsed").class(this.state===1)),t.modifier("animated").class(this.animated))},h("div",{id:"".concat(n,"-content"),"aria-labelledby":"".concat(this.parentAccordionId,"-trigger-button"),role:"region",part:r,class:Object.assign({},i.class()),"data-testid":"bal-accordion-details"},h("slot",null)))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return t}();__decorate$2([Logger("bal-accordion-details")],AccordionDetail.prototype,"createLogger",null);var accordionDetailIds=0;AccordionDetail.style={css:balAccordionDetailsCss};var balAccordionSummaryCss=".bal-accordion__summary{position:static}.bal-accordion__summary--trigger{cursor:pointer}";var __decorate$1=undefined&&undefined.__decorate||function(t,e,i,n){var a=arguments.length,r=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)if(o=t[c])r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r;return a>3&&r&&Object.defineProperty(e,i,r),r};var AccordionSummary=function(){function t(t){var e=this;registerInstance(this,t);this.componentId="bal-accordion-summary-".concat(accordionSummaryIds++);this.updateAccordionId=function(){var t;return e.parentAccordionId=(t=e.parentAccordionElement)===null||t===void 0?void 0:t.id};this.onClick=function(t){var i;stopEventBubbling(t);(i=e.parentAccordionElement)===null||i===void 0?void 0:i.humanToggle()};this.parentAccordionId=undefined;this.trigger=false;this.active=false;this.state=1}t.prototype.createLogger=function(t){this.log=t};t.prototype.connectedCallback=function(){var t=this.parentAccordionElement;if(t){t.version=2}this.updateAccordionId()};t.prototype.disconnectedCallback=function(){var t=this.parentAccordionElement;if(t){t.version=1}this.updateAccordionId()};Object.defineProperty(t.prototype,"parentAccordionElement",{get:function(){var t;return((t=this.el)===null||t===void 0?void 0:t.closest("bal-accordion"))||null},enumerable:false,configurable:true});t.prototype.render=function(){var t=BEM.block("accordion").element("summary");var e=this.parentAccordionId?"".concat(this.parentAccordionId,"-summary"):this.componentId;var i=this.state===4||this.state===8;var n=i?"button expanded":"button";var a={};if(this.trigger){a={"aria-controls":"".concat(this.parentAccordionId,"-details-content"),role:"button",part:n,"data-testid":"bal-accordion-button",onClick:this.onClick}}return h(Host,Object.assign({id:e,class:Object.assign(Object.assign({},t.class()),t.modifier("trigger").class(this.trigger))},a,{"data-testid":"bal-accordion-summary"}))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return t}();__decorate$1([Logger("bal-accordion-summary")],AccordionSummary.prototype,"createLogger",null);var accordionSummaryIds=0;AccordionSummary.style={css:balAccordionSummaryCss};var balAccordionTriggerCss=".bal-accordion__trigger{position:static}.bal-accordion__trigger__button{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;background:rgba(0,0,0,0);border:none;height:3rem;width:3rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}";var __decorate=undefined&&undefined.__decorate||function(t,e,i,n){var a=arguments.length,r=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,n);else for(var c=t.length-1;c>=0;c--)if(o=t[c])r=(a<3?o(r):a>3?o(e,i,r):o(e,i))||r;return a>3&&r&&Object.defineProperty(e,i,r),r};var AccordionTrigger=function(){function t(t){var e=this;registerInstance(this,t);this.componentId="bal-accordion-trigger-".concat(accordionTriggerIds++);this.updateAccordionId=function(){var t;return e.parentAccordionId=(t=e.parentAccordionElement)===null||t===void 0?void 0:t.id};this.onClick=function(t){var i;stopEventBubbling(t);(i=e.parentAccordionElement)===null||i===void 0?void 0:i.humanToggle()};this.parentAccordionId=undefined;this.button=false;this.openLabel="";this.openIcon="caret-down";this.closeLabel="";this.closeIcon="";this.color="info";this.size="";this.active=false;this.state=1}t.prototype.createLogger=function(t){this.log=t};t.prototype.connectedCallback=function(){this.updateAccordionId()};t.prototype.componentWillRender=function(){this.updateAccordionId()};Object.defineProperty(t.prototype,"parentAccordionElement",{get:function(){var t;return((t=this.el)===null||t===void 0?void 0:t.closest("bal-accordion"))||null},enumerable:false,configurable:true});t.prototype.render=function(){var t=BEM.block("accordion").element("trigger");var e=this.parentAccordionId?"".concat(this.parentAccordionId,"-trigger"):this.componentId;var i=this.active?this.closeLabel:this.openLabel;var n=false;var a=this.active?this.closeIcon:this.openIcon;if(this.closeIcon===""||this.closeIcon===undefined||this.closeIcon===null){n=this.active;a=this.openIcon||"caret-down"}var r=this.state===4||this.state===8;var o=r?"button expanded":"button";return h(Host,{id:e,class:Object.assign({},t.class())},this.button?h("bal-button",{id:"".concat(e,"-button"),"aria-controls":"".concat(this.parentAccordionId,"-details-content"),part:o,"data-testid":"bal-accordion-trigger",expanded:true,icon:a,iconTurn:n,color:this.color,size:this.size,onClick:this.onClick},i):h("button",{class:Object.assign({},t.element("button").class()),id:"".concat(e,"-button"),"aria-controls":"".concat(this.parentAccordionId,"-details-content"),"aria-label":"accordion trigger",part:o,"data-testid":"bal-accordion-trigger",onClick:this.onClick},h("bal-icon",{turn:n,name:a})))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return t}();__decorate([Logger("bal-accordion-trigger")],AccordionTrigger.prototype,"createLogger",null);var accordionTriggerIds=0;AccordionTrigger.style={css:balAccordionTriggerCss};export{Accordion as bal_accordion,AccordionDetail as bal_accordion_details,AccordionSummary as bal_accordion_summary,AccordionTrigger as bal_accordion_trigger};