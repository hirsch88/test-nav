import{__assign,__extends}from"tslib";var $a2188ba8c266b376$export$cacd6541cfeeb6c1;(function(e){e["None"]="0";e["Left"]="left";e["Right"]="right";e["Up"]="up";e["Down"]="down"})($a2188ba8c266b376$export$cacd6541cfeeb6c1||($a2188ba8c266b376$export$cacd6541cfeeb6c1={}));var $a2188ba8c266b376$export$86ae6e8ac17a67c6=Object.freeze({Horizontal:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right],Vertical:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down],All:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down,$a2188ba8c266b376$export$cacd6541cfeeb6c1.None]});var $a2188ba8c266b376$export$a1d3109c03b1d511;(function(e){e["Inactive"]="inactive";e["Active"]="active";e["Blocked"]="blocked"})($a2188ba8c266b376$export$a1d3109c03b1d511||($a2188ba8c266b376$export$a1d3109c03b1d511={}));var $a2188ba8c266b376$export$b8339a9622c147c0;(function(e){e["NoPointer"]="nopointer";e["SinglePointer"]="singlepointer";e["DualPointer"]="dualpointer"})($a2188ba8c266b376$export$b8339a9622c147c0||($a2188ba8c266b376$export$b8339a9622c147c0={}));var $a2188ba8c266b376$export$2fb579dd5dfdbea;(function(e){e["NoActiveGesture"]="noactivegesture";e["ActiveGesture"]="activegesture"})($a2188ba8c266b376$export$2fb579dd5dfdbea||($a2188ba8c266b376$export$2fb579dd5dfdbea={}));var $07c7ab2351895186$export$baf26146a414f24a=function(){function e(e,t){this.x=e;this.y=t}return e}();var $c0ee1a209fd4fc8d$export$9b781de7bf37bf48=function(){function e(e,t){this.startPoint=e;this.endPoint=t;this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None;this.deltaX=this.endPoint.x-this.startPoint.x;this.deltaY=this.endPoint.y-this.startPoint.y;this.x=this.deltaX;this.y=this.deltaY;this.vectorLength=Math.sqrt(Math.pow(this.deltaX,2)+Math.pow(this.deltaY,2));if(Math.abs(this.deltaX)>Math.abs(this.deltaY)){if(this.startPoint.x<this.endPoint.x)this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right;else if(this.startPoint.x>this.endPoint.x)this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left}else{if(this.startPoint.y<this.endPoint.y)this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down;else if(this.startPoint.y>this.endPoint.y)this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up}}return e}();var $1f7944f1763e45ce$export$2db6c17465f94a2=function(){function e(){}e.getVector=function(e,t){var n=new $07c7ab2351895186$export$baf26146a414f24a(e.clientX,e.clientY);var i=new $07c7ab2351895186$export$baf26146a414f24a(t.clientX,t.clientY);var r=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(n,i);return r};e.getSpeed=function(e,t,n){var i=0;var r=n-t;var a=r/1e3;if(e!=null&&a!=0)i=e.vectorLength/a;return i};e.calculateRotationAngle=function(e,t){var n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);var i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint);var r=new $07c7ab2351895186$export$baf26146a414f24a(0,0);var a=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(n.startPoint,r);var o=this.translatePoint(n.endPoint,a);var s=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(i.startPoint,r);var c=this.translatePoint(i.endPoint,s);var l=this.calcAngleRad(o)*-1;var p=c.x*Math.cos(l)-c.y*Math.sin(l);var d=Math.round(c.x*Math.sin(l)+c.y*Math.cos(l));var u=Math.atan2(d,p)*180/Math.PI;return u};e.calculateVectorAngle=function(e,t){var n=0;if(e.vectorLength>0&&t.vectorLength>0){var i=(e.x*t.x+e.y*t.y)/(e.vectorLength*t.vectorLength);var r=Math.acos(i);n=this.rad2deg(r)}return n};e.translatePoint=function(e,t){var n=e.x+t.x;var i=e.y+t.y;var r=new $07c7ab2351895186$export$baf26146a414f24a(n,i);return r};e.calcAngleDegrees=function(e){var t=Math.atan2(e.y,e.x)*180/Math.PI;if(t<0)t=360+t;return t};e.calcAngleRad=function(e){var t=Math.atan2(e.y,e.x);if(t<0)t=2*Math.PI+t;return t};e.deg2rad=function(e){var t=Math.PI/180*e;return t};e.rad2deg=function(e){var t=e/(Math.PI/180);return t};e.getCenter=function(e,t){var n=(e.x+t.x)/2;var i=(e.y+t.y)/2;var r=new $07c7ab2351895186$export$baf26146a414f24a(n,i);return r};e.getCenterMovementVector=function(e,t){var n=this.getCenter(e.startPoint,t.startPoint);var i=this.getCenter(e.endPoint,t.endPoint);var r=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(n,i);return r};e.calculateDistanceChange=function(e,t){var n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);var i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint);var r=i.vectorLength-n.vectorLength;return r};e.calculateAbsoluteDistanceChange=function(e,t){var n=this.calculateDistanceChange(e,t);var i=Math.abs(n);return i};e.calculateRelativeDistanceChange=function(e,t){var n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);var i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint);var r=i.vectorLength/n.vectorLength;return r};return e}();var $d25d2392b002d8dc$export$573b9b62d5ae28f7;(function(e){e["Active"]="active";e["Removed"]="removed";e["Canceled"]="canceled"})($d25d2392b002d8dc$export$573b9b62d5ae28f7||($d25d2392b002d8dc$export$573b9b62d5ae28f7={}));var $d25d2392b002d8dc$export$b56007f12edf0c17=function(){function e(e,t){var n;this.options=__assign({DEBUG:false},t);this.DEBUG=this.options.DEBUG;var i=(new Date).getTime();this.pointerId=e.pointerId;this.vectorTimespan=(n=this.options.vectorTimespan)!==null&&n!==void 0?n:100;this.initialPointerEvent=e;this.currentPointerEvent=e;this.recognizedEvents=[e];this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Active;var r=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(e,e);var a={startX:this.initialPointerEvent.clientX,startY:this.initialPointerEvent.clientY,vector:r,deltaX:0,deltaY:0,startTimestampUTC:i,startTimestamp:this.initialPointerEvent.timeStamp,currentTimestamp:this.initialPointerEvent.timeStamp,endTimestamp:null,maximumSpeed:0,currentSpeed:0,distance:0,maximumDistance:0,averageSpeed:0,finalSpeed:0,traveledDistance:0,hasBeenMoved:false,duration:0};var o={duration:0,speed:0,vector:r,distance:0,isMoving:false};var s={global:a,live:o};this.parameters=s}e.prototype.getTarget=function(){return this.initialPointerEvent.target};e.prototype.reset=function(){};e.prototype.onIdle=function(){var e=(new Date).getTime();var t=e-this.parameters.global.startTimestampUTC;this.parameters.global.duration=t};e.prototype.onPointerMove=function(e){this.parameters.global.hasBeenMoved=true;this.parameters.live.isMoving=true;this.update(e)};e.prototype.onPointerUp=function(e){this.parameters.global.finalSpeed=this.parameters.live.speed;this.parameters.live.speed=0;this.parameters.live.isMoving=false;this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Removed;this.parameters.global.endTimestamp=e.timeStamp;this.update(e);if(this.DEBUG===true)console.log("[PointerInput] pointerdown ended. pointerdown duration: ".concat(this.parameters.global.duration,"ms"))};e.prototype.onPointerLeave=function(e){this.onPointerUp(e)};e.prototype.onPointerCancel=function(e){this.update(e);this.parameters.live.speed=0;this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Canceled;this.parameters.live.isMoving=false;this.parameters.global.endTimestamp=e.timeStamp;if(this.DEBUG===true)console.log("[PointerInput] canceled, pointerdown duration:".concat(this.parameters.global.duration,"ms"))};e.prototype.update=function(e){this.currentPointerEvent=e;this.recognizedEvents.push(e);var t=this.getTimedPointerEvents();var n=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(t[0],t[1]);this.parameters.live.vector=n;this.parameters.live.distance=n.vectorLength;this.parameters.live.speed=$1f7944f1763e45ce$export$2db6c17465f94a2.getSpeed(n,t[0].timeStamp,t[1].timeStamp);if(this.parameters.live.speed>this.parameters.global.maximumSpeed)this.parameters.global.maximumSpeed=this.parameters.live.speed;this.parameters.global.currentTimestamp=e.timeStamp;this.parameters.global.duration=e.timeStamp-this.parameters.global.startTimestamp;this.parameters.global.deltaX=n.endPoint.x-this.parameters.global.startX;this.parameters.global.deltaY=n.endPoint.y-this.parameters.global.startY;var i=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(this.initialPointerEvent,this.currentPointerEvent);this.parameters.global.vector=i;this.parameters.global.distance=i.vectorLength;if(i.vectorLength>this.parameters.global.maximumDistance)this.parameters.global.maximumDistance=i.vectorLength;if(this.DEBUG===true){console.log("[PointerInput] current speed: ".concat(this.parameters.live.speed,"px/s"));console.log("[PointerInput] pointerdown duration: ".concat(this.parameters.global.duration,"ms"));console.log("[PointerInput] live vector length within vectorTimespan: ".concat(this.parameters.live.vector.vectorLength,"px"))}};e.prototype.getTimedPointerEvents=function(){var e=this.initialPointerEvent;var t=this.recognizedEvents[this.recognizedEvents.length-1];var n=this.recognizedEvents.length-1;var i=0;var r=t.timeStamp;while(i<this.vectorTimespan){n=n-1;if(n<0)break;e=this.recognizedEvents[n];i=r-e.timeStamp}var a=[e,t];this.recognizedEvents=this.recognizedEvents.slice(-20);return a};return e}();var $5fe7e4b452e08fad$export$bbcc47898202c6b8=function(){function e(e){this.pointer=e;this.parameters=e.parameters}e.prototype.getTarget=function(){return this.pointer.initialPointerEvent.target};e.prototype.getCurrentPointerEvent=function(){return this.pointer.currentPointerEvent};e.prototype.getCurrentDirection=function(){return this.parameters.live.vector.direction};e.prototype.onIdle=function(){};e.prototype.onPointerMove=function(e){};e.prototype.onPointerUp=function(e){};e.prototype.onPointerLeave=function(e){};e.prototype.onPointerCancel=function(e){};return e}();var $24f1c062f8ef0b30$var$window=globalThis["window"];var $24f1c062f8ef0b30$export$9d2aa32114ab0612;if($24f1c062f8ef0b30$var$window===null||$24f1c062f8ef0b30$var$window===void 0?void 0:$24f1c062f8ef0b30$var$window.CustomEvent)$24f1c062f8ef0b30$export$9d2aa32114ab0612=$24f1c062f8ef0b30$var$window.CustomEvent;else $24f1c062f8ef0b30$export$9d2aa32114ab0612=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.detail=n===null||n===void 0?void 0:n.detail;return i}t.prototype.initCustomEvent=function(){throw new Error("Unsupported deprecated method")};return t}(Event);var $f752273e736c5336$export$6e9c3b1e1fa2b597=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}($24f1c062f8ef0b30$export$9d2aa32114ab0612);var $f752273e736c5336$export$61ce360501d38a6f=function(){function e(e,t){this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive;this.validPointerManagerState=null;this.validPointerInputConstructor=$5fe7e4b452e08fad$export$bbcc47898202c6b8;this.domElement=e;this.initialPointerEvent=null;this.initialParameters=null;this.activeStateParameters=null;this.options=__assign({bubbles:true,blocks:[],supportedDirections:[],supportedButtons:[],DEBUG:false},t);this.DEBUG=this.options.DEBUG}e.prototype.getEmptyGestureParameters=function(){var e={global:{min:{},max:{},boolean:{}},live:{min:{},max:{},boolean:{}}};return e};e.prototype.getGestureParameters=function(){var e;if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active){e=this.activeStateParameters;if(this.DEBUG==true){console.log("[".concat(this.eventBaseName,"] validating using activeStateParameters"));console.log(e)}}else{if(this.DEBUG==true)console.log("[".concat(this.eventBaseName,"] validating using initialParameters"));e=this.initialParameters}if(e==null)throw new Error("[Gesture] no gesture parameters found. Do not call .getGestureParameters on abstract class Gesture");return e};e.prototype.validateGestureParameters=function(e){var t=this.getGestureParameters();var n=true;var i;for(i in t){var r=t[i];var a=e.parameters[i];var o=void 0;for(o in r){var s=r[o];var c=void 0;for(c in s){var l=s[c];var p=a[c];if(this.DEBUG==true)console.log("[".concat(this.eventBaseName,"] validating ").concat(i," ").concat(o,": required: ").concat(l,", pointer: ").concat(p));if(typeof l=="boolean"&&typeof p=="boolean")n=this.validateBooleanParameter(l,p);else if(typeof l=="number"&&typeof p=="number")n=this.validateMinMaxParameter(l,p,o);if(n==false){if(this.DEBUG==true)console.log("[".concat(this.eventBaseName,"] invalidated "));return false}}}}return true};e.prototype.validateBooleanParameter=function(e,t){if(e==null)return true;else if(e==t){if(this.DEBUG==true)console.log("validated: required value: ".concat(e,", current value: ").concat(t));return true}if(this.DEBUG==true)console.log("dismissing ".concat(this.eventBaseName,": required value: ").concat(e,", current value: ").concat(t));return false};e.prototype.validateMinMaxParameter=function(e,t,n){if(n=="min"){if(t>=e)return true}else if(n=="max"){if(t<=e)return true}return false};e.prototype.validateDirection=function(e){var t=e.getCurrentDirection();if(this.options.supportedDirections.length&&!this.options.supportedDirections.includes(t)){if(this.DEBUG==true)console.log("[Gestures] dismissing ".concat(this.eventBaseName,": supported directions: ").concat(this.options.supportedDirections,", current direction: ").concat(t));return false}return true};e.prototype.validateGestureState=function(){if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Blocked)return false;return true};e.prototype.validatePointerManagerState=function(e){if(e.state==this.validPointerManagerState)return true;if(this.DEBUG==true)console.log("[Gesture] PointerManagerState invalidated ".concat(this.eventBaseName,": ").concat(e.state));return false};e.prototype.validatePointerInputConstructor=function(e){if(e instanceof this.validPointerInputConstructor)return true;if(this.DEBUG==true)console.log("[Gesture] PointerInputConstructor invalidated ".concat(this.eventBaseName,": ").concat(this.validPointerInputConstructor));return false};e.prototype.validate=function(e){var t=this.validateGestureState();if(t==true)t=this.validatePointerManagerState(e);var n=e.activePointerInput;if(t==true&&n!=null){t=this.validatePointerInputConstructor(n);if(t==true)t=this.validateDirection(n);if(t==true)t=this.validateGestureParameters(n)}return t};e.prototype.recognize=function(e){var t=this.validate(e);if(t==true&&this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive)this.onStart(e);if(t==true&&this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active){if(this.initialPointerEvent==null)this.setInitialPointerEvent(e);this.emit(e)}else if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&t==false)this.onEnd(e);else if(this.DEBUG==true)console.log("not firing event ".concat(this.eventBaseName,". No SinglePointerInput found"))};e.prototype.getPointerInput=function(e){if(e.hasPointersOnSurface()==true&&e.activePointerInput instanceof this.validPointerInputConstructor)return e.activePointerInput;else if(e.lastRemovedPointer instanceof $d25d2392b002d8dc$export$b56007f12edf0c17){var t=e.getlastRemovedPointerInput();if(t instanceof this.validPointerInputConstructor)return t}return null};e.prototype.setInitialPointerEvent=function(e){var t=this.getPointerInput(e);if(t instanceof this.validPointerInputConstructor){var n=t.getCurrentPointerEvent();this.initialPointerEvent=n}};e.prototype.emit=function(e,t){t=t||this.eventBaseName;if(this.DEBUG===true)console.log("[Gestures] detected and firing event ".concat(t));var n=this.getPointerInput(e);if(n!=null){var i=n.getTarget();if(i instanceof EventTarget){var r=this.getEventData(n,e);var a={detail:r,bubbles:this.options.bubbles};if(this.DEBUG===true)console.log(a);var o=new $f752273e736c5336$export$6e9c3b1e1fa2b597(t,a);if(a.bubbles==true)i.dispatchEvent(o);else this.domElement.dispatchEvent(o);var s=r.live.direction;var c=!!this.options.supportedDirections;if(c==true&&s!=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None&&(t==this.eventBaseName||t=="swipe"))for(var l=0;l<this.options.supportedDirections.length;l++){var p=this.options.supportedDirections[l];if(p==s){var d=t+p;if(this.DEBUG==true)console.log("[Gestures] detected and firing event ".concat(d));var u=new $f752273e736c5336$export$6e9c3b1e1fa2b597(d,a);if(a.bubbles==true)i.dispatchEvent(u);else this.domElement.dispatchEvent(u)}}}}};e.prototype.onStart=function(e){this.blockGestures();this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Active;this.setInitialPointerEvent(e);var t="".concat(this.eventBaseName,"start");this.emit(e,t)};e.prototype.onEnd=function(e){this.unblockGestures();if(this.DEBUG==true)console.log("[".concat(this.eventBaseName,"] ended. Setting ").concat(this.eventBaseName,".state = ").concat($a2188ba8c266b376$export$a1d3109c03b1d511.Inactive));this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive;var t="".concat(this.eventBaseName,"end");this.emit(e,t)};e.prototype.onTouchStart=function(e){};e.prototype.onTouchMove=function(e){};e.prototype.onTouchEnd=function(e){};e.prototype.onTouchCancel=function(e){};e.prototype.block=function(e){if(this.options.blocks.indexOf(e)==-1)this.options.blocks.push(e)};e.prototype.unblock=function(e){if(this.options.blocks.indexOf(e)!=-1)this.options.blocks.splice(this.options.blocks.indexOf(e),1)};e.prototype.blockGestures=function(){for(var e=0;e<this.options.blocks.length;e++){var t=this.options.blocks[e];if(t.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive){if(this.DEBUG==false)console.log("[Gesture] blocking ".concat(t.eventBaseName));t.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Blocked}}};e.prototype.unblockGestures=function(){for(var e=0;e<this.options.blocks.length;e++){var t=this.options.blocks[e];t.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive}};e.prototype.getEventData=function(e,t){throw new Error("Gesture subclasses require a getEventData method()")};return e}();var $e8978caba4d46d00$export$718b85c80185d86e=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.initialPointerEvent=null;i.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer;var r=i.getEmptyGestureParameters();i.initialParameters=__assign({},r);i.activeStateParameters=JSON.parse(JSON.stringify(__assign({},r)));return i}t.prototype.getEventData=function(e,t){var n=e.parameters.live;var i=e.parameters.live;var r=n.vector;var a=n.duration;if(this.initialPointerEvent!=null){var o=new $07c7ab2351895186$export$baf26146a414f24a(this.initialPointerEvent.clientX,this.initialPointerEvent.clientY);var s=new $07c7ab2351895186$export$baf26146a414f24a(e.pointer.currentPointerEvent.clientX,e.pointer.currentPointerEvent.clientY);r=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(o,s);a=e.pointer.currentPointerEvent.timeStamp-this.initialPointerEvent.timeStamp}var c={deltaX:r.x,deltaY:r.y,distance:r.vectorLength,speedX:r.x/a,speedY:r.y/a,speed:r.vectorLength/a,direction:r.direction,scale:1,rotation:0,center:{x:n.vector.endPoint.x,y:n.vector.endPoint.y},srcEvent:e.pointer.currentPointerEvent};var l={deltaX:i.vector.x,deltaY:i.vector.y,distance:i.vector.vectorLength,speedX:i.vector.x/e.pointer.vectorTimespan,speedY:i.vector.y/e.pointer.vectorTimespan,speed:i.speed,direction:i.vector.direction,scale:1,rotation:0,center:{x:i.vector.endPoint.x,y:i.vector.endPoint.y},srcEvent:e.pointer.currentPointerEvent};var p={recognizer:this,global:c,live:l,pointerManager:t};return p};t.prototype.validateButton=function(e){if(this.options.supportedButtons.length>0){var t=e.activePointerInput;var n=e.lastRemovedPointer;var i=null;if(t!=null)i=t.getCurrentPointerEvent();else if(n!=null)i=n.currentPointerEvent;if(i!=null&&i.pointerType=="mouse"&&this.options.supportedButtons.indexOf(i.buttons)==-1){if(this.DEBUG==true)console.log("dismissing ".concat(this.eventBaseName,": supportedButtons: ").concat(this.options.supportedButtons.toString(),", poinerEvent.buttons: ").concat(i.buttons));return false}}return true};t.prototype.validate=function(t){var n=this.validateButton(t);if(n==true)n=e.prototype.validate.call(this,t);return n};return t}($f752273e736c5336$export$61ce360501d38a6f);var $b6ec4e8a6d9d51ec$export$4451a18ddc7083b7=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer;i.eventBaseName="tap";var r=200;var a=30;var o=30;if(n){if("maxDuration"in n)r=n["maxDuration"];if("maxDistance"in n){a=n["maxDistance"];o=n["maxDistance"]}}i.initialParameters.global.max["duration"]=r;i.initialParameters.live.max["distance"]=a;i.initialParameters.global.max["distance"]=o;return i}t.prototype.validateButton=function(e){if(this.options.supportedButtons.length>0){var t=e.lastRemovedPointer;if(t!=null){var n=t.currentPointerEvent;if(n.pointerType=="mouse"&&this.options.supportedButtons.indexOf(n.button)==-1){if(this.DEBUG==true)console.log("dismissing ".concat(this.eventBaseName,": supportedButtons: ").concat(this.options.supportedButtons.toString(),", poinerEvent.button: ").concat(n.button));return false}}}return true};t.prototype.validate=function(e){var t=this.validateGestureState();if(t==true)t=this.validatePointerManagerState(e);if(t==true)t=this.validateButton(e);if(t===true){if(e.lastInputSessionPointerCount!=1)return false;else{var n=e.getlastRemovedPointerInput();if(n instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8)t=this.validateGestureParameters(n);else t=false}}return t};t.prototype.onStart=function(e){this.setInitialPointerEvent(e);this.emit(e)};return t}($e8978caba4d46d00$export$718b85c80185d86e);var $5653a1f5fdc2db30$export$90610caf6d8d0242=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.eventBaseName="press";var r=600;var a=10;var o=20;if(n){if("minDuration"in n)r=n["minDuration"];if("maxDistance"in n){o=n["maxDistance"];a=n["maxDistance"]}}i.initialParameters.global.min["duration"]=r;i.initialParameters.global.max["distance"]=a;i.initialParameters.global.max["maximumDistance"]=o;i.hasBeenEmitted=false;return i}t.prototype.recognize=function(e){var n=this.validate(e);var i=this.getPointerInput(e);var r=this.initialParameters.global.min["duration"]||t.minDuration;if(i instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8){if(n==true&&this.hasBeenEmitted==false){this.setInitialPointerEvent(e);this.emit(e);this.hasBeenEmitted=true;this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Active;this.blockGestures()}else if(n==false&&this.hasBeenEmitted==true){this.onEnd(e);this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive;this.hasBeenEmitted=false}else{var a=i.parameters.global.duration;if(this.hasBeenEmitted==true&&a<=r)this.hasBeenEmitted=false}}if(i==null)this.hasBeenEmitted=false};t.minDuration=600;return t}($e8978caba4d46d00$export$718b85c80185d86e);var $7a0f7fd2f33d0212$export$f86166cd6057c2d1=function(e){__extends(t,e);function t(t,n){var i=this;var r;i=e.call(this,t,n)||this;i.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer;i.eventBaseName="pan";i.initialParameters.global.min["duration"]=0;i.initialParameters.live.min["distance"]=10;i.initialParameters.global.boolean["hasBeenMoved"]=true;i.swipeFinalSpeed=600;i.isSwipe=false;i.options.supportedDirections=(r=n===null||n===void 0?void 0:n.supportedDirections)!==null&&r!==void 0?r:$a2188ba8c266b376$export$86ae6e8ac17a67c6.All;i.initialSupportedDirections=i.options.supportedDirections;return i}t.prototype.validate=function(t){if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active)this.options.supportedDirections=$a2188ba8c266b376$export$86ae6e8ac17a67c6.All;var n=e.prototype.validate.call(this,t);return n};t.prototype.onStart=function(t){this.isSwipe=false;e.prototype.onStart.call(this,t)};t.prototype.onEnd=function(t){var n=t.getlastRemovedPointerInput();if(n instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8){if(this.swipeFinalSpeed<n.parameters.global.finalSpeed&&n.parameters.live.vector.direction!=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None){this.isSwipe=true;this.emit(t,"swipe")}else if(this.DEBUG==true){if(n.parameters.global.finalSpeed<this.swipeFinalSpeed)console.log("[Pan] dismissing swipe. Final speed: ".concat(n.parameters.global.finalSpeed," < ").concat(this.swipeFinalSpeed));else console.log("[Pan] dismissing swipe. Direction: ".concat(n.parameters.live.vector.direction))}}e.prototype.onEnd.call(this,t);this.options.supportedDirections=this.initialSupportedDirections};t.prototype.onTouchMove=function(e){if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active){if(this.DEBUG==true)console.log("[Pan] preventing touchmove default");e.preventDefault();e.stopPropagation()}};return t}($e8978caba4d46d00$export$718b85c80185d86e);var $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1=function(){function e(e,t){this.pointerIds=new Set([e.pointerId,t.pointerId]);this.startTimestamp=(new Date).getTime();this.pointerMap={};this.pointerMap[e.pointerId]=e;this.pointerMap[t.pointerId]=t;this.pointer_1=e;this.pointer_2=t;this.initialPointerEvent=e.initialPointerEvent;this.currentPointerEvent=e.initialPointerEvent;var n=this.pointer_1.parameters.global.vector;var i=this.pointer_2.parameters.global.vector;var r=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(n.startPoint,i.startPoint);var a=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(n,i);var o={duration:0,center:r,centerHasBeenMoved:false,centerMovementDistance:0,centerMovementVector:a,absolutePointerDistanceChange:0,relativePointerDistanceChange:0,rotationAngle:0,absoluteRotationAngle:0,vectorAngle:0,absoluteVectorAngle:0};var s=this.pointer_1.parameters.live.vector;var c=this.pointer_2.parameters.live.vector;var l=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(s.startPoint,c.startPoint);var p=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(s,c);var d={center:l,centerIsMoving:false,centerMovementDistance:0,centerMovementVector:p,absolutePointerDistanceChange:0,relativePointerDistanceChange:0,rotationAngle:0,absoluteRotationAngle:0,vectorAngle:0,absoluteVectorAngle:0};var u={global:o,live:d};this.parameters=u}e.prototype.removePointer=function(e){if(e==this.pointer_1.pointerId)return this.pointer_2;else if(e==this.pointer_2.pointerId)return this.pointer_1;else throw new Error("[DualPointerInput] cannot remove Pointer #".concat(e,". The pointer is not part of this DualPointerInput"))};e.prototype.getTarget=function(){return this.initialPointerEvent.target};e.prototype.update=function(e){if(e instanceof PointerEvent)this.currentPointerEvent=e;var t=(new Date).getTime();this.parameters.global["duration"]=t-this.startTimestamp;var n=this.pointer_1.parameters.global.vector;var i=this.pointer_2.parameters.global.vector;var r=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(n.startPoint,i.startPoint);var a=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(n,i);var o=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateAbsoluteDistanceChange(n,i);var s=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRelativeDistanceChange(n,i);var c=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRotationAngle(n,i);var l=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateVectorAngle(n,i);this.parameters.global["center"]=r;this.parameters.global["centerMovementVector"]=a;this.parameters.global["centerMovementDistance"]=a.vectorLength;this.parameters.global["absolutePointerDistanceChange"]=o;this.parameters.global["relativePointerDistanceChange"]=s;this.parameters.global["rotationAngle"]=c;this.parameters.global["absoluteRotationAngle"]=Math.abs(c);this.parameters.global["vectorAngle"]=l;this.parameters.global["absoluteVectorAngle"]=Math.abs(l);var p=this.pointer_1.parameters.live.vector;var d=this.pointer_2.parameters.live.vector;var u=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(p.startPoint,d.startPoint);var v=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(p,d);var f=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateAbsoluteDistanceChange(p,d);var h=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRelativeDistanceChange(p,d);var b=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRotationAngle(p,d);var $=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateVectorAngle(p,d);if(v.vectorLength>0){this.parameters.live.centerIsMoving=true;this.parameters.global.centerHasBeenMoved=true}else this.parameters.live.centerIsMoving=false;this.parameters.live["center"]=u;this.parameters.live["centerMovementDistance"]=v.vectorLength;this.parameters.live["centerMovementVector"]=v;this.parameters.live["absolutePointerDistanceChange"]=f;this.parameters.live["relativePointerDistanceChange"]=h;this.parameters.live["rotationAngle"]=b;this.parameters.live["absoluteRotationAngle"]=Math.abs(b);this.parameters.live["vectorAngle"]=$;this.parameters.live["absoluteVectorAngle"]=Math.abs($)};e.prototype.onPointerMove=function(e){this.update(e)};e.prototype.onPointerUp=function(e){this.update(e)};e.prototype.onPointerLeave=function(e){this.update(e)};e.prototype.onPointerCancel=function(e){this.update(e)};e.prototype.onIdle=function(){this.update()};e.prototype.getCurrentDirection=function(){return this.parameters.live.centerMovementVector.direction};e.prototype.getCurrentPointerEvent=function(){return this.currentPointerEvent};return e}();var $a1a4c2869495e604$export$f9d89efe4b7795e7=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.initialPointerEvent_1=null;i.initialPointerEvent_2=null;i.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.DualPointer;i.validPointerInputConstructor=$ba0aae203ff6b3f9$export$bdba51b3ce92d5f1;var r=i.getEmptyGestureParameters();i.initialParameters=__assign({},r);i.activeStateParameters=JSON.parse(JSON.stringify(__assign({},r)));return i}t.prototype.getEventData=function(e,t){var n=e.parameters.global;var i=e.parameters.live;var r={deltaX:n.centerMovementVector.x,deltaY:n.centerMovementVector.y,distance:n.centerMovementDistance,speedX:n.centerMovementVector.x/n.duration,speedY:n.centerMovementVector.y/n.duration,speed:n.centerMovementVector.vectorLength/n.duration,direction:n.centerMovementVector.direction,scale:n.relativePointerDistanceChange,rotation:n.rotationAngle,center:n.center,srcEvent:e.currentPointerEvent};var a={deltaX:i.centerMovementVector.x,deltaY:i.centerMovementVector.y,distance:i.centerMovementDistance,speedX:i.centerMovementVector.x/n.duration,speedY:i.centerMovementVector.y/n.duration,speed:i.centerMovementVector.vectorLength/n.duration,direction:i.centerMovementVector.direction,scale:i.relativePointerDistanceChange,rotation:i.rotationAngle,center:{x:i.centerMovementVector.startPoint.x,y:i.centerMovementVector.startPoint.y},srcEvent:e.currentPointerEvent};var o={recognizer:this,global:r,live:a,pointerManager:t};return o};return t}($f752273e736c5336$export$61ce360501d38a6f);var $ed7931f1d96d5294$export$826ae541ddf1527b=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.eventBaseName="pinch";i.initialParameters.live.min["centerMovementDistance"]=0;i.initialParameters.live.max["centerMovementDistance"]=50;i.initialParameters.live.min["absolutePointerDistanceChange"]=5;i.initialParameters.live.max["absoluteRotationAngle"]=20;i.initialParameters.live.min["absoluteVectorAngle"]=10;return i}return t}($a1a4c2869495e604$export$f9d89efe4b7795e7);var $9fe2bb90b337f66c$export$152db69a76b6b79e=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.eventBaseName="rotate";i.initialParameters.live.min["centerMovementDistance"]=0;i.initialParameters.live.max["centerMovementDistance"]=50;i.initialParameters.live.max["absolutePointerDistanceChange"]=50;i.initialParameters.live.min["absoluteRotationAngle"]=5;i.activeStateParameters.live.min["absoluteRotationAngle"]=0;return i}return t}($a1a4c2869495e604$export$f9d89efe4b7795e7);var $59226122237c359c$export$8847187e02a498e8=function(e){__extends(t,e);function t(t,n){var i=e.call(this,t,n)||this;i.eventBaseName="twofingerpan";i.initialParameters.live.min["centerMovementDistance"]=10;i.initialParameters.live.max["absolutePointerDistanceChange"]=50;i.initialParameters.live.max["absoluteVectorAngle"]=150;i.activeStateParameters.live.min["centerMovementDistance"]=0;return i}return t}($a1a4c2869495e604$export$f9d89efe4b7795e7);var $4f5a7b355079efa2$export$af6d1be017a420a=function(){function e(e){e=e||{};this.options=__assign({DEBUG:false},e);this.DEBUG=this.options.DEBUG;this.state=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer;this.activePointerInput=null;this.lastRemovedPointer=null;this.lastInputSessionPointerCount=0;this.pointerAllocation={};this.unusedPointers={};this.onSurfacePointers={}}e.prototype.addPointer=function(e){if(this.DEBUG==true)console.log("[PointerManager] adding Pointer #".concat(e.pointerId.toString()));var t={DEBUG:this.DEBUG};var n=new $d25d2392b002d8dc$export$b56007f12edf0c17(e,t);this.onSurfacePointers[n.pointerId]=n;if(this.activePointerInput==null)this.setActiveSinglePointerInput(n);else if(this.activePointerInput instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8)this.setActiveDualPointerInput(this.activePointerInput.pointer,n);else if(this.activePointerInput instanceof $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1)this.unusedPointers[n.pointerId]=n;this.lastInputSessionPointerCount=this.currentPointerCount()};e.prototype.removePointer=function(e){if(this.DEBUG==true){console.log("[PointerManager] starting to remove Pointer #".concat(e));console.log("[PointerManager] state: ".concat(this.state))}var t=this.onSurfacePointers[e];this.lastRemovedPointer=t;delete this.onSurfacePointers[e];if(e in this.unusedPointers)delete this.unusedPointers[e];if(this.activePointerInput instanceof $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1){if(this.activePointerInput.pointerIds.has(e)){if(this.DEBUG==true)console.log("[PointerManager] removing Pointer #".concat(e," from DualPointerInput"));var n=this.activePointerInput.removePointer(e);this.activePointerInput=null;var i=this.getUnusedPointer();if(i instanceof $d25d2392b002d8dc$export$b56007f12edf0c17)this.setActiveDualPointerInput(n,i);else this.setActiveSinglePointerInput(n)}}else if(this.activePointerInput instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8){if(this.DEBUG==true)console.log("[PointerManager] removing Pointer #".concat(e," from SinglePointerInput"));this.activePointerInput=null;this.state=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer;if(Object.keys(this.unusedPointers).length>0){this.unusedPointers={};throw new Error("[PointerManager] found unused Pointers although there should not be any")}if(Object.keys(this.onSurfacePointers).length>0){this.onSurfacePointers={};throw new Error("[PointerManager] found onSurfacePointers although there should not be any")}}if(this.DEBUG==true)console.log("[PointerManager] state: ".concat(this.state))};e.prototype.setActiveSinglePointerInput=function(e){e.reset();var t=new $5fe7e4b452e08fad$export$bbcc47898202c6b8(e);this.activePointerInput=t;this.pointerAllocation[e.pointerId]=t;delete this.unusedPointers[e.pointerId];this.state=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer;if(this.DEBUG==true)console.log("[PointerManager] state: ".concat(this.state))};e.prototype.setActiveDualPointerInput=function(e,t){e.reset();t.reset();var n=new $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1(e,t);this.activePointerInput=n;this.pointerAllocation[e.pointerId]=n;this.pointerAllocation[t.pointerId]=n;delete this.unusedPointers[e.pointerId];delete this.unusedPointers[t.pointerId];this.state=$a2188ba8c266b376$export$b8339a9622c147c0.DualPointer;if(this.DEBUG==true)console.log("[PointerManager] state: ".concat(this.state))};e.prototype.hasPointersOnSurface=function(){if(Object.keys(this.onSurfacePointers).length>0)return true;return false};e.prototype.currentPointerCount=function(){return Object.keys(this.onSurfacePointers).length};e.prototype.getUnusedPointer=function(){if(Object.keys(this.unusedPointers).length>0){var e=Object.values(this.unusedPointers)[0];return e}return null};e.prototype.getPointerFromId=function(e){if(e in this.onSurfacePointers)return this.onSurfacePointers[e];return null};e.prototype.getlastRemovedPointerInput=function(){if(this.lastRemovedPointer instanceof $d25d2392b002d8dc$export$b56007f12edf0c17)return this.pointerAllocation[this.lastRemovedPointer.pointerId];return null};e.prototype.onIdle=function(){var e;for(var t in this.onSurfacePointers){var n=this.onSurfacePointers[t];n.onIdle()}(e=this.activePointerInput)===null||e===void 0?void 0:e.onIdle()};e.prototype.onPointerMove=function(e){var t;var n=this.getPointerFromId(e.pointerId);if(n instanceof $d25d2392b002d8dc$export$b56007f12edf0c17)n.onPointerMove(e);(t=this.activePointerInput)===null||t===void 0?void 0:t.onPointerMove(e)};e.prototype.onPointerUp=function(e){var t;if(this.DEBUG==true)console.log("[PointerManager] pointerup detected");var n=this.getPointerFromId(e.pointerId);if(n instanceof $d25d2392b002d8dc$export$b56007f12edf0c17)n.onPointerUp(e);(t=this.activePointerInput)===null||t===void 0?void 0:t.onPointerUp(e);this.removePointer(e.pointerId)};e.prototype.onPointerCancel=function(e){var t;if(this.DEBUG==true)console.log("[PointerManager] pointercancel detected");var n=this.getPointerFromId(e.pointerId);if(n instanceof $d25d2392b002d8dc$export$b56007f12edf0c17)n.onPointerCancel(e);(t=this.activePointerInput)===null||t===void 0?void 0:t.onPointerCancel(e);this.removePointer(e.pointerId)};return e}();var $03c52e54621b9b86$var$ALL_GESTURE_CLASSES=[$b6ec4e8a6d9d51ec$export$4451a18ddc7083b7,$5653a1f5fdc2db30$export$90610caf6d8d0242,$7a0f7fd2f33d0212$export$f86166cd6057c2d1,$ed7931f1d96d5294$export$826ae541ddf1527b,$9fe2bb90b337f66c$export$152db69a76b6b79e,$59226122237c359c$export$8847187e02a498e8];var $03c52e54621b9b86$export$9371bd96776f4e82=function(){function e(e,t){var n=this;var i;this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture;this.activeGestures=[];this.hadActiveGestureDuringCurrentContact=false;this.gestureEventHandlers={};this.lastRecognitionTimestamp=null;this.idleRecognitionIntervalId=null;this.pointerEventHandlers={};this.touchEventHandlers={};t=t||{};this.options=__assign({DEBUG:false,DEBUG_GESTURES:false,DEBUG_POINTERMANAGER:false,bubbles:true,handleTouchEvents:true,consecutiveGestures:true,simultaneousGestures:true,supportedGestures:[]},t);this.DEBUG=this.options.DEBUG;var r=(i=t.supportedGestures)!==null&&i!==void 0?i:$03c52e54621b9b86$var$ALL_GESTURE_CLASSES;var a=r.map((function(t){if(typeof t==="function"){var i={bubbles:n.options.bubbles,DEBUG:n.options.DEBUG_GESTURES};return new t(e,i)}if(typeof t==="object")return t;throw new Error("unsupported gesture type: ".concat(typeof t))}));this.supportedGestures=a;this.domElement=e;var o={DEBUG:this.options.DEBUG_POINTERMANAGER};this.pointerManager=new $4f5a7b355079efa2$export$af6d1be017a420a(o);this.addPointerEventListeners();this.addTouchEventListeners()}e.prototype.addPointerEventListeners=function(){var e=this.domElement;var t=this.onPointerDown.bind(this);var n=this.onPointerMove.bind(this);var i=this.onPointerUp.bind(this);var r=this.onPointerCancel.bind(this);e.addEventListener("pointerdown",t,{passive:true});e.addEventListener("pointermove",n,{passive:true});e.addEventListener("pointerup",i,{passive:true});e.addEventListener("pointercancel",r,{passive:true});this.pointerEventHandlers={pointerdown:t,pointermove:n,pointerup:i,pointercancel:r}};e.prototype.onPointerDown=function(e){var t=this;var n,i;if(this.DEBUG==true)console.log("[PointerListener] pointerdown event detected");(e.target||this.domElement).setPointerCapture(e.pointerId);this.pointerManager.addPointer(e);(i=(n=this.options).pointerdown)===null||i===void 0?void 0:i.call(n,e,this);if(this.idleRecognitionIntervalId!=null)this.clearIdleRecognitionInterval();this.idleRecognitionIntervalId=setInterval((function(){t.onIdle()}),100)};e.prototype.onPointerMove=function(e){var t,n;if(this.pointerManager.hasPointersOnSurface()==true){this.pointerManager.onPointerMove(e);this.recognizeGestures();(n=(t=this.options).pointermove)===null||n===void 0?void 0:n.call(t,e,this)}};e.prototype.onPointerUp=function(e){var t,n;if(this.DEBUG==true)console.log("[PointerListener] pointerup event detected");this.domElement.releasePointerCapture(e.pointerId);if(this.pointerManager.hasPointersOnSurface()==true){this.pointerManager.onPointerUp(e);this.recognizeGestures();(n=(t=this.options).pointerup)===null||n===void 0?void 0:n.call(t,e,this)}this.clearIdleRecognitionInterval()};e.prototype.onPointerCancel=function(e){var t,n;this.domElement.releasePointerCapture(e.pointerId);if(this.DEBUG==true)console.log("[PointerListener] pointercancel detected");this.pointerManager.onPointerCancel(e);this.recognizeGestures();this.clearIdleRecognitionInterval();(n=(t=this.options).pointercancel)===null||n===void 0?void 0:n.call(t,e,this)};e.prototype.removePointerEventListeners=function(){for(var e in this.pointerEventHandlers){var t=this.pointerEventHandlers[e];this.domElement.removeEventListener(e,t)}};e.prototype.addTouchEventListeners=function(){if(this.options.handleTouchEvents==true){var e=this.onTouchMove.bind(this);this.domElement.addEventListener("touchmove",e);this.touchEventHandlers["touchmove"]=e}};e.prototype.removeTouchEventListeners=function(){for(var e in this.touchEventHandlers){var t=this.touchEventHandlers[e];this.domElement.removeEventListener(e,t)}};e.prototype.onTouchMove=function(e){for(var t=0;t<this.supportedGestures.length;t++){var n=this.supportedGestures[t];n.onTouchMove(e)}};e.prototype.onIdle=function(){if(this.pointerManager.hasPointersOnSurface()==false)this.clearIdleRecognitionInterval();else{var e=(new Date).getTime();var t=null;if(this.lastRecognitionTimestamp!=null)t=e-this.lastRecognitionTimestamp;if(t==null||t>100){this.pointerManager.onIdle();if(this.DEBUG==true)console.log("[PointerListener] onIdle - running idle recognition");this.recognizeGestures()}}};e.prototype.clearIdleRecognitionInterval=function(){if(this.idleRecognitionIntervalId!=null){clearInterval(this.idleRecognitionIntervalId);this.idleRecognitionIntervalId=null}};e.prototype.recognizeGestures=function(){this.lastRecognitionTimestamp=(new Date).getTime();var e=this.supportedGestures;if(this.options.simultaneousGestures==false&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture)e=[this.activeGestures[0]];else if(this.options.consecutiveGestures==false&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture)e=[this.activeGestures[0]];else if(this.options.consecutiveGestures==false&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture){if(this.hadActiveGestureDuringCurrentContact==true&&this.pointerManager.hasPointersOnSurface()==true)e=[]}for(var t=0;t<e.length;t++){var n=e[t];n.recognize(this.pointerManager);this.updateActiveGestures(n);if(this.options.simultaneousGestures==false&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture)break}if(this.DEBUG==true)console.log("[PointerListener] hadActiveGestureDuringCurrentContact: ".concat(this.hadActiveGestureDuringCurrentContact));if(this.pointerManager.hasPointersOnSurface()==false)this.hadActiveGestureDuringCurrentContact=false};e.prototype.updateActiveGestures=function(e){if(e.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active){this.hadActiveGestureDuringCurrentContact=true;if(this.activeGestures.indexOf(e)<0)this.activeGestures.push(e)}else{var t=this.activeGestures.indexOf(e);if(t>=0)this.activeGestures.splice(t,1)}if(this.activeGestures.length>0)this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture;else this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture};e.prototype.parseEventsString=function(e){return e.trim().split(/\s+/g)};e.prototype.on=function(e,t){var n=this.parseEventsString(e);for(var i=0;i<n.length;i++){var r=n[i];if(!(r in this.gestureEventHandlers))this.gestureEventHandlers[r]=[];if(this.gestureEventHandlers[r].indexOf(t)==-1)this.gestureEventHandlers[r].push(t);this.domElement.addEventListener(r,t,{capture:false,passive:true})}};e.prototype.off=function(e,t){var n=this.parseEventsString(e);if(this.DEBUG==true){console.log("[PointerListener] turning off events: ".concat(e));console.log(this.gestureEventHandlers)}for(var i=0;i<n.length;i++){var r=n[i];if(r in this.gestureEventHandlers){var a=this.gestureEventHandlers[r];var o=a.indexOf(t);if(this.DEBUG==true)console.log("[PointerListener] turning off ".concat(r,". Index on handlerList: ").concat(o));if(o>=0){a.splice(o,1);this.gestureEventHandlers[r]=a}this.domElement.removeEventListener(r,t,false)}}};e.prototype.destroy=function(){for(var e in this.gestureEventHandlers){var t=this.gestureEventHandlers[e];for(var n=0;n<t.length;n++){var i=t[n];this.domElement.removeEventListener(e,i)}delete this.gestureEventHandlers[e]}this.removePointerEventListeners();this.removeTouchEventListeners()};return e}();export{$a2188ba8c266b376$export$cacd6541cfeeb6c1 as Direction,$a2188ba8c266b376$export$86ae6e8ac17a67c6 as Directions,$1f7944f1763e45ce$export$2db6c17465f94a2 as Geometry,$f752273e736c5336$export$6e9c3b1e1fa2b597 as GestureEvent,$a2188ba8c266b376$export$a1d3109c03b1d511 as GestureState,$7a0f7fd2f33d0212$export$f86166cd6057c2d1 as Pan,$ed7931f1d96d5294$export$826ae541ddf1527b as Pinch,$03c52e54621b9b86$export$9371bd96776f4e82 as PointerListener,$a2188ba8c266b376$export$2fb579dd5dfdbea as PointerListenerState,$a2188ba8c266b376$export$b8339a9622c147c0 as PointerManagerState,$d25d2392b002d8dc$export$573b9b62d5ae28f7 as PointerState,$5653a1f5fdc2db30$export$90610caf6d8d0242 as Press,$9fe2bb90b337f66c$export$152db69a76b6b79e as Rotate,$b6ec4e8a6d9d51ec$export$4451a18ddc7083b7 as Tap,$59226122237c359c$export$8847187e02a498e8 as TwoFingerPan};