import{__awaiter,__generator,__spreadArray}from"tslib";import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-e015dbc8.js";import{m as debounceEvent}from"./helpers-08b28736.js";import{i as inheritAttributes}from"./attributes-56afda45.js";import{p as parse,f as formatDateString,i as isValidIsoString,b as format,c as isSpaceKey,d as isEnterKey,e as dateSeparator,n as now}from"./index.esm-df73647b.js";import{l as lodash_isnil}from"./index-82aff103.js";import{i as isCtrlOrCommandKey,N as NUMBER_KEYS,A as ACTION_KEYS}from"./keys.constant-a195c4b1.js";import{i as i18nBalDatepicker}from"./bal-datepicker.i18n-590bae0f.js";import{g as useBalConfig}from"./index-8b8ed6bd.js";import{s as stopEventBubbling,i as inputHandleFocus,a as inputHandleHostClick,b as inputListenOnClick,c as inputSetFocus,d as inputSetBlur,g as getInputTarget}from"./form-input-fd2d14ca.js";import{p as preventDefault}from"./utils-9cb64c37.js";import{B as BEM}from"./bem-1b28532d.js";import{L as Logger}from"./log-01623e2c.js";import{b as balBreakpoints}from"./breakpoints.subject-52f20b1f.js";import{L as ListenToBreakpoints}from"./breakpoints.decorator-547e9ed6.js";import{d as defaultBalAriaForm}from"./form-479fd066.js";import{d as defaultConfig,a as defaultLocale}from"./initialize-92ae5fef.js";import{L as ListenToConfig}from"./config.decorator-54721e29.js";import"./browser-9199b5e2.js";import"./icons.constant-35253412.js";import"./_commonjsHelpers-ba3f0406.js";import"./device-c28cde6d.js";import"./listener-ea90dc02.js";import"./tokens.esm-8af6b758.js";function toInteger(e){if(e===null||e===true||e===false){return NaN}var t=Number(e);if(isNaN(t)){return t}return t<0?Math.ceil(t):Math.floor(t)}function requiredArgs(e,t){if(t.length<e){throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}}function _typeof(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function e(t){return typeof t}}else{_typeof=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof(e)}function toDate(e){requiredArgs(1,arguments);var t=Object.prototype.toString.call(e);if(e instanceof Date||_typeof(e)==="object"&&t==="[object Date]"){return new Date(e.getTime())}else if(typeof e==="number"||t==="[object Number]"){return new Date(e)}else{if((typeof e==="string"||t==="[object String]")&&typeof console!=="undefined"){console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");console.warn((new Error).stack)}return new Date(NaN)}}function addDays(e,t){requiredArgs(2,arguments);var a=toDate(e);var i=toInteger(t);if(isNaN(i)){return new Date(NaN)}if(!i){return a}a.setDate(a.getDate()+i);return a}function addMonths(e,t){requiredArgs(2,arguments);var a=toDate(e);var i=toInteger(t);if(isNaN(i)){return new Date(NaN)}if(!i){return a}var r=a.getDate();var n=new Date(a.getTime());n.setMonth(a.getMonth()+i+1,0);var s=n.getDate();if(r>=s){return n}else{a.setFullYear(n.getFullYear(),n.getMonth(),r);return a}}var defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(e,t){var a,i,r,n,s,o,l,d;requiredArgs(1,arguments);var u=getDefaultOptions();var c=toInteger((a=(i=(r=(n=t===null||t===void 0?void 0:t.weekStartsOn)!==null&&n!==void 0?n:t===null||t===void 0?void 0:(s=t.locale)===null||s===void 0?void 0:(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:u.weekStartsOn)!==null&&i!==void 0?i:(l=u.locale)===null||l===void 0?void 0:(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&a!==void 0?a:0);if(!(c>=0&&c<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var p=toDate(e);var h=p.getDay();var f=(h<c?7:0)+h-c;p.setDate(p.getDate()-f);p.setHours(0,0,0,0);return p}function startOfDay(e){requiredArgs(1,arguments);var t=toDate(e);t.setHours(0,0,0,0);return t}function addYears(e,t){requiredArgs(2,arguments);var a=toInteger(t);return addMonths(e,a*12)}function isSameDay(e,t){requiredArgs(2,arguments);var a=startOfDay(e);var i=startOfDay(t);return a.getTime()===i.getTime()}function getDate(e){requiredArgs(1,arguments);var t=toDate(e);var a=t.getDate();return a}function getMonth(e){requiredArgs(1,arguments);var t=toDate(e);var a=t.getMonth();return a}function lastDayOfMonth(e){requiredArgs(1,arguments);var t=toDate(e);var a=t.getMonth();t.setFullYear(t.getFullYear(),a+1,0);t.setHours(0,0,0,0);return t}function getYear(e){requiredArgs(1,arguments);return toDate(e).getFullYear()}function isAfter(e,t){requiredArgs(2,arguments);var a=toDate(e);var i=toDate(t);return a.getTime()>i.getTime()}function isBefore(e,t){requiredArgs(2,arguments);var a=toDate(e);var i=toDate(t);return a.getTime()<i.getTime()}function isSameWeek(e,t,a){requiredArgs(2,arguments);var i=startOfWeek(e,a);var r=startOfWeek(t,a);return i.getTime()===r.getTime()}function isSameMonth(e,t){requiredArgs(2,arguments);var a=toDate(e);var i=toDate(t);return a.getFullYear()===i.getFullYear()&&a.getMonth()===i.getMonth()}function isWithinInterval(e,t){requiredArgs(2,arguments);var a=toDate(e).getTime();var i=toDate(t.start).getTime();var r=toDate(t.end).getTime();if(!(i<=r)){throw new RangeError("Invalid interval")}return a>=i&&a<=r}function subDays(e,t){requiredArgs(2,arguments);var a=toInteger(t);return addDays(e,-a)}function subYears(e,t){requiredArgs(2,arguments);var a=toInteger(t);return addYears(e,-a)}var balDatepickerCss=':root{--bal-datepicker-popover-background:var(--bal-color-grey-2);--bal-datepicker-cell-background:var(--bal-color-white);--bal-datepicker-cell-selected-background:var(--bal-color-primary);--bal-datepicker-cell-selected-today-background:var(--bal-color-primary-inverted);--bal-datepicker-cell-today-background:var(--bal-color-primary);--bal-datepicker-cell-today-radius:var(--bal-radius-rounded)}.bal-datepicker{display:block;font-family:var(--bal-font-family-text);width:100%}.bal-datepicker__native{position:absolute !important;left:0;top:0;margin:0;padding:0;opacity:0;outline:0;border:none;width:1px;height:1px;clip:rect(1px, 1px, 1px, 1px);overflow:hidden}.bal-datepicker__popup{padding:1rem;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:var(--bal-datepicker-popover-background)}@media screen and (min-width: 769px),print{.bal-datepicker__popup{max-width:392px}}.bal-datepicker__popup__body{max-width:360px;margin:0 auto 0 auto;margin-top:.75rem}.bal-datepicker-pagination{max-width:360px;margin:0 auto 0 auto}.bal-datepicker-pagination__inner{display:-ms-flexbox;display:flex;gap:.5rem}.bal-datepicker-pagination__month-and-year{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;gap:.5rem}.bal-datepicker-pagination__month-and-year__select{-ms-flex:1;flex:1}.bal-datepicker-pagination__month-and-year__select .select,.bal-datepicker-pagination__month-and-year__select .select select{padding-top:0 !important;padding-bottom:0 !important;text-align:center !important;min-height:2rem !important;height:2rem !important}@media screen and (min-width: 769px),print{.bal-datepicker-pagination__month-and-year__select .select,.bal-datepicker-pagination__month-and-year__select .select select{min-height:3rem !important;height:3rem !important}}.bal-datepicker-grid{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.bal-datepicker-grid__body{display:table-row-group}.bal-datepicker-grid__row{display:table-row}.bal-datepicker-grid__row .bal-datepicker-grid__cell{margin-bottom:.25rem;margin-right:.25rem}.bal-datepicker-grid__row:last-child .bal-datepicker-grid__cell{margin-bottom:0}.bal-datepicker-grid__header{display:-ms-flexbox;display:flex;max-width:360px;margin:0 auto 0 auto;gap:.25rem}.bal-datepicker-grid__header .bal-datepicker-grid__cell{background:rgba(0,0,0,0)}.bal-datepicker-grid__header .bal-datepicker-grid__cell span{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;height:100%;width:100%}.bal-datepicker-grid__cell{position:relative;text-align:center;vertical-align:middle;display:table-cell;width:13%;padding:0 !important;height:3rem;min-height:3rem;min-width:2.25rem;-webkit-appearance:auto !important;-moz-appearance:auto !important;appearance:auto !important;background:var(--bal-datepicker-cell-background)}.bal-datepicker-grid__cell--selected{background:var(--bal-datepicker-cell-selected-background) !important}.bal-datepicker-grid__cell--today:not(.bal-datepicker-grid__cell--outdated)>span{font-weight:var(--bal-weight-bold)}.bal-datepicker-grid__cell--today:not(.bal-datepicker-grid__cell--outdated)::after{content:"";position:absolute;display:block;width:4px;height:4px;background:var(--bal-datepicker-cell-today-background);border-radius:var(--bal-datepicker-cell-today-radius);margin-left:-2px;left:50%;bottom:6px}.bal-datepicker-grid__cell--today.bal-datepicker-grid__cell--selected:not(.bal-datepicker-grid__cell--outdated)::after{background:var(--bal-datepicker-cell-selected-today-background)}.bal-datepicker-grid__cell:last-child{margin-right:0}.bal-datepicker-grid__cell>span{font-family:var(--bal-font-family-text);font-weight:var(--bal-weight-regular)}@media screen and (min-width: 769px),print{.bal-datepicker-grid__cell{min-width:3rem !important}}.bal-datepicker-grid__cell--disabled{border-color:rgba(0,0,0,0) !important;background:rgba(0,0,0,0) !important}.bal-datepicker-grid__cell--header>span{border:none;background:rgba(0,0,0,0);color:var(--bal-color-text-primary);font-weight:var(--bal-weight-bold);cursor:default}';var __decorate=undefined&&undefined.__decorate||function(e,t,a,i){var r=arguments.length,n=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(e,t,a,i);else for(var o=e.length-1;o>=0;o--)if(s=e[o])n=(r<3?s(n):r>3?s(t,a,n):s(t,a))||n;return r>3&&n&&Object.defineProperty(t,a,n),n};var Datepicker=function(){function e(e){var t=this;registerInstance(this,e);this.balChange=createEvent(this,"balChange",7);this.balInput=createEvent(this,"balInput",7);this.balBlur=createEvent(this,"balBlur",7);this.balFocus=createEvent(this,"balFocus",7);this.balInputClick=createEvent(this,"balInputClick",7);this.balIconClick=createEvent(this,"balIconClick",7);this.inputId="bal-dp-".concat(datepickerIds++);this.inheritedAttributes={};this.inputValue=this.value;this.onIconClick=function(e){if(!t.disabled&&!t.readonly){t.popoverElement.toggle()}stopEventBubbling(e);t.balIconClick.emit(e)};this.onInputClick=function(e){if(!t.triggerIcon&&!t.disabled&&!t.readonly){t.popoverElement.toggle()}stopEventBubbling(e);if(!t.triggerIcon){t.balInputClick.emit(e)}};this.onPopoverChange=function(e){stopEventBubbling(e);if(t.isPopoverOpen!==e.detail){t.isPopoverOpen=e.detail;if(!t.isPopoverOpen){t.balBlur.emit()}}};this.onInput=function(e){var a=getInputTarget(e);if(a){t.inputValue=a.value;if(a.value){t.nativeInput.value=t.formatDate(t.inputValue)}if(t.inputValue&&t.inputValue.length>=6){var i=parse(t.inputValue,t.getLocale());var r=formatDateString(i);if(isValidIsoString(r)){t.selectedDate=r;t.updatePointerDates()}}}t.balInput.emit(t.inputValue)};this.onInputChange=function(e){var a=e.target.value;var i=parse(a,t.getLocale());var r=formatDateString(i);var n=format(t.getLocale(),i);t.nativeInput.value=n;t.updateValue(r);t.updatePointerDates()};this.onClickDateCell=function(e){if(!e.isDisabled){t.select(e.dateString)}};this.onInputKeyUp=function(e){if(isSpaceKey(e)&&!t.triggerIcon){if(t.isPopoverOpen){t.close()}else{t.open()}}if(isEnterKey(e)&&!t.triggerIcon){var a=parse(t.nativeInput.value,t.getLocale());var i=formatDateString(a);if(t.isPopoverOpen){if(t.value===i){t.close()}}}};this.onInputKeyDown=function(e){var a=dateSeparator(t.getLocale());var i=__spreadArray(__spreadArray(__spreadArray([],NUMBER_KEYS,true),[a],false),ACTION_KEYS,true);if(!isCtrlOrCommandKey(e)&&i.indexOf(e.key)<0){e.preventDefault();e.stopPropagation()}if(e.key==="Tab"){t.close()}};this.onMonthSelect=function(e){var a=e.target.value;t.pointerDate=Object.assign(Object.assign({},t.pointerDate),{day:1,month:parseInt(a,10)})};this.onYearSelect=function(e){var a=e.target.value;var i=parseInt(a,10);var r=undefined;if(t.defaultDate){var n=parse(t.defaultDate);if(t.max){var s=parse(t.max);if(n.getMonth()>s.getMonth()){r=s.getMonth()}}if(t.min){var o=parse(t.min);if(n.getMonth()<o.getMonth()){r=o.getMonth()}}}t.pointerDate={day:1,year:i,month:r!==undefined?r:t.pointerDate.month}};this.onInputFocus=function(e){return inputHandleFocus(t,e)};this.onInputBlur=function(e){preventDefault(e);t.focused=false};this.handleClick=function(e){return inputHandleHostClick(t,e)};this.language=defaultConfig.language;this.region=defaultConfig.region;this.isMobile=balBreakpoints.isMobile;this.focused=false;this.isPopoverOpen=false;this.selectedDate="";this.pointerDate={year:getYear(now()),month:getMonth(now()),day:getDate(now())};this.ariaForm=defaultBalAriaForm;this.name=this.inputId;this.invalid=false;this.required=false;this.disabled=false;this.readonly=false;this.loading=false;this.placeholder=undefined;this.min=undefined;this.max=undefined;this.closeOnSelect=true;this.triggerIcon=false;this.minYearProp=undefined;this.maxYearProp=undefined;this.debounce=0;this.defaultDate=undefined;this.value=undefined;this.allowedDates=undefined}e.prototype.createLogger=function(e){this.log=e};e.prototype.debounceChanged=function(){this.balChange=debounceEvent(this.balChange,this.debounce)};e.prototype.valueChanged=function(){this.selectedDate=this.value;this.updatePointerDates()};e.prototype.listenOnClick=function(e){inputListenOnClick(this,e)};e.prototype.resetHandler=function(e){var t=this;var a=e.target;if(a===null||a===void 0?void 0:a.contains(this.el)){if(this.resetHandlerTimer){clearTimeout(this.resetHandlerTimer)}this.resetHandlerTimer=setTimeout((function(){if(t.initialValue){t.nativeInput.value=format(t.getLocale(),parse(t.initialValue))}else{t.nativeInput.value=""}t.selectedDate=t.initialValue;t.updateValue(t.initialValue,false);t.updatePointerDates()}),0)}};e.prototype.breakpointListener=function(e){this.isMobile=e.mobile};e.prototype.connectedCallback=function(){this.debounceChanged();this.initialValue=this.value};e.prototype.componentDidLoad=function(){this.inputValue=this.value};e.prototype.componentWillLoad=function(){this.inheritedAttributes=inheritAttributes(this.el,["aria-label","tabindex","title"]);this.selectedDate=this.value;this.updatePointerDates();this.updateValue(this.value,false)};e.prototype.configChanged=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.language=e.language;this.region=e.region;return[2]}))}))};e.prototype.open=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(!this.disabled&&this.popoverElement){this.popoverElement.present()}return[2]}))}))};e.prototype.close=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(!this.disabled&&this.popoverElement){this.popoverElement.dismiss()}return[2]}))}))};e.prototype.select=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(a){switch(a.label){case 0:this.nativeInput.value=format(this.getLocale(),parse(e));this.updateValue(e);this.updatePointerDates();if(!this.closeOnSelect)return[3,2];return[4,(t=this.popoverElement)===null||t===void 0?void 0:t.toggle()];case 1:a.sent();a.label=2;case 2:return[2]}}))}))};e.prototype.setFocus=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){inputSetFocus(this);return[2]}))}))};e.prototype.setBlur=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){inputSetBlur(this);return[2]}))}))};e.prototype.getInputElement=function(){return Promise.resolve(this.nativeInput)};e.prototype.setAriaForm=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.ariaForm=Object.assign({},e);return[2]}))}))};e.prototype.updatePointerDates=function(){var e=now();e.setDate(1);if(this.selectedDate){e=parse(this.selectedDate)}else{if(this.defaultDate){e=parse(this.defaultDate)}}if(this.min){var t=parse(this.min);if(t&&e<t){e=t}}if(this.max){var a=parse(this.max);if(a&&e>a){e=a}}this.pointerDate={year:getYear(e),month:getMonth(e),day:getDate(e)}};e.prototype.updateValue=function(e,t){if(t===void 0){t=true}if(!isValidIsoString(e)){this.selectedDate=undefined;this.value=undefined;if(this.nativeInput){this.nativeInput.value=""}}if(this.value!==e){this.value=e;if(t&&(this.isDateInRange(parse(this.value))||this.value==="")){this.balChange.emit(this.value)}}};Object.defineProperty(e.prototype,"minYear",{get:function(){if(this.min){return parseInt(this.min.substring(0,4),10)}return this.minYearProp?this.minYearProp:getYear(subYears(now(),100))},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"maxYear",{get:function(){if(this.max){return parseInt(this.max.substring(0,4),10)}return this.maxYearProp?this.maxYearProp:getYear(addYears(now(),100))},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"years",{get:function(){var e=this;var t=Array.from({length:this.maxYear-this.minYear+1},(function(t,a){return e.minYear+a}));if(this.min&&this.pointerDate.month===getMonth(parse(this.min))){var a=getYear(parse(this.min));t=t.filter((function(e){return e>=a}))}if(this.max&&this.pointerDate.month===getMonth(parse(this.max))){var i=getYear(parse(this.max));t=t.filter((function(e){return e<=i}))}return t},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"months",{get:function(){var e=i18nBalDatepicker[this.language].monthsShort;var t=e.map((function(e,t){return{name:e,index:t}}));if(this.min&&this.pointerDate.year===getYear(parse(this.min))){var a=parseInt(this.min.substring(5,7),10)-1;t=t.filter((function(e){return e.index>=a}))}if(this.max&&this.pointerDate.year===getYear(parse(this.max))){var i=parseInt(this.max.substring(5,7),10)-1;t=t.filter((function(e){return e.index<=i}))}return t},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"weekDays",{get:function(){var e=__spreadArray([],i18nBalDatepicker[this.language].weekdaysMin,true);e.push(e.shift()||"");return e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"firstDateOfBox",{get:function(){var e=new Date(this.pointerDate.year,this.pointerDate.month,1);return startOfWeek(e,{weekStartsOn:1})},enumerable:false,configurable:true});e.prototype.getLocale=function(){var e=useBalConfig();return e&&e.locale||defaultLocale};Object.defineProperty(e.prototype,"calendarGrid",{get:function(){var e=this.firstDateOfBox;var t=this.firstDateOfBox;var a=[];do{var i=[];do{i=__spreadArray(__spreadArray([],i,true),[{date:new Date(t),display:format(this.getLocale(),t),dateString:formatDateString(t),label:getDate(t).toString(),isToday:isSameDay(t,now()),isSelected:parse(this.selectedDate)!==undefined&&isSameDay(t,parse(this.selectedDate)),isDisabled:!this.getAllowedDates(t)||!this.isDateInRange(t),isOutdated:this.pointerDate.month!==t.getMonth()||!this.isDateInRange(t)}],false);t.setDate(t.getDate()+1)}while(isSameWeek(t,e,{weekStartsOn:1}));a=__spreadArray(__spreadArray([],a,true),[i],false);e.setDate(e.getDate()+7)}while(isSameMonth(new Date(this.pointerDate.year,this.pointerDate.month,this.pointerDate.day),t));return a},enumerable:false,configurable:true});e.prototype.getAllowedDates=function(e){if(lodash_isnil(this.allowedDates)){return true}return this.allowedDates(formatDateString(e))};e.prototype.formatDate=function(e){var t=dateSeparator(this.getLocale());var a=e.length;var i=e.charAt(a-1);var r=e.charAt(a-2);if(i===t){if(a===1||r===t||e.split(t).filter((function(e){return e.length>0})).length>=3){return e.substring(0,a-1)}}if(a===5){if(e.split(t)[0].split("").length===1&&r!==t&&i!==t){return e.substring(0,a-1)+t+e.substring(a-1,a)}}if(a===3||a===6){if(i!==t&&r!==t&&e.split(t).length<=2){return e.substring(0,a-1)+t+e.substring(a-1,a)}}return e};e.prototype.render=function(){var e=this;var t=BEM.block("datepicker");var a=t.element("native");var i=t.element("popup");var r=i.element("body");var n=i.element("footer");return h(Host,{onClick:this.handleClick,"aria-disabled":this.disabled?"true":null,class:Object.assign(Object.assign({},t.class()),t.modifier("disabled").class(this.disabled||this.readonly))},h("input",{type:"date",class:Object.assign({},a.class()),name:this.name,min:this.min,max:this.max,value:this.value,tabindex:-1,"aria-hidden":"true"}),h("bal-popover",{onBalChange:this.onPopoverChange,ref:function(t){return e.popoverElement=t}},this.renderInput(),h("bal-popover-content",{spaceless:true,contentMinWidth:392},h("div",{class:Object.assign({},i.class())},this.renderHeader(),h("div",{class:Object.assign({},r.class())},this.renderGrid()),h("div",{class:Object.assign({},n.class())},h("slot",null))))))};e.prototype.renderInput=function(){var e=this;return h("div",{"bal-popover-trigger":true,class:"control"},h("bal-input-group",{disabled:this.disabled||this.readonly,invalid:this.invalid},h("input",Object.assign({class:{input:true,"data-test-input":true,"is-clickable":!this.disabled&&!this.triggerIcon&&!this.readonly,"is-disabled":this.disabled||this.readonly,"is-danger":this.invalid},"data-testid":"bal-datepicker-input",ref:function(t){return e.nativeInput=t},id:this.ariaForm.controlId||this.inputId,"aria-labelledby":this.ariaForm.labelId,"aria-describedby":this.ariaForm.messageId,"aria-invalid":this.invalid===true?"true":"false","aria-disabled":this.disabled?"true":null,type:"text",maxlength:"10",autoComplete:"off",value:format(this.getLocale(),parse(this.value||"")),required:this.required,disabled:this.disabled,readonly:this.readonly,placeholder:this.placeholder,onKeyDown:function(t){return e.onInputKeyDown(t)},onKeyUp:function(t){return e.onInputKeyUp(t)},onInput:this.onInput,onClick:this.onInputClick,onChange:this.onInputChange,onBlur:this.onInputBlur,onFocus:this.onInputFocus},this.inheritedAttributes)),!this.loading?h("bal-icon",{class:{"datepicker-trigger-icon":true,"is-clickable":!this.disabled&&!this.readonly},"is-right":true,color:this.disabled||this.readonly?"grey":this.invalid?"danger":"primary",name:"date",onClick:this.onIconClick}):""))};e.prototype.renderGrid=function(){var e=this;var t=BEM.block("datepicker-grid");var a=t.element("row");var i=t.element("cell");return h("div",null,this.renderWeekDayHeader(),h("div",{class:Object.assign({},t.class())},this.calendarGrid.map((function(t){return h("div",{class:Object.assign({},a.class())},t.map((function(t){return h("button",{type:"button","data-date":t.dateString,onClick:function(){return e.onClickDateCell(t)},disabled:t.isDisabled,class:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i.class()),{button:true,"is-text":!t.isDisabled&&!t.isSelected,"is-primary":t.isSelected&&t.isSelected,"is-disabled":t.isDisabled||t.isOutdated}),i.modifier("today").class(t.isToday)),i.modifier("selectable").class(!t.isDisabled&&!t.isOutdated)),i.modifier("disabled").class(t.isDisabled||t.isOutdated)),i.modifier("outdated").class(t.isOutdated)),i.modifier("selected").class(t.isSelected))},h("span",null,t.label))})))}))))};e.prototype.renderWeekDayHeader=function(){var e=BEM.block("datepicker-grid");var t=e.element("header");var a=e.element("cell");return h("header",{class:Object.assign({},t.class())},this.weekDays.map((function(e){return h("div",{class:Object.assign(Object.assign({},a.class()),a.modifier("header").class())},h("span",null,e))})))};e.prototype.renderHeader=function(){var e=this;var t=BEM.block("datepicker-pagination");var a=t.element("inner");var i=t.element("month-and-year");var r=i.element("select");return h("header",{class:Object.assign({},t.class())},h("div",{class:Object.assign({},a.class())},h("bal-button",{square:true,size:this.isMobile?"small":"",color:"info",icon:"nav-go-left",disabled:this.isPreviousMonthDisabled,onClick:function(){return e.previousMonth()}}),h("div",{class:Object.assign({},i.class())},h("div",{class:Object.assign(Object.assign({},r.class()),r.modifier("month").class())},h("div",{class:"select"},h("select",{onInput:this.onMonthSelect},this.months.map((function(t){return h("option",{value:t.index,selected:e.pointerDate.month===t.index},t.name)}))))),h("div",{class:Object.assign(Object.assign({},r.class()),r.modifier("year").class())},h("div",{class:"select"},h("select",{onInput:this.onYearSelect},this.years.map((function(t){return h("option",{value:t,selected:e.pointerDate.year===t},t)})))))),h("bal-button",{square:true,size:this.isMobile?"small":"",color:"info",icon:"nav-go-right",disabled:this.isNextMonthDisabled,onClick:function(){return e.nextMonth()}})))};e.prototype.previousMonth=function(){if(!this.isPreviousMonthDisabled){if(this.pointerDate.year===this.minYear&&this.pointerDate.month===0){return}this.pointerDate=this.calcPreviousMonth()}};e.prototype.nextMonth=function(){if(!this.isNextMonthDisabled){if(this.pointerDate.year===this.maxYear&&this.pointerDate.month===11){return}this.pointerDate=this.calcNextMonth()}};e.prototype.calcPreviousMonth=function(){if(this.pointerDate.month===0){return Object.assign(Object.assign({},this.pointerDate),{year:this.pointerDate.year-1,month:11,day:1})}else{return Object.assign(Object.assign({},this.pointerDate),{month:this.pointerDate.month-1,day:1})}};e.prototype.calcNextMonth=function(){if(this.pointerDate.month===11){return Object.assign(Object.assign({},this.pointerDate),{year:this.pointerDate.year+1,month:0,day:1})}else{return Object.assign(Object.assign({},this.pointerDate),{month:this.pointerDate.month+1,day:1})}};e.prototype.lastDayOfMonth=function(e,t){var a=new Date(e,t+1,0);return getDate(a)};Object.defineProperty(e.prototype,"isPreviousMonthDisabled",{get:function(){if(this.min){var e=parse(this.min);var t=this.lastDayOfMonth(this.calcPreviousMonth().year,this.calcPreviousMonth().month);var a=new Date(this.calcPreviousMonth().year,this.calcPreviousMonth().month,t);return isBefore(a,subDays(e,1))}return false},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"isNextMonthDisabled",{get:function(){if(this.max){var e=parse(this.max);var t=new Date(this.calcNextMonth().year,this.calcNextMonth().month,1);return isAfter(t,lastDayOfMonth(e)?e:addDays(e,1))}return false},enumerable:false,configurable:true});e.prototype.isDateInRange=function(e){var t=parse(formatDateString(e));if(this.min&&this.max&&this.max>this.min){return isWithinInterval(t,{start:parse(this.min),end:parse(this.max)})}if(this.min){return isAfter(t,parse(this.min))||isSameDay(t,parse(this.min))}if(this.max){return isBefore(t,addDays(parse(this.max),1))||isSameDay(t,parse(this.max))}return true};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{debounce:["debounceChanged"],value:["valueChanged"]}},enumerable:false,configurable:true});return e}();__decorate([Logger("bal-datepicker")],Datepicker.prototype,"createLogger",null);__decorate([ListenToBreakpoints()],Datepicker.prototype,"breakpointListener",null);__decorate([ListenToConfig()],Datepicker.prototype,"configChanged",null);var datepickerIds=0;Datepicker.style={css:balDatepickerCss};export{Datepicker as bal_datepicker};