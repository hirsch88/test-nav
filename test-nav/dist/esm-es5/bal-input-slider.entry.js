import{__awaiter,__generator}from"tslib";import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-e015dbc8.js";import{l as lodash_isnil}from"./index-82aff103.js";import{m as debounceEvent}from"./helpers-08b28736.js";import{s as stopEventBubbling}from"./form-input-fd2d14ca.js";import{B as BEM}from"./bem-1b28532d.js";import{d as defaultBalAriaForm}from"./form-479fd066.js";import"./browser-9199b5e2.js";import"./icons.constant-35253412.js";var balInputSliderCss=".bal-input-slider{display:block;position:relative;width:100%;-ms-flex:1;flex:1;font-family:var(--bal-font-family-text);-ms-flex-direction:column;flex-direction:column;min-height:3rem}.bal-input-slider__background{position:absolute;top:1rem;left:0px;right:0px;z-index:0;border-radius:var(--bal-radius-rounded);background:var(--bal-color-green);height:1rem;width:100%;overflow:hidden}.bal-input-slider__background__upper,.bal-input-slider__background__lower{position:absolute;top:0;width:50%;margin:0;cursor:pointer}.bal-input-slider__background__upper>div,.bal-input-slider__background__lower>div{height:1rem;border-radius:var(--bal-radius-none)}.bal-input-slider__background__upper{right:0px}.bal-input-slider__background__upper>div{background:var(--bal-color-green);border-top-right-radius:var(--bal-radius-rounded);border-bottom-right-radius:var(--bal-radius-rounded)}.bal-input-slider__background__lower{left:0px}.bal-input-slider__background__lower>div{background:var(--bal-color-green-5);border-top-left-radius:var(--bal-radius-rounded);border-bottom-left-radius:var(--bal-radius-rounded)}.bal-input-slider__background--disabled{cursor:default;pointer-events:none;background:var(--bal-color-grey-2)}.bal-input-slider__background--disabled .bal-input-slider__background__upper__inner{background:var(--bal-color-grey-2)}.bal-input-slider__background--disabled .bal-input-slider__background__lower__inner{background:var(--bal-color-grey-4)}.bal-input-slider__input{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;min-height:3rem}.bal-input-slider__input__native{-webkit-appearance:none;margin:0;background:rgba(0,0,0,0);z-index:1;outline:none;min-width:200px;width:100%}.bal-input-slider__input__native::-webkit-slider-runnable-track{width:100%;cursor:pointer;border:none}.bal-input-slider__input__native::-webkit-slider-thumb{-webkit-box-shadow:var(--bal-shadow-none);box-shadow:var(--bal-shadow-none);border:3px solid var(--bal-color-primary-inverted);height:1rem;width:1rem;border-radius:var(--bal-radius-rounded);background:var(--bal-color-primary);cursor:pointer;-webkit-appearance:none}.bal-input-slider__input__native:focus-visible{outline:none}.bal-input-slider__input__native:focus-visible::-webkit-slider-thumb{background:var(--bal-color-primary);border:2px solid var(--bal-color-primary)}.bal-input-slider__input__native::-moz-range-track{cursor:pointer;box-shadow:var(--bal-shadow-none);background:rgba(0,0,0,0);width:100%;border:none;z-index:2}.bal-input-slider__input__native::-moz-range-thumb{box-shadow:var(--bal-shadow-none);border:3px solid var(--bal-color-primary-inverted);height:10px;width:10px;border-radius:var(--bal-radius-rounded);background:var(--bal-color-primary);cursor:pointer}.bal-input-slider__input__native::-ms-track{cursor:pointer;box-shadow:var(--bal-shadow-none);background:rgba(0,0,0,0);width:100%;border:none;z-index:2}.bal-input-slider__input__native::-ms-fill-lower{background:rgba(0,0,0,0);border:none;box-shadow:var(--bal-shadow-none)}.bal-input-slider__input__native::-ms-fill-upper{background:rgba(0,0,0,0);border:none;box-shadow:var(--bal-shadow-none)}.bal-input-slider__input__native::-ms-thumb{box-shadow:var(--bal-shadow-none);border:3px solid var(--bal-color-primary-inverted);height:1rem;width:1rem;border-radius:var(--bal-radius-rounded);background:var(--bal-color-primary);cursor:pointer;-webkit-appearance:none;z-index:2}.bal-input-slider__input__native:focus::-ms-fill-lower{background:rgba(0,0,0,0)}.bal-input-slider__input__native:focus::-ms-fill-upper{background:rgba(0,0,0,0)}.bal-input-slider__input__native--disabled::-webkit-slider-thumb{background:var(--bal-color-grey-5)}.bal-input-slider__input__native--disabled::-ms-thumb{background:var(--bal-color-grey-5)}.bal-input-slider__input__native--disabled::-moz-range-thumb{background:var(--bal-color-grey-5)}.bal-input-slider__steps{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;min-height:.5rem;margin:-10px 8px;-ms-flex-pack:justify;justify-content:space-between}.bal-input-slider__steps__item{width:.125rem;border-radius:var(--bal-radius-rounded);background-color:var(--bal-color-primary)}.bal-input-slider__steps__item--disabled{background:var(--bal-color-grey-4)}@-moz-document url-prefix(){.bal-input-slider__steps{margin:0 8px !important}}";var InputSlider=function(){function e(e){var i=this;registerInstance(this,e);this.balInput=createEvent(this,"balInput",7);this.balBlur=createEvent(this,"balBlur",7);this.balKeyPress=createEvent(this,"balKeyPress",7);this.balFocus=createEvent(this,"balFocus",7);this.balChange=createEvent(this,"balChange",7);this.inputId="bal-input-slider-".concat(inputSliderIds++);this.didInit=false;this.hasFocus=false;this.initialValue="";this.onInput=function(e){var t=e.target;if(t){i.value=t.value||""}i.balInput.emit(i.value)};this.handleClick=function(e){if(i.disabled||i.readonly){e.preventDefault();e.stopPropagation()}};this.onFocus=function(e){i.hasFocus=true;i.balFocus.emit(e)};this.onBlur=function(e){i.hasFocus=false;i.balBlur.emit(e);i.balChange.emit(i.value)};this.ariaForm=defaultBalAriaForm;this.name=this.inputId;this.step=0;this.min=0;this.max=100;this.invalid=false;this.balTabindex=0;this.disabled=false;this.readonly=false;this.required=false;this.hasTicks=false;this.debounce=0;this.value=""}e.prototype.debounceChanged=function(){this.balChange=debounceEvent(this.balChange,this.debounce)};e.prototype.listenOnClick=function(e){if((this.disabled||this.readonly)&&e.target&&e.target===this.el){stopEventBubbling(e)}};e.prototype.resetHandler=function(e){var i=this;var t=e.target;if(t===null||t===void 0?void 0:t.contains(this.el)){this.value=this.initialValue;clearTimeout(this.resetHandlerTimer);this.resetHandlerTimer=setTimeout((function(){if(i.nativeInput){i.nativeInput.value=i.initialValue}}),0)}};e.prototype.valueChanged=function(e,i){if(this.didInit&&!this.hasFocus&&e!==i){this.balChange.emit(this.value)}};e.prototype.connectedCallback=function(){this.debounceChanged();this.initialValue=this.value};e.prototype.componentDidLoad=function(){this.didInit=true;if(!lodash_isnil(this.value)&&this.value!==""){this.valueChanged(this.value,undefined)}};e.prototype.setFocus=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(i){clearTimeout(this.setFocusTimer);this.setFocusTimer=setTimeout((function(){if(e.nativeInput){e.nativeInput.focus()}}));return[2]}))}))};e.prototype.getInputElement=function(){return Promise.resolve(this.nativeInput)};e.prototype.setAriaForm=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){this.ariaForm=Object.assign({},e);return[2]}))}))};Object.defineProperty(e.prototype,"numberOfSteps",{get:function(){var e=this.max-this.min;if(this.step<=0||this.step>=e){return 0}return~~(e/this.step)+1},enumerable:false,configurable:true});e.prototype.cssWidth=function(e){if(e===void 0){e=false}var i=this.value===""?0:Math.round(Number(this.value)/this.step)*this.step;var t=100/this.max*i;if(!e){return"".concat(100-t,"%")}return"".concat(t,"%")};e.prototype.getNumberOfSteps=function(){var e=[];for(var i=0;i<this.numberOfSteps;i++){e.push(i)}return e};e.prototype.render=function(){var e=this;var i=BEM.block("input-slider");var t=i.element("background");var a=t.element("upper");var r=a.element("inner");var s=t.element("lower");var n=s.element("inner");var l=i.element("input");var o=l.element("native");var d=l.element("value");var u=d.modifier("left");var b=d.modifier("right");var c=i.element("steps");var p=c.element("item");return h(Host,{class:Object.assign(Object.assign({},i.class()),i.modifier("disabled").class(this.disabled||this.readonly)),onClick:this.handleClick,"aria-disabled":this.disabled||this.readonly?"true":null},h("div",{class:Object.assign(Object.assign({},t.class()),t.modifier("disabled").class(this.disabled||this.readonly))},h("div",{class:Object.assign({},a.class()),style:{width:this.cssWidth()}},h("div",{class:Object.assign({},r.class())})),h("div",{class:Object.assign({},s.class()),style:{width:this.cssWidth(true)}},h("div",{class:Object.assign({},n.class())}))),h("div",{class:Object.assign({},l.class())},h("div",{class:Object.assign(Object.assign({},d.class()),u.class())}),h("input",{type:"range",class:Object.assign(Object.assign({},o.class()),o.modifier("disabled").class(this.disabled||this.readonly)),ref:function(i){return e.nativeInput=i},id:this.ariaForm.controlId||this.inputId,"aria-labelledby":this.ariaForm.labelId,"aria-describedby":this.ariaForm.messageId,"aria-disabled":this.disabled?"true":null,"aria-invalid":this.invalid===true?"true":"false",disabled:this.disabled,readonly:this.readonly,name:this.name,required:this.required,tabIndex:this.balTabindex,step:this.step,min:this.min,max:this.max,value:this.value!==""&&this.value!==undefined?this.value:0,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus,onKeyPress:function(i){return e.balKeyPress.emit(i)},"data-testid":"bal-input-slider"}),h("div",{class:Object.assign(Object.assign({},d.class()),b.class())})),h("div",{class:Object.assign({},c.class()),style:{display:this.hasTicks?"flex":"none"}},this.getNumberOfSteps().map((function(i){return h("div",{class:Object.assign(Object.assign({},p.class()),p.modifier("disabled").class(e.disabled||e.readonly)),"data-step-id":i})}))))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{debounce:["debounceChanged"],value:["valueChanged"]}},enumerable:false,configurable:true});return e}();var inputSliderIds=0;InputSlider.style={css:balInputSliderCss};export{InputSlider as bal_input_slider};