import{r as t,c as e,h as i,H as n,g as o}from"./p-e85eaa4e.js";import{q as s}from"./p-6b2d19d0.js";import{B as a}from"./p-61996a75.js";import{b as r}from"./p-add1e9ec.js";import{s as l}from"./p-785037ba.js";import{d as c}from"./p-7f5e6a6c.js";import{L as p}from"./p-585cea76.js";import{focusableQueryString as u}from"./p-d64b7295.js";import"./p-9a3d9e17.js";import"./p-3e8ff66b.js";import"./p-55865e45.js";class h{showContainerElement(t){t.containerEl&&this.showElement(t.containerEl)}hideContainerElement(t){t.containerEl&&this.hideElement(t.containerEl)}showArrowElement(t,e=t.arrow){e&&t.arrowEl&&this.showElement(t.arrowEl)}hideArrowElement(t){t.arrowEl&&Object.assign(t.arrowEl.style,{left:"",top:"",display:"none",visibility:"hidden"})}showBackdropElement(t,e=t.backdrop){e&&t.backdropEl&&this.showElement(t.backdropEl)}hideBackdropElement(t){t.backdropEl&&this.hideElement(t.backdropEl)}showElement(t){t&&(t.style.setProperty("display","block"),t.style.setProperty("visibility","visible"))}hideElement(t){t&&(t.style.removeProperty("display"),t.style.removeProperty("visibility"))}}class d extends h{constructor(){super(...arguments),this.backdrop=!1,this.offset=0}async present(t){return!!(t.containerEl&&t.trigger&&t.backdropEl)&&(this.backdrop=t.getBooleanValue(t.trigger,"bal-popup-backdrop",t.backdrop),this.offset=t.getValue(t.trigger,"bal-popup-offset",t.offset),t.containerEl.style.setProperty("inset","auto 0px 0px 0px"),t.containerEl.style.setProperty("bottom",`${this.offset}px`),t.backdropEl.style.setProperty("bottom",`${this.offset}px`),t.containerEl.classList.add("container"),this.showBackdropElement(t,this.backdrop),this.showContainerElement(t),!0)}async update(t){return!1}async dismiss(t){return!(!t.containerEl||!t.backdropEl||(t.balWillAnimate.emit(),this.hideBackdropElement(t),this.hideContainerElement(t),t.containerEl.style.removeProperty("inset"),t.containerEl.classList.remove("container"),t.containerEl.style.removeProperty("bottom"),t.backdropEl.style.removeProperty("bottom"),0))}}class f extends h{constructor(){super(...arguments),this.offset=0}async present(t){return!(!t.containerEl||!t.trigger||(this.offset=t.getValue(t.trigger,"bal-popup-offset",t.offset),t.containerEl.style.setProperty("inset",`${this.offset}px auto auto 0px`),this.offset>0&&t.containerEl.style.setProperty("box-shadow","inset var(--bal-nav-meta-bar-variant-white-shadow)"),this.showBackdropElement(t),this.showContainerElement(t),this.showArrowElement(t),t.containerEl.classList.add("container"),0))}async update(t){return!1}async dismiss(t){return!!t.containerEl&&(this.hideBackdropElement(t),this.hideContainerElement(t),this.hideArrowElement(t),t.containerEl.style.removeProperty("box-shadow"),t.containerEl.style.removeProperty("inset"),t.containerEl.classList.remove("container"),!0)}}function b(t){return t.split("-")[1]}function m(t){return"y"===t?"height":"width"}function v(t){return t.split("-")[0]}function y(t){return["top","bottom"].includes(v(t))?"x":"y"}function w(t,e,i){let{reference:n,floating:o}=t;const s=n.x+n.width/2-o.width/2,a=n.y+n.height/2-o.height/2,r=y(e),l=m(r),c=n[l]/2-o[l]/2,p="x"===r;let u;switch(v(e)){case"top":u={x:s,y:n.y-o.height};break;case"bottom":u={x:s,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:a};break;case"left":u={x:n.x-o.width,y:a};break;default:u={x:n.x,y:n.y}}switch(b(e)){case"start":u[r]-=c*(i&&p?-1:1);break;case"end":u[r]+=c*(i&&p?-1:1)}return u}function g(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function x(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function k(t,e){var i;void 0===e&&(e={});const{x:n,y:o,platform:s,rects:a,elements:r,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:u="floating",altBoundary:h=!1,padding:d=0}=e,f=g(d),b=r[h?"floating"===u?"reference":"floating":u],m=x(await s.getClippingRect({element:null==(i=await(null==s.isElement?void 0:s.isElement(b)))||i?b:b.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(r.floating)),boundary:c,rootBoundary:p,strategy:l})),v="floating"===u?{...a.floating,x:n,y:o}:a.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(r.floating)),w=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},k=x(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-k.top+f.top)/w.y,bottom:(k.bottom-m.bottom+f.bottom)/w.y,left:(m.left-k.left+f.left)/w.x,right:(k.right-m.right+f.right)/w.x}}const _=Math.min,A=Math.max;function j(t,e,i){return A(t,_(e,i))}const O=t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:n=0}=t||{},{x:o,y:s,placement:a,rects:r,platform:l,elements:c}=e;if(null==i)return{};const p=g(n),u={x:o,y:s},h=y(a),d=m(h),f=await l.getDimensions(i),v="y"===h,w=v?"top":"left",x=v?"bottom":"right",k=v?"clientHeight":"clientWidth",_=r.reference[d]+r.reference[h]-u[h]-r.floating[d],A=u[h]-r.reference[h],O=await(null==l.getOffsetParent?void 0:l.getOffsetParent(i));let C=O?O[k]:0;C&&await(null==l.isElement?void 0:l.isElement(O))||(C=c.floating[k]||r.floating[d]);const R=p[w],$=C-f[d]-p[x],S=C/2-f[d]/2+(_/2-A/2),z=j(R,S,$),D=null!=b(a)&&S!=z&&r.reference[d]/2-(S<R?p[w]:p[x])-f[d]/2<0;return{[h]:u[h]-(D?S<R?R-S:$-S:0),data:{[h]:z,centerOffset:S-z}}}}),C={left:"right",right:"left",bottom:"top",top:"bottom"};function R(t){return t.replace(/left|right|bottom|top/g,(t=>C[t]))}const $={start:"end",end:"start"};function S(t){return t.replace(/start|end/g,(t=>$[t]))}const z=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var i;const{placement:n,middlewareData:o,rects:s,initialPlacement:a,platform:r,elements:l}=e,{mainAxis:c=!0,crossAxis:p=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:f=!0,...w}=t,g=v(n),x=v(a)===a,_=await(null==r.isRTL?void 0:r.isRTL(l.floating)),A=u||(x||!f?[R(a)]:function(t){const e=R(t);return[S(t),e,S(e)]}(a));u||"none"===d||A.push(...function(t,e,i,n){const o=b(t);let s=function(t,e,i){const n=["left","right"],o=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return i?e?o:n:e?n:o;case"left":case"right":return e?s:a;default:return[]}}(v(t),"start"===i,n);return o&&(s=s.map((t=>t+"-"+o)),e&&(s=s.concat(s.map(S)))),s}(a,f,d,_));const j=[a,...A],O=await k(e,w),C=[];let $=(null==(i=o.flip)?void 0:i.overflows)||[];if(c&&C.push(O[g]),p){const{main:t,cross:e}=function(t,e,i){void 0===i&&(i=!1);const n=b(t),o=y(t),s=m(o);let a="x"===o?n===(i?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=R(a)),{main:a,cross:R(a)}}(n,s,_);C.push(O[t],O[e])}if($=[...$,{placement:n,overflows:C}],!C.every((t=>t<=0))){var z,D;const t=((null==(z=o.flip)?void 0:z.index)||0)+1,e=j[t];if(e)return{data:{index:t,overflows:$},reset:{placement:e}};let i=null==(D=$.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:D.placement;if(!i)switch(h){case"bestFit":{var E;const t=null==(E=$.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:E[0];t&&(i=t);break}case"initialPlacement":i=a}if(n!==i)return{reset:{placement:i}}}return{}}}};function D(t){var e;return(null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function E(t){return D(t).getComputedStyle(t)}function F(t){return t instanceof D(t).Node}function B(t){return F(t)?(t.nodeName||"").toLowerCase():""}function L(t){return t instanceof D(t).HTMLElement}function P(t){return t instanceof D(t).Element}function M(t){return"undefined"!=typeof ShadowRoot&&(t instanceof D(t).ShadowRoot||t instanceof ShadowRoot)}function V(t){const{overflow:e,overflowX:i,overflowY:n,display:o}=E(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(o)}function T(t){return["table","td","th"].includes(B(t))}function W(t){const e=N(),i=E(t);return"none"!==i.transform||"none"!==i.perspective||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some((t=>(i.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(i.contain||"").includes(t)))}function N(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function q(t){return["html","body","#document"].includes(B(t))}const G=Math.min,H=Math.max,I=Math.round;function K(t){const e=E(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const o=L(t),s=o?t.offsetWidth:i,a=o?t.offsetHeight:n,r=I(i)!==s||I(n)!==a;return r&&(i=s,n=a),{width:i,height:n,fallback:r}}function U(t){return P(t)?t:t.contextElement}const X={x:1,y:1};function Y(t){const e=U(t);if(!L(e))return X;const i=e.getBoundingClientRect(),{width:n,height:o,fallback:s}=K(e);let a=(s?I(i.width):i.width)/n,r=(s?I(i.height):i.height)/o;return a&&Number.isFinite(a)||(a=1),r&&Number.isFinite(r)||(r=1),{x:a,y:r}}const J={x:0,y:0};function Q(t,e,i){var n,o;if(void 0===e&&(e=!0),!N())return J;const s=t?D(t):window;return!i||e&&i!==s?J:{x:(null==(n=s.visualViewport)?void 0:n.offsetLeft)||0,y:(null==(o=s.visualViewport)?void 0:o.offsetTop)||0}}function Z(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1);const o=t.getBoundingClientRect(),s=U(t);let a=X;e&&(n?P(n)&&(a=Y(n)):a=Y(t));const r=Q(s,i,n);let l=(o.left+r.x)/a.x,c=(o.top+r.y)/a.y,p=o.width/a.x,u=o.height/a.y;if(s){const t=D(s),e=n&&P(n)?D(n):n;let i=t.frameElement;for(;i&&n&&e!==t;){const t=Y(i),e=i.getBoundingClientRect(),n=getComputedStyle(i);e.x+=(i.clientLeft+parseFloat(n.paddingLeft))*t.x,e.y+=(i.clientTop+parseFloat(n.paddingTop))*t.y,l*=t.x,c*=t.y,p*=t.x,u*=t.y,l+=e.x,c+=e.y,i=D(i).frameElement}}return x({width:p,height:u,x:l,y:c})}function tt(t){return((F(t)?t.ownerDocument:t.document)||window.document).documentElement}function et(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function it(t){return Z(tt(t)).left+et(t).scrollLeft}function nt(t){if("html"===B(t))return t;const e=t.assignedSlot||t.parentNode||M(t)&&t.host||tt(t);return M(e)?e.host:e}function ot(t){const e=nt(t);return q(e)?e.ownerDocument.body:L(e)&&V(e)?e:ot(e)}function st(t,e){var i;void 0===e&&(e=[]);const n=ot(t),o=n===(null==(i=t.ownerDocument)?void 0:i.body),s=D(n);return o?e.concat(s,s.visualViewport||[],V(n)?n:[]):e.concat(n,st(n))}function at(t,e,i){let n;if("viewport"===e)n=function(t,e){const i=D(t),n=tt(t),o=i.visualViewport;let s=n.clientWidth,a=n.clientHeight,r=0,l=0;if(o){s=o.width,a=o.height;const t=N();(!t||t&&"fixed"===e)&&(r=o.offsetLeft,l=o.offsetTop)}return{width:s,height:a,x:r,y:l}}(t,i);else if("document"===e)n=function(t){const e=tt(t),i=et(t),n=t.ownerDocument.body,o=H(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=H(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-i.scrollLeft+it(t);const r=-i.scrollTop;return"rtl"===E(n).direction&&(a+=H(e.clientWidth,n.clientWidth)-o),{width:o,height:s,x:a,y:r}}(tt(t));else if(P(e))n=function(t,e){const i=Z(t,!0,"fixed"===e),n=i.top+t.clientTop,o=i.left+t.clientLeft,s=L(t)?Y(t):{x:1,y:1};return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:o*s.x,y:n*s.y}}(e,i);else{const i=Q(t);n={...e,x:e.x-i.x,y:e.y-i.y}}return x(n)}function rt(t,e){const i=nt(t);return!(i===e||!P(i)||q(i))&&("fixed"===E(i).position||rt(i,e))}function lt(t,e){return L(t)&&"fixed"!==E(t).position?e?e(t):t.offsetParent:null}function ct(t,e){const i=D(t);if(!L(t))return i;let n=lt(t,e);for(;n&&T(n)&&"static"===E(n).position;)n=lt(n,e);return n&&("html"===B(n)||"body"===B(n)&&"static"===E(n).position&&!W(n))?i:n||function(t){let e=nt(t);for(;L(e)&&!q(e);){if(W(e))return e;e=nt(e)}return null}(t)||i}function pt(t,e,i){const n=L(e),o=tt(e),s="fixed"===i,a=Z(t,!0,s,e);let r={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&!s)if(("body"!==B(e)||V(o))&&(r=et(e)),L(e)){const t=Z(e,!0,s,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else o&&(l.x=it(o));return{x:a.left+r.scrollLeft-l.x,y:a.top+r.scrollTop-l.y,width:a.width,height:a.height}}const ut={getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:n,strategy:o}=t;const s=[..."clippingAncestors"===i?function(t,e){const i=e.get(t);if(i)return i;let n=st(t).filter((t=>P(t)&&"body"!==B(t))),o=null;const s="fixed"===E(t).position;let a=s?nt(t):t;for(;P(a)&&!q(a);){const e=E(a),i=W(a);i||"fixed"!==e.position||(o=null),(s?!i&&!o:!i&&"static"===e.position&&o&&["absolute","fixed"].includes(o.position)||V(a)&&!i&&rt(t,a))?n=n.filter((t=>t!==a)):o=e,a=nt(a)}return e.set(t,n),n}(e,this._c):[].concat(i),n],a=s.reduce(((t,i)=>{const n=at(e,i,o);return t.top=H(n.top,t.top),t.right=G(n.right,t.right),t.bottom=G(n.bottom,t.bottom),t.left=H(n.left,t.left),t}),at(e,s[0],o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:i,strategy:n}=t;const o=L(i),s=tt(i);if(i===s)return e;let a={scrollLeft:0,scrollTop:0},r={x:1,y:1};const l={x:0,y:0};if((o||!o&&"fixed"!==n)&&(("body"!==B(i)||V(s))&&(a=et(i)),L(i))){const t=Z(i);r=Y(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}return{width:e.width*r.x,height:e.height*r.y,x:e.x*r.x-a.scrollLeft*r.x+l.x,y:e.y*r.y-a.scrollTop*r.y+l.y}},isElement:P,getDimensions:function(t){return K(t)},getOffsetParent:ct,getDocumentElement:tt,getScale:Y,async getElementRects(t){let{reference:e,floating:i,strategy:n}=t;const o=this.getOffsetParent||ct,s=this.getDimensions;return{reference:pt(e,await o(i),n),floating:{x:0,y:0,...await s(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===E(t).direction};class ht extends h{constructor(){super(...arguments),this.placement="bottom",this.offset=0,this.arrow=!1,this.backdrop=!1,this.reference=void 0,this.triggerEl=null}async present(t){if(!t.trigger&&r.hasDocument){const e=Array.from(document.querySelectorAll(`[bal-popup="${t.el.id}"]`))[0];t.trigger=e}if(t.trigger&&t.containerEl&&t.arrowEl){if(this.placement=t.getValue(t.trigger,"bal-popup-placement",t.placement),this.arrow=t.getBooleanValue(t.trigger,"bal-popup-arrow",t.arrow),this.backdrop=t.getBooleanValue(t.trigger,"bal-popup-backdrop",t.backdrop),this.reference=t.getValue(t.trigger,"bal-popup-reference",t.reference),this.offset=t.getNumberValue(t.trigger,"bal-popup-offset",t.offset),this.triggerEl=t.trigger,this.reference&&r.hasDocument){const e=document.getElementById(this.reference);this.triggerEl=e||t.trigger}if(this.triggerEl)return this.showContainerElement(t),this.showBackdropElement(t,this.backdrop),this.showArrowElement(t,this.arrow),this.triggerEl.classList.add("bal-popup-variant-popover-trigger"),this.cleanup=function(t,e,i,n){void 0===n&&(n={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=!0,animationFrame:r=!1}=n,l=o||s?[...P(t)?st(t):t.contextElement?st(t.contextElement):[],...st(e)]:[];l.forEach((t=>{const e=!P(t)&&t.toString().includes("V");!o||r&&!e||t.addEventListener("scroll",i,{passive:!0}),s&&t.addEventListener("resize",i)}));let c,p=null;a&&(p=new ResizeObserver((()=>{i()})),P(t)&&!r&&p.observe(t),P(t)||!t.contextElement||r||p.observe(t.contextElement),p.observe(e));let u=r?Z(t):null;return r&&function e(){const n=Z(t);!u||n.x===u.x&&n.y===u.y&&n.width===u.width&&n.height===u.height||i(),u=n,c=requestAnimationFrame(e)}(),i(),()=>{var t;l.forEach((t=>{o&&t.removeEventListener("scroll",i),s&&t.removeEventListener("resize",i)})),null==(t=p)||t.disconnect(),p=null,r&&cancelAnimationFrame(c)}}(this.triggerEl,t.containerEl,(()=>{this.update(t)})),!0}return!1}async update(t){var e,i,n,o;if(this.triggerEl&&t.trigger&&t.containerEl&&t.arrowEl){const s="bottom-end"===this.placement&&this.triggerEl!==t.trigger;let a=0;if(s){const n=null===(e=this.triggerEl)||void 0===e?void 0:e.getBoundingClientRect(),o=null===(i=t.trigger)||void 0===i?void 0:i.getBoundingClientRect();a=440-n.width+(o.x-n.x)+o.width/2-4}return((t,e,i)=>{const n=new Map,o={platform:ut,...i},s={...o.platform,_c:n};return(async(t,e,i)=>{const{placement:n="bottom",strategy:o="absolute",middleware:s=[],platform:a}=i,r=s.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:o}),{x:p,y:u}=w(c,n,l),h=n,d={},f=0;for(let i=0;i<r.length;i++){const{name:s,fn:b}=r[i],{x:m,y:v,data:y,reset:g}=await b({x:p,y:u,initialPlacement:n,placement:h,strategy:o,middlewareData:d,rects:c,platform:a,elements:{reference:t,floating:e}});p=null!=m?m:p,u=null!=v?v:u,d={...d,[s]:{...d[s],...y}},g&&f<=50&&(f++,"object"==typeof g&&(g.placement&&(h=g.placement),g.rects&&(c=!0===g.rects?await a.getElementRects({reference:t,floating:e,strategy:o}):g.rects),({x:p,y:u}=w(c,h,l))),i=-1)}return{x:p,y:u,placement:h,strategy:o,middlewareData:d}})(t,e,{...o,platform:s})})(this.triggerEl,t.containerEl,{placement:this.placement,middleware:[(void 0===n&&(n={}),{name:"shift",options:n,async fn(t){const{x:e,y:i,placement:o}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:r={fn:t=>{let{x:e,y:i}=t;return{x:e,y:i}}},...l}=n,c={x:e,y:i},p=await k(t,l),u=y(v(o)),h="x"===u?"y":"x";let d=c[u],f=c[h];s&&(d=j(d+p["y"===u?"top":"left"],d,d-p["y"===u?"bottom":"right"])),a&&(f=j(f+p["y"===h?"top":"left"],f,f-p["y"===h?"bottom":"right"]));const b=r.fn({...t,[u]:d,[h]:f});return{...b,data:{x:b.x-e,y:b.y-i}}}}),z(),(o=this.arrow?16:this.offset,void 0===o&&(o=0),{name:"offset",options:o,async fn(t){const{x:e,y:i}=t,n=await async function(t,e){const{placement:i,platform:n,elements:o}=t,s=await(null==n.isRTL?void 0:n.isRTL(o.floating)),a=v(i),r=b(i),l="x"===y(i),c=["left","top"].includes(a)?-1:1,p=s&&l?-1:1,u="function"==typeof e?e(t):e;let{mainAxis:h,crossAxis:d,alignmentAxis:f}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return r&&"number"==typeof f&&(d="end"===r?-1*f:f),l?{x:d*p,y:h*c}:{x:h*c,y:d*p}}(t,o);return{x:e+n.x,y:i+n.y,data:n}}}),O({element:t.arrowEl,padding:4})]}).then((({x:e,y:i,middlewareData:n,placement:o})=>{if(t.containerEl){Object.assign(t.containerEl.style,{left:`${e}px`,top:`${i}px`});const r={top:"bottom",right:"left",bottom:"top",left:"right"}[o.split("-")[0]];if(n.arrow&&t.arrowEl){const o=n.arrow;Object.assign(t.arrowEl.style,s?{left:`${a}px`,top:null!=i&&null!=o.y?`${o.y}px`:"",right:"",bottom:"",[r]:"-4px"}:{left:null!=e&&null!=o.x?`${o.x}px`:"",top:null!=i&&null!=o.y?`${o.y}px`:"",right:"",bottom:"",[r]:"-4px"})}}})),!0}return!1}async dismiss(t){return!!(t.containerEl&&t.arrowEl&&this.triggerEl)&&(this.cleanup&&this.cleanup(),this.triggerEl.classList.remove("bal-popup-variant-popover-trigger"),this.hideBackdropElement(t),this.hideContainerElement(t),this.hideArrowElement(t),!0)}}class dt{constructor(t){this.renderer=t}async present(t){t.balWillAnimate.emit();const e=await this.renderer.present(t);return e&&(t.presented=!0,t.balDidAnimate.emit()),e}async update(t){t.balWillAnimate.emit();const e=await this.renderer.update(t);return e&&t.balDidAnimate.emit(),e}async dismiss(t){t.balWillAnimate.emit();const e=await this.renderer.dismiss(t);return e&&(t.presented=!1,t.balDidAnimate.emit()),e}}const ft=class{constructor(i){t(this,i),this.balChange=e(this,"balChange",7),this.balWillAnimate=e(this,"balWillAnimate",7),this.balDidAnimate=e(this,"balDidAnimate",7),this.popupId="bal-pu-"+bt++,this.isClickedOutsideOnMouseDown=!1,this.isClickedOutsideOnMouseUp=!1,this.popoverVariantRenderer=new dt(new ht),this.fullscreenVariantRenderer=new dt(new f),this.drawerVariantRenderer=new dt(new d),this.lastVariant="popover",this.initialActive=this.active,this.debouncedGlobalClick=c((t=>this.notifyGlobalClick(t)),10),this.onBackdropClick=t=>!!(this.activeBackdropDismiss&&this.presented&&t&&t.target)&&t.target.classList.contains("bal-popup__backdrop"),this.onCloseClick=()=>{this.activeClosable&&this.dismiss()},this.activeClosable=!1,this.activeBackdropDismiss=!1,this.activeVariant="popover",this.trigger=void 0,this.lastTrigger=void 0,this.label="",this.reference=void 0,this.variant="popover",this.placement="bottom",this.arrow=!1,this.backdrop=!1,this.offset=0,this.closable=!1,this.backdropDismiss=!1,this.active=!1,this.presented=!1,this.contentWidth=void 0}createLogger(t){this.log=t}async variantChanged(t,e){t!==e&&(await this.getVariantRenderer(e).dismiss(this),this.activeVariant!==t&&(this.lastVariant=this.activeVariant,this.activeVariant=t,await this.getVariantRenderer(this.lastVariant).dismiss(this)),this.presented&&await this.getVariantRenderer(t).present(this))}async activeChanged(t,e){t!==e&&t!==this.presented&&(t?this.present():this.dismiss())}contentWidthChanged(t,e){t!==e&&(void 0===t?this.el.style.removeProperty("--bal-popup-variant-popover-max-width"):this.el.style.setProperty("--bal-popup-variant-popover-max-width",`${this.contentWidth}px`))}componentDidLoad(){this.contentWidthChanged(this.contentWidth,0),!0===this.initialActive&&!0!==this.presented&&this.present()}async listenOnGlobalClick(t){var e;const i=t.target.closest("[bal-popup]");if(i&&r.hasWindow){const t=(null===(e=i.attributes.getNamedItem("bal-popup"))||void 0===e?void 0:e.nodeValue)||"";this.el.id===t&&this.debouncedGlobalClick(i)}}async listenOnKeyDown(t){this.activeClosable&&this.presented&&s(t)&&(l(t),this.dismiss())}async listenOnMouseDown(t){this.isClickedOutsideOnMouseDown=this.onBackdropClick(t)}async listenOnMouseUp(t){this.isClickedOutsideOnMouseUp=this.onBackdropClick(t)}async listenOnComponentClick(){this.presented&&this.activeBackdropDismiss&&this.isClickedOutsideOnMouseUp&&this.isClickedOutsideOnMouseDown&&await this.dismiss()}async present(){await this.resetAllVariants(),await this._present()&&(this.lastTrigger=this.trigger,this.balChange.emit(this.presented))}async dismiss(){await this.resetAllVariants(),await this._dismiss()&&(this.lastTrigger=this.trigger,this.balChange.emit(this.presented))}async toggle(){return this.presented?this.dismiss():this.present()}async _emitChange(){this.balChange.emit(this.presented)}async _present(){r.hasDocument&&(this.lastFocus=document.activeElement||void 0),this.lastVariantRenderer&&(await this.lastVariantRenderer.dismiss(this),this.presented=!0),this.lastVariantRenderer=this.getVariantRenderer();const t=await this.lastVariantRenderer.present(this);return this.focusFirstDescendant(),t}async _dismiss(){var t;const e=await this.getVariantRenderer().dismiss(this);return this.lastVariantRenderer=void 0,this.lastFocus&&this.lastFocus.focus&&(null===(t=this.lastFocus)||void 0===t||t.focus()),e}getVariantRenderer(t=this.activeVariant){switch(t){case"fullscreen":return this.fullscreenVariantRenderer;case"drawer":return this.drawerVariantRenderer;default:return this.popoverVariantRenderer}}getValue(t,e,i){const n=t.attributes.getNamedItem(e);return n?n.value:i}getNumberValue(t,e,i){const n=t.attributes.getNamedItem(e);return n&&parseInt(n.value,10)||i}getBooleanValue(t,e,i){const n=t.attributes.getNamedItem(e);return n&&n?""===n.value||"true"===n.value:i}notifyGlobalClick(t){this.trigger=t,this.lastTrigger=void 0===this.lastTrigger?this.trigger:this.lastTrigger,this.activeVariant=this.getValue(t,"bal-popup-variant",this.variant),this.activeClosable=this.getBooleanValue(t,"bal-popup-closable",this.closable),this.activeBackdropDismiss=this.getBooleanValue(t,"bal-popup-backdrop-dismiss",this.backdropDismiss),this.presented&&this.lastTrigger!==this.trigger?this._present():this.toggle()}async resetAllVariants(){if(await this.dismissAllOtherPopups(),this.lastVariant!==this.activeVariant){const t=this.getVariantRenderer(this.lastVariant);await t.dismiss(this)}this.lastVariant=this.activeVariant}async dismissAllOtherPopups(){if(r.hasDocument){const t=Array.from(document.getElementsByTagName("bal-popup")).filter((t=>t.id!==this.el.id&&"true"!==t.ariaHidden));for(let e=0;e<t.length;e++){const i=t[e];await i._dismiss(),await i._emitChange()}}}focusFirstDescendant(){const{el:t}=this,e=t.querySelector(u);e?e.focus():t.focus()}render(){const t=a.block("popup"),e=t.element("container"),o=t.element("arrow"),s=t.element("backdrop"),r=t.element("inner"),l=r.element("head"),c=r.element("content");return i(n,{class:Object.assign({},t.class()),role:"dialog","aria-hidden":`${!0!==this.presented}`,"aria-modal":`${!0===this.presented}`,"aria-presented":`${!0===this.presented}`,"aria-labelledby":`${this.popupId}-heading`},i("div",{class:Object.assign({},s.class()),ref:t=>this.backdropEl=t}),i("div",{class:Object.assign(Object.assign({},e.class()),e.modifier(`variant-${this.activeVariant}`).class()),ref:t=>this.containerEl=t},i("div",{class:Object.assign({},o.class()),ref:t=>this.arrowEl=t}),i("bal-stack",{layout:"vertical",px:"popover"===this.activeVariant?"medium":"none",py:"medium",class:Object.assign({},r.class())},this.label?i("bal-stack",{space:"auto",class:Object.assign({},l.class())},i("bal-heading",{"data-test":"bal-popup-label",level:"span","visual-level":"large",id:`${this.popupId}-heading`},this.label),this.activeClosable?i("bal-close",{"data-test":"bal-popup-close",tabindex:-1,onClick:()=>this.onCloseClick()}):""):"",i("div",{class:Object.assign({},c.class()),ref:t=>this.contentEl=t,"data-test":"bal-popup-content"},i("slot",null)))))}get el(){return o(this)}static get watchers(){return{variant:["variantChanged"],active:["activeChanged"],contentWidth:["contentWidthChanged"]}}};!function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);s>3&&a&&Object.defineProperty(e,i,a)}([p("bal-popup")],ft.prototype,"createLogger",null);let bt=0;ft.style={css:":root{--bal-popup-backdrop-background:rgba(0,7,57,.8);--bal-popup-container-padding-top:0;--bal-popup-container-padding-bottom:0;--bal-popup-container-background:var(--bal-color-white);--bal-popup-variant-popover-max-width:auto;--bal-popup-variant-popover-radius:var(--bal-radius-large);--bal-popup-variant-popover-shadow:var(--bal-shadow-large);--bal-popup-variant-drawer-radius:var(--bal-radius-large);--bal-popup-arrow-background:var(--bal-color-white)}.bal-popup{position:static;display:inline;z-index:var(--bal-z-index-popup)}.bal-popup__container{background:var(--bal-popup-container-background);display:none;visibility:hidden;padding-top:var(--bal-popup-container-padding-top);padding-bottom:var(--bal-popup-container-padding-bottom)}.bal-popup__container--variant-popover{border-radius:var(--bal-popup-variant-popover-radius);-webkit-box-shadow:var(--bal-popup-variant-popover-shadow);box-shadow:var(--bal-popup-variant-popover-shadow);width:var(--bal-popup-variant-popover-max-width);position:absolute;top:0;left:0}.bal-popup__container--variant-fullscreen{position:fixed;margin:0;width:100%;min-width:100%;max-width:100% !important;min-height:var(--bal-app-height, 100%)}.bal-popup__container--variant-drawer{position:fixed;border-top-left-radius:var(--bal-popup-variant-drawer-radius);border-top-right-radius:var(--bal-popup-variant-drawer-radius);width:100%}.bal-popup__inner{overflow-y:auto;max-height:calc(var(--bal-app-height, 100%) - 8rem)}.bal-popup__inner__head{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bal-popup__inner__content{width:100%}.bal-popup__arrow{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;width:8px;height:8px;background:var(--bal-popup-arrow-background);-webkit-transform:rotate(45deg);transform:rotate(45deg);display:none;visibility:hidden}.bal-popup__backdrop{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:fixed;bottom:0;left:0;right:0;top:0;background-color:var(--bal-popup-backdrop-background);width:100vw;display:none;visibility:hidden}.bal-popup-variant-popover-trigger,.bal-popup-permanent-trigger{z-index:calc(var(--bal-z-index-popup) + 1) !important;position:relative !important}"};export{ft as bal_popup}