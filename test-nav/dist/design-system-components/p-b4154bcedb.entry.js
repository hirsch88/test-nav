import{r as a,c as t,w as i,h as e,H as o,g as s}from"./p-e85eaa4e.js";import{p as l,d as n,e as d}from"./p-98d687f2.js";import{c as r,f as m,h}from"./p-7f5e6a6c.js";import{B as c}from"./p-be4dae99.js";import"./p-add1e9ec.js";import"./p-55865e45.js";const b=a=>{const t={};return _(a).forEach((a=>t[a]=!0)),t},_=a=>void 0!==a?(Array.isArray(a)?a:a.split(" ")).filter((a=>null!=a)).map((a=>a.trim())).filter((a=>""!==a)):[],p=class{constructor(i){a(this,i),this.didPresent=t(this,"balModalDidPresent",7),this.willPresent=t(this,"balModalWillPresent",7),this.willDismiss=t(this,"balModalWillDismiss",7),this.didDismiss=t(this,"balModalDidDismiss",7),this.isClickedOutsideOnMouseDown=!1,this.isClickedOutsideOnMouseUp=!1,this.bodyScrollHandler=new c,this.presented=!1,this.overlayIndex=void 0,this.delegate=void 0,this.dataTestId=void 0,this.modalWidth=640,this.space="",this.hasBackdrop=!0,this.isClosable=!0,this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0}connectedCallback(){this.bodyScrollHandler.connect(),l(this)}disconnectedCallback(){this.bodyScrollHandler.disconnect()}async open(){await m(this.usersElement),this.setModalActiveOnBody(),i((()=>{this.modalBackgroundElement&&this.modalBackgroundElement.classList.add("fadeIn"),this.modalContentElement&&this.modalContentElement.classList.add("fadeInDown")})),this.presented||(this.willPresent.emit(),this.presented=!0,await h(150),i((()=>{this.modalBackgroundElement&&this.modalBackgroundElement.classList.remove("fadeIn"),this.modalContentElement&&this.modalContentElement.classList.remove("fadeInDown")})),this.didPresent.emit())}async close(){this.willDismiss.emit(),this.unsetModalActiveOnBody(),this.presented=!1,this.didDismiss.emit()}async present(){if(this.setModalActiveOnBody(),this.presented)return;const a=this.el.querySelector(".bal-modal__content");if(!a)throw new Error("container is undefined");const t=Object.assign(Object.assign({},this.componentProps),{modal:this.el});this.usersElement=await(async(a,t,i,e,o)=>{if(a)return a.attachViewToDom(t,i,o,e);if("string"!=typeof i&&!(i instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof i?t.ownerDocument&&t.ownerDocument.createElement(i):i;return e&&e.forEach((a=>s.classList.add(a))),o&&Object.assign(s,o),t.appendChild(s),await new Promise((a=>r(s,a))),s})(this.delegate,a,this.component,[],t),await this.open()}async dismiss(a,t){if(this.unsetModalActiveOnBody(),void 0===this.delegate)return await this.close(),!0;const e=await n(this,a,t,(async()=>{i((()=>{this.modalBackgroundElement&&this.modalBackgroundElement.classList.add("fadeOut"),this.modalContentElement&&this.modalContentElement.classList.add("fadeOutUp")})),await h(140)}));return e&&await((a,t)=>{if(t){if(a)return a.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()})(this.delegate,this.usersElement),e}onDidDismiss(){return d(this.el,"balModalDidDismiss")}onWillDismiss(){return d(this.el,"balModalWillDismiss")}async onClickCloseButton(a){if(this.isClosable&&this.presented&&a&&a.target){const t=a.target.closest("bal-button");t&&t.hasAttribute("modal-close")&&await this.dismiss(void 0,"model-close"),this.backdropDismiss&&this.isClickedOutsideOnMouseUp&&this.isClickedOutsideOnMouseDown&&await this.dismiss(void 0,"model-close")}}async onMouseDown(a){this.isClickedOutsideOnMouseDown=this.isClickedOutside(a)}async onMouseUp(a){this.isClickedOutsideOnMouseUp=this.isClickedOutside(a)}async handleKeyUp(a){const t=Array.from(document.querySelectorAll("bal-modal")).filter((a=>a.hasAttribute("aria-presented"))).map((a=>a.overlayIndex)).map((a=>parseInt(a))).filter((a=>!Number.isNaN(a))),i=Math.max(...t);this.overlayIndex===i&&(a.preventDefault(),a.stopPropagation(),this.presented&&this.isClosable&&("Escape"!==a.key&&"Esc"!==a.key||(this.delegate?await this.dismiss(void 0,"model-escape"):await this.close())))}setModalActiveOnBody(){this.bodyScrollHandler.disable()}unsetModalActiveOnBody(){this.bodyScrollHandler.enable()}isClickedOutside(a){return!!(this.isClosable&&this.presented&&a&&a.target&&this.backdropDismiss)&&a.target.classList.contains("bal-modal__container")}render(){return e(o,{"aria-modal":"true","aria-presented":this.presented?"true":null,"data-testid":this.dataTestId,tabindex:"-1",class:Object.assign({"bal-modal":!0,"bal-modal--is-closable":this.isClosable,"bal-modal--is-active":this.presented},b(this.cssClass)),style:{"--bal-width":`${this.modalWidth}px`}},e("div",{class:{"bal-modal__background":!0,"is-hidden":!this.hasBackdrop},ref:a=>this.modalBackgroundElement=a}),e("div",{class:{"bal-modal__container":!0},ref:a=>this.modalContainerElement=a},e("div",{class:{"bal-modal__content":!0,[`bal-modal__content--has-spacing-${this.space}`]:!0},ref:a=>this.modalContentElement=a},e("slot",null))))}get el(){return s(this)}};p.style={css:".bal-modal__background,.bal-modal{bottom:0;left:0;position:absolute;right:0;top:0}:root{--bal-modal-background:var(--bal-color-white);--bal-modal-backdrop-background:var(--bal-color-primary-6);--bal-modal-backdrop-opacity:.8;--bal-modal-radius:var(--bal-radius-large)}.bal-modal{-ms-flex-align:center;align-items:center;display:none;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:start;justify-content:flex-start;overflow:hidden;position:fixed;z-index:var(--bal-z-index-modal)}.bal-modal--is-active{display:-ms-flexbox;display:flex}.bal-modal__background{background:var(--bal-modal-backdrop-background);opacity:var(--bal-modal-backdrop-opacity)}.bal-modal__header__title{padding-right:2.5rem;line-height:2rem}.bal-modal__header__close{position:absolute !important;display:-ms-flexbox !important;display:flex !important;right:20px !important;top:24px !important;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;min-width:2rem;max-width:2rem;min-height:2rem;max-height:2rem}.bal-modal__container{position:fixed;top:0;bottom:0;left:0;right:0;overflow-x:none;overflow-y:auto;-ms-overflow-y:visible;padding:.5rem}@media screen and (min-width: 769px),print{.bal-modal__container{padding:0}}.bal-modal__content{overflow:none;position:relative;width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;background:var(--bal-modal-background);border-radius:var(--bal-modal-radius);padding:1rem}@media screen and (min-width: 769px),print{.bal-modal__content{margin:3rem auto;width:var(--bal-modal-width, var(--bal-width, 640px))}}.bal-modal__content .bal-modal__header{padding-bottom:1rem}.bal-modal__content .bal-modal__header__close{right:1.2rem !important;top:.7rem !important}@media screen and (min-width: 769px),print{.bal-modal__content{padding:1.5rem}.bal-modal__content .bal-modal__header{padding-bottom:1.5rem}.bal-modal__content .bal-modal__header__close{right:1.6rem !important;top:1.2rem !important}}@media screen and (min-width: 1024px){.bal-modal__content{padding:2.5rem}.bal-modal__content .bal-modal__header{padding-bottom:2.5rem}.bal-modal__content .bal-modal__header__close{right:2.7rem !important;top:2.2rem !important}}@media screen and (min-width: 769px),print{.bal-modal__content--has-spacing-small{padding:1rem}.bal-modal__content--has-spacing-small .bal-modal__header{padding-bottom:1rem}.bal-modal__content--has-spacing-small .bal-modal__header__close{right:1.1rem !important;top:.7rem !important}}@media screen and (min-width: 1024px){.bal-modal__content--has-spacing-small{padding:1rem}.bal-modal__content--has-spacing-small .bal-modal__header{padding-bottom:1rem}.bal-modal__content--has-spacing-small .bal-modal__header__close{right:1.1rem !important;top:.7rem !important}}@media screen and (min-width: 769px),print{.bal-modal__content--has-spacing-medium{padding:1.5rem}.bal-modal__content--has-spacing-medium .bal-modal__header{padding-bottom:1.5rem}.bal-modal__content--has-spacing-medium .bal-modal__header__close{right:1.6rem !important;top:1.2rem !important}}@media screen and (min-width: 1024px){.bal-modal__content--has-spacing-medium{padding:1.5rem}.bal-modal__content--has-spacing-medium .bal-modal__header{padding-bottom:1.5rem}.bal-modal__content--has-spacing-medium .bal-modal__header__close{right:1.6rem !important;top:1.2rem !important}}.bal-modal__body>bal-button-group{padding-top:1rem}"};const g=class{constructor(t){a(this,t)}render(){return e(o,{class:"bal-modal__body"},e("slot",null))}},u=class{constructor(t){a(this,t),this.closeHandler=()=>{this.parentModal&&this.parentModal.dismiss(void 0,"model-close")}}get parentModal(){return this.el.closest("bal-modal")}render(){var a;return e(o,{class:"bal-modal__header"},e("div",{class:"bal-modal__header__title"},e("bal-heading",{level:"h2",space:"none"},e("slot",null))),(null===(a=this.parentModal)||void 0===a?void 0:a.isClosable)?e("bal-close",{class:"bal-modal__header__close data-test-modal-close",onClick:this.closeHandler}):"")}get el(){return s(this)}};export{p as bal_modal,g as bal_modal_body,u as bal_modal_header}