import{r as t,c as s,h as i,H as e,g as h}from"./p-e85eaa4e.js";import{l as a}from"./p-9a3d9e17.js";import{a as n,d as r}from"./p-1d3855f9.js";import{L as o}from"./p-4fe58c43.js";import{i as l,N as c,A as u}from"./p-6238764a.js";import{e as d,f as p,s as m,k as f,i as b,h as j,a as g,b as v,j as y,c as k,d as C,g as F,l as w}from"./p-785037ba.js";import{m as x}from"./p-7f5e6a6c.js";import{i as O}from"./p-9a929c20.js";import{g as $}from"./p-97b591c9.js";import{j as N,h as B,k as I}from"./p-6b2d19d0.js";import{B as K}from"./p-61996a75.js";import{d as R}from"./p-ba7c87d4.js";import"./p-add1e9ec.js";import"./p-585cea76.js";import"./p-55865e45.js";import"./p-3e8ff66b.js";var A=Object.prototype.toString;const L=()=>{const t=$();return t&&t.locale||n},P=()=>N(L()),D=()=>"."!==H()?[P(),"."]:[P()],H=()=>I(L()),V=(t,s=0)=>{t.charAt(0)===P()&&(t=`0${t}`);const i=0===s?parseInt(t,10):parseFloat(t);return function(t){return function(t){return"number"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Number]"==A.call(t)}(t)&&t!=+t}(i)?"":(e=i,h=s,B(L(),e,h));var e,h};const _=class{constructor(i){t(this,i),this.balInput=s(this,"balInput",7),this.balChange=s(this,"balChange",7),this.balBlur=s(this,"balBlur",7),this.balFocus=s(this,"balFocus",7),this.balKeyPress=s(this,"balKeyPress",7),this.inputId="bal-number-input-"+q++,this.inheritedAttributes={},this.inputValue=this.value,this.initialValue=0,this.onInput=t=>{const s=F(t);if(s){const t=parseFloat(parseFloat((i=s.value,i.replace(P(),"."))).toFixed(this.decimal));isNaN(t)?this.decimal||"-"===s.value||s.value===P()||(this.inputValue=void 0,s.value=""):this.inputValue=t}var i;this.balInput.emit(this.inputValue)},this.onBlur=t=>{d(this,t);const s=F(t);s&&(D().indexOf(s.value)>=0||"-"===s.value)&&(this.inputValue=void 0,s.value=""),this.exactNumber&&s&&(void 0===s.value||""===s.value||null===s.value)&&(this.inputValue=0,s.value="0"),p(this)},this.onKeydown=t=>{if(!a(t)&&!l(t)){if(!this.getAllowedKeys().includes(t.key))return m(t);const s=w(this);if(D().indexOf(t.key)>=0&&(!this.decimal||s.split("").some((t=>D().includes(t)))))return m(t);if("-"===t.key&&0!==s.length)return m(t);if([...c,...D(),"-"].indexOf(t.key)>=0){const i=f(this,t);let e="";if(s.split("").some((t=>{D().includes(t)&&(e=t)})),""!==e){const s=""!==e&&i.includes(e)?null==i?void 0:i.split(e)[1]:"";if(s&&s.length>this.decimal)return m(t)}}}},this.onFocus=t=>b(this,t),this.onClick=t=>j(this,t),this.handleClick=t=>g(this,t),this.focused=!1,this.language=r.language,this.region=r.region,this.ariaForm=R,this.name=this.inputId,this.invalid=!1,this.decimal=0,this.suffix=void 0,this.placeholder=void 0,this.required=!1,this.disabled=!1,this.readonly=!1,this.exactNumber=!1,this.max=void 0,this.min=void 0,this.debounce=0,this.value=void 0}debounceChanged(){this.balChange=x(this.balChange,this.debounce)}listenOnClick(t){v(this,t)}resetHandler(t){const s=t.target;(null==s?void 0:s.contains(this.el))&&y(this,this.initialValue,this.resetHandlerTimer)}connectedCallback(){this.debounceChanged(),this.initialValue=this.value||0}componentDidLoad(){this.inputValue=this.value}componentWillLoad(){this.inheritedAttributes=O(this.el,["aria-label","tabindex","title"])}async configChanged(t){this.language=t.language,this.region=t.region,!this.focused&&this.nativeInput&&(this.nativeInput.value=this.getFormattedValue())}async setFocus(){k(this)}async setBlur(){C(this)}getInputElement(){return Promise.resolve(this.nativeInput)}async setAriaForm(t){this.ariaForm=Object.assign({},t)}getAllowedKeys(){return[...c,...u,...D(),"-"]}getRawValue(){return"number"!=typeof this.value||isNaN(this.value)?(this.value||"").toString():this.value.toString()}getFormattedValue(){const t=this.getRawValue(),s=void 0!==this.suffix&&void 0!==t&&""!==t?" "+this.suffix:"";return`${V(t,this.decimal)}${s}`}get pattern(){let t=this.suffix||"";return""!==t&&(t=` ${t}`),`[-0-9${H()}${this.decimal>0?P():""}${t}]*`}render(){const t=this.focused?(()=>this.getRawValue().replace(".",P()))():this.getFormattedValue();this.nativeInput&&this.nativeInput.value&&(this.nativeInput.value=t);const s=K.block("number-input");return i(e,{onClick:this.handleClick,"aria-disabled":this.disabled?"true":null,class:Object.assign({},s.class())},i("input",Object.assign({class:{input:!0,"is-disabled":this.disabled||this.readonly,"is-danger":this.invalid},"data-testid":"bal-number-input",ref:t=>this.nativeInput=t,id:this.ariaForm.controlId||this.inputId,"aria-labelledby":this.ariaForm.labelId,"aria-describedby":this.ariaForm.messageId,"aria-invalid":!0===this.invalid?"true":"false","aria-disabled":this.disabled?"true":null,name:this.name,disabled:this.disabled,placeholder:this.placeholder||"",readonly:this.readonly,required:this.required,pattern:this.pattern,min:this.min,max:this.max,value:t,onInput:t=>this.onInput(t),onFocus:t=>this.onFocus(t),onBlur:t=>this.onBlur(t),onClick:this.onClick,onKeyDown:t=>this.onKeydown(t),onKeyPress:t=>this.balKeyPress.emit(t)},this.inheritedAttributes)))}get el(){return h(this)}static get watchers(){return{debounce:["debounceChanged"]}}};!function(t,s,i,e){var h,a=arguments.length,n=a<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,s,i,e);else for(var r=t.length-1;r>=0;r--)(h=t[r])&&(n=(a<3?h(n):a>3?h(s,i,n):h(s,i))||n);a>3&&n&&Object.defineProperty(s,i,n)}([o()],_.prototype,"configChanged",null);let q=0;_.style={css:".bal-number-input{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;position:relative;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;width:100%;padding:0;font-family:var(--bal-font-family-text)}"};export{_ as bal_number_input}