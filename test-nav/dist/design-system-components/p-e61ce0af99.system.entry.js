var __awaiter=this&&this.__awaiter||function(e,t,o,i){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,r){function l(e){try{s(i.next(e))}catch(e){r(e)}}function a(e){try{s(i["throw"](e))}catch(e){r(e)}}function s(e){e.done?o(e.value):n(e.value).then(l,a)}s((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var o={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,n,r,l;return l={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(l[Symbol.iterator]=function(){return this}),l;function a(e){return function(t){return s([e,t])}}function s(a){if(i)throw new TypeError("Generator is already executing.");while(l&&(l=0,a[0]&&(o=0)),o)try{if(i=1,n&&(r=a[0]&2?n["return"]:a[0]?n["throw"]||((r=n["return"])&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;if(n=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:o.label++;return{value:a[1],done:false};case 5:o.label++;n=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(r=o.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1];r=a;break}if(r&&o.label<r[2]){o.label=r[2];o.ops.push(a);break}if(r[2])o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];n=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(e,t,o){if(o||arguments.length===2)for(var i=0,n=t.length,r;i<n;i++){if(r||!(i in t)){if(!r)r=Array.prototype.slice.call(t,0,i);r[i]=t[i]}}return e.concat(r||Array.prototype.slice.call(t))};System.register(["./p-4eb578e4.system.js","./p-6913b916.system.js","./p-972941e8.system.js","./p-2e048403.system.js","./p-1141d5ce.system.js","./p-4c4811f6.system.js","./p-0ab50155.system.js","./p-a77fefb8.system.js","./p-f15b4d27.system.js","./p-7dff37f8.system.js","./p-1e8a53fb.system.js","./p-3a73b8b5.system.js"],(function(e){"use strict";var t,o,i,n,r,l,a,s,c,u,d,p,h,f,b,v,m,g,y,_,w,x,k,O,V,T,I,j,C,E;return{setters:[function(e){t=e.r;o=e.c;i=e.h;n=e.H;r=e.g},function(e){l=e.l},function(e){a=e.f;s=e.i;c=e.d},function(e){u=e.c;d=e.g;p=e.m;h=e.o;f=e.d;b=e.q;v=e.r},function(e){m=e.r;g=e.p;y=e.l;_=e.g;w=e.i;x=e.s;k=e.a;O=e.f;V=e.b;T=e.v},function(e){I=e.s},function(e){j=e.B},function(e){C=e.L},function(e){E=e.d},function(){},function(){},function(){}],execute:function(){var A=function(e,t,o){if(typeof MutationObserver==="undefined"){return}var i=new MutationObserver((function(e){e=e.filter((function(e){return e.target.nodeName===t.toUpperCase()||e.target.nodeName==="bal-select".toUpperCase()}));if(e.length>0){o(undefined)}}));i.observe(e,{childList:true,subtree:true,attributes:true,characterData:true});return i};var P=":root{--bal-select-control-background:var(--bal-color-primary-inverted);--bal-select-control-background-hover:var(--bal-form-field-control-background-hover);--bal-select-control-background-invalid:var(--bal-form-field-control-danger-background);--bal-select-control-background-disabled:var(--bal-form-field-control-disabled-background);--bal-select-control-input-background:var(--bal-color-grey-1);--bal-select-control-native-input-background:var(--bal-color-transparent);--bal-select-control-native-input-background-hover:var(--bal-color-transparent);--bal-select-control-input-inverted-footer-background:var(--bal-color-transparent);--bal-select-control-input-inverted-footer-background-hover:var(--bal-color-transparent);--bal-select-control-input-multiple-background:var(--bal-color-transparent);--bal-select-control-input-multiple-background-read-only-selection:var(--bal-color-transparent);--bal-select-control-input-option-background:var(--bal-color-transparent);--bal-select-control-input-option-background-selected:var(--bal-color-primary-1);--bal-select-control-input-option-background-focused:var(--bal-color-grey-2);--bal-select-control-input-option-background-hover:var(--bal-color-grey-2);--bal-select-control-border-radius:var(--bal-form-field-control-radius);--bal-select-popover-border-color:var(--bal-color-grey-2);--bal-select-control-border-color:var(--bal-form-field-control-border-color);--bal-select-control-border-color-focused:var(--bal-color-primary);--bal-select-control-border-color-hover:var(--bal-form-field-control-border-color-hover);--bal-select-control-border-color-invalid:var(--bal-form-field-control-danger-border-color);--bal-select-control-border-color-disabled:var(--bal-form-field-control-disabled-border-color);--bal-select-control-border-color-focus-within:var(--bal-color-primary);--bal-select-option-border-top-color:var(--bal-color-grey-2);--bal-select-popover-empty-text-color:var(--bal-form-field-control-color);--bal-select-control-text-color:var(--bal-form-field-control-color);--bal-select-control-text-color-focused:var(--bal-color-primary);--bal-select-input-text-color-disabled:var(--bal-form-field-label-disabled-color);--bal-select-control-inverted-footer-native-input-text-color:var(--bal-color-text-white);--bal-select-option-content-label-text-color:var(--bal-form-field-control-color)}bal-select-option{display:none !important}.bal-select{display:block;position:relative;width:100%;-ms-flex:1;flex:1;font-family:var(--bal-font-family-text)}.bal-select__popover{border:.125rem solid var(--bal-select-popover-border-color)}.bal-select__popover__empty{padding:.5rem 1rem;font-family:var(--bal-font-family-text);color:var(--bal-select-popover-empty-text-color)}.bal-select__popover__empty--hidden{display:none}.bal-select__native{position:absolute !important;left:0;top:0;margin:0;padding:0;opacity:0;outline:0;border:none;width:1px;height:1px;clip:rect(1px, 1px, 1px, 1px);overflow:hidden}.bal-select__control{display:-ms-flexbox;display:flex;border-width:.125rem;border-style:solid;border-color:var(--bal-select-control-border-color);border-radius:var(--bal-select-control-border-radius);background:var(--bal-select-control-background);font-size:var(--bal-weight-regular);font-family:var(--bal-font-family-text);color:var(--bal-select-control-text-color);outline:none;-webkit-box-shadow:var(--bal-shadow-none);box-shadow:var(--bal-shadow-none);padding-right:1rem;min-height:3rem}.bal-select__control--focused{border-color:var(--bal-select-control-border-color-focused)}.bal-select__control:not(.bal-select__control--disabled):not(.bal-select__control--invalid):not(.bal-select__control--inverted-footer):hover{border-color:var(--bal-select-control-border-color-hover);background-color:var(--bal-select-control-background-hover)}.bal-select__control:not(.bal-select__control--disabled):not(.bal-select__control--invalid):not(.bal-select__control--inverted-footer):hover .bal-select__control__input{background-color:var(--bal-select-control-input-background)}.bal-select__control--invalid:not(.bal-select__control--disabled){border-color:var(--bal-select-control-border-color-invalid) !important;background:var(--bal-select-control-background-invalid) !important}.bal-select__control:focus-within{border-color:var(--bal-select-control-border-color-focus-within) !important}.bal-select__control--disabled{background-color:var(--bal-select-control-background-disabled) !important;border-color:var(--bal-select-control-border-color-disabled) !important}.bal-select__control--disabled,.bal-select__control--disabled input{cursor:default !important;-webkit-user-select:none !important;-moz-user-select:none !important;-ms-user-select:none !important;user-select:none !important;pointer-events:none !important;color:var(--bal-select-input-text-color-disabled)}.bal-select__control--inverted-footer{border:none;background-color:var(--bal-select-control-input-inverted-footer-background) !important;padding-right:var(--bal-space-none)}.bal-select__control--inverted-footer:hover{background-color:var(--bal-select-control-input-inverted-footer-background-hover) !important}.bal-select__control--inverted-footer .input{color:var(--bal-select-control-inverted-footer-native-input-text-color);background-color:var(--bal-select-control-native-input-background) !important}.bal-select__control--inverted-footer .input:hover{background-color:var(--bal-select-control-native-input-background-hover) !important}.bal-select__control__icon{min-height:100% !important;max-height:100% !important}.bal-select__control__icon--loading{display:none}.bal-select__control__icon--clickable{cursor:pointer}.bal-select__control__selections{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex:1 1;flex:1 1;-ms-flex-wrap:wrap;flex-wrap:wrap;line-height:1.125rem;max-width:100%;min-width:0;gap:0;padding-left:.375rem}.bal-select__control__selections .bal-tag{margin-left:.25rem;margin-top:.375rem;margin-bottom:.375rem}.bal-select__control__selections .bal-tag+.input{padding-left:.625rem}.bal-select__control__input{border:none !important;outline:none !important;outline-width:0 !important;height:2.75rem !important;-webkit-box-shadow:var(--bal-shadow-none) !important;box-shadow:var(--bal-shadow-none) !important;background:var(--bal-select-control-input-multiple-background);-ms-flex:1;flex:1;min-height:2.75rem !important;padding-left:.25rem !important;padding-right:.625rem !important;text-overflow:ellipsis}.bal-select__control__input:-moz-read-only{-moz-user-select:none !important;user-select:none !important;-webkit-tap-highlight-color:rgba(0,0,0,0)}.bal-select__control__input:read-only{-webkit-user-select:none !important;-moz-user-select:none !important;-ms-user-select:none !important;user-select:none !important;-webkit-tap-highlight-color:rgba(0,0,0,0)}.bal-select__control__input:read-only::-moz-selection{background:var(--bal-select-control-input-multiple-background-read-only-selection)}.bal-select__control__input:-moz-read-only::selection{background:var(--bal-select-control-input-multiple-background-read-only-selection)}.bal-select__control__input:read-only::selection{background:var(--bal-select-control-input-multiple-background-read-only-selection)}.bal-select__control__input:-moz-read-only::-moz-selection{background:var(--bal-select-control-input-multiple-background-read-only-selection)}.bal-select__control__input:read-only::-moz-selection{background:var(--bal-select-control-input-multiple-background-read-only-selection)}.bal-select__option{visibility:visible;font-family:var(--bal-font-family-text);background:var(--bal-select-control-input-option-background);border:none;cursor:pointer;outline:none;min-height:3rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:0;margin:0;border-top:.125rem solid var(--bal-select-option-border-top-color);text-align:inherit;white-space:nowrap;width:100%}.bal-select__option:first-child{border-top:none}.bal-select__option::-moz-focus-inner{border:none}.bal-select__option--selected{background:var(--bal-select-control-input-option-background-selected)}.bal-select__option--selected .bal-select__option__content__label{font-weight:var(--bal-weight-bold)}.bal-select__option--focused{background:var(--bal-select-control-input-option-background-focused)}.bal-select__option:hover{background:var(--bal-select-control-input-option-background-hover)}.bal-select__option__content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;min-height:3rem;padding:.75rem 1rem;gap:.75rem}.bal-select__option__content__checkbox{margin:0;padding:0}.bal-select__option__content__label{margin:0;padding:0;font-family:var(--bal-font-family-text);font-weight:var(--bal-weight-regular);color:var(--bal-select-option-content-label-text-color);line-height:1.125rem;word-break:break-word;white-space:normal;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}";var F=undefined&&undefined.__decorate||function(e,t,o,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,o):i,l;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)if(l=e[a])r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r;return n>3&&r&&Object.defineProperty(t,o,r),r};var S=true;var L=false;var R=e("bal_select",function(){function e(e){var i=this;t(this,e);this.balChange=o(this,"balChange",7);this.balInputClick=o(this,"balInputClick",7);this.balInput=o(this,"balInput",7);this.balBlur=o(this,"balBlur",7);this.balFocus=o(this,"balFocus",7);this.balCancel=o(this,"balCancel",7);this.balKeyPress=o(this,"balKeyPress",7);this.didInit=false;this.inputId="bal-select-".concat(B++);this.initialValue=[];this.removeValue=function(e){if(!i.disabled){i.updateRawValue(m(i.rawValue,e),S);if(i.multiple&&i.typeahead){i.setFocus()}}};this.handleClick=function(e){if(i.disabled||i.readonly){g(e)}};this.handlePopoverChange=function(e){e.stopPropagation();if(i.isPopoverOpen!==e.detail){i.isPopoverOpen=e.detail;if(i.isPopoverOpen){i.updateFocus()}else{i.focusIndex=-1;if(i.multiple&&i.typeahead){i.updateInputValue("")}i.balBlur.emit()}}};this.handleInputBlur=function(e){g(e);var t=e.relatedTarget;if(t===null||t&&t.nodeName&&(t.nodeName==="BAL-MODAL"||t.nodeName==="INPUT"||t.nodeName==="BUTTON")){i.validateAfterBlur(S)}i.hasFocus=false};this.handleInputFocus=function(e){i.balFocus.emit(e);i.hasFocus=true};this.handleInputClick=function(e,t){if(t===void 0){t=false}return __awaiter(i,void 0,void 0,(function(){var o,i,n,r;return __generator(this,(function(l){switch(l.label){case 0:I(e);if(this.isChipClicked(e)){return[2]}if(!(this.disabled||this.readonly))return[3,1];g(e);return[3,10];case 1:this.focusIndex=-1;this.balInputClick.emit(e);if(!this.typeahead)return[3,6];if(!(this.isPopoverOpen&&t))return[3,3];return[4,(o=this.popoverElement)===null||o===void 0?void 0:o.dismiss()];case 2:l.sent();return[3,5];case 3:return[4,(i=this.popoverElement)===null||i===void 0?void 0:i.present()];case 4:l.sent();l.label=5;case 5:return[3,10];case 6:if(!this.isPopoverOpen)return[3,8];return[4,(n=this.popoverElement)===null||n===void 0?void 0:n.dismiss()];case 7:l.sent();return[3,10];case 8:return[4,(r=this.popoverElement)===null||r===void 0?void 0:r.present()];case 9:l.sent();l.label=10;case 10:return[2]}}))}))};this.handleKeyPress=function(e){return __awaiter(i,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:if(!(!this.isPopoverOpen&&u(e)))return[3,2];g(e);return[4,this.open()];case 1:t.sent();t.label=2;case 2:this.balKeyPress.emit(e);return[2]}}))}))};this.handleInputChange=function(e){if(!i.disabled&&!i.readonly){i.inputValue=e.target.value}};this.handleInput=function(e){return __awaiter(i,void 0,void 0,(function(){return __generator(this,(function(t){if(!this.disabled&&!this.readonly){this.inputValue=e.target.value;if(!this.isPopoverOpen){this.popoverElement.present()}this.focusIndex=-1;this.updateFocus();g(e);this.balInput.emit(this.inputValue)}return[2]}))}))};this.handleOptionMouseEnter=function(e){i.focusIndex=e};this.hasFocus=false;this.inputValue="";this.focusIndex=-1;this.isPopoverOpen=false;this.options=new Map;this.labelToScrollTo="";this.labelToSelectTo="";this.ariaForm=E;this.name=this.inputId;this.invalid=false;this.filter="includes";this.balTabindex=0;this.freeSolo=false;this.multiple=false;this.maxLength=undefined;this.noDataLabel=undefined;this.autocomplete="off";this.typeahead=false;this.selectionOptional=false;this.disabled=false;this.readonly=false;this.required=false;this.inverted=false;this.placeholder=undefined;this.scrollable=250;this.loading=false;this.remote=false;this.value=[];this.rawValue=[]}e.prototype.createLogger=function(e){this.log=e};e.prototype.valueWatcher=function(){this.syncRawValue(false)};e.prototype.updateRawValue=function(e,t){if(t===void 0){t=true}if(!d(e,this.rawValue||[])){this.rawValue=__spreadArray([],e,true);this.syncNativeInput();if(this.didInit&&t===true){if(this.multiple){if(l(this.rawValue)){this.emitChangeEvent([])}else{this.emitChangeEvent(__spreadArray([],this.rawValue,true))}}else{if(l(this.rawValue)||y(this.rawValue)===0){this.emitChangeEvent(undefined)}else{this.emitChangeEvent(this.rawValue[0])}}}}};e.prototype.emitChangeEvent=function(e){this.balChange.emit(e)};e.prototype.connectedCallback=function(){var e=this;var t=c((function(){return e.updateOptions()}),0);this.initialValue=this.value;t();this.mutationO=A(this.el,"bal-select-option",(function(){t()}))};e.prototype.componentWillLoad=function(){this.waitForOptionsAndThenUpdateRawValues();this.isInsideOfFooter();if(!l(this.rawValue)&&this.options.size>0&&y(this.rawValue)===1){var e=this.options.get(this.rawValue[0]);if(!l(e)){this.inputValue=e.label}}};e.prototype.componentDidLoad=function(){this.syncRawValue(false);if(!this.multiple){this.inputElement.value=this.inputValue}this.didInit=true};e.prototype.disconnectedCallback=function(){if(this.mutationO){this.mutationO.disconnect();this.mutationO=undefined}};e.prototype.listenOnClick=function(e){if(this.disabled&&e.target&&e.target===this.el){g(e)}};e.prototype.resetHandler=function(e){var t=this;var o=e.target;if(o===null||o===void 0?void 0:o.contains(this.el)){if(this.resetHandlerTimer){clearTimeout(this.resetHandlerTimer)}this.resetHandlerTimer=setTimeout((function(){t.value=t.initialValue;t.syncRawValue(false);t.syncNativeInput();if(t.nativeSelectEl){var e=Array.from(t.nativeSelectEl.options);e.forEach((function(e){return e.selected=true}))}}),0)}};e.prototype.handleKeyDown=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(o){switch(o.label){case 0:if(!this.isPopoverOpen)return[3,1];if(p(e)||h(e)){g(e);this.navigateWithArrowKey(e);this.updateFocus()}if(f(e)){g(e);this.selectedFocusedOption()}if(b(e)){this.cancel()}if(v(e)&&this.typeahead&&this.multiple){if(this.inputElement.value===""&&y(this.rawValue)>0){t=_(this.rawValue);this.removeValue(t[y(this.rawValue)-1])}}if(!this.typeahead&&e.key.length===1){this.focusOptionByLabel(e.key)}if(u(e)&&!this.typeahead){g(e)}return[3,4];case 1:if(!this.hasFocus)return[3,4];if(!(p(e)||h(e)))return[3,3];g(e);return[4,this.open()];case 2:o.sent();o.label=3;case 3:if(!this.typeahead&&e.key.length===1){this.selectOptionByLabel(e.key)}o.label=4;case 4:return[2]}}))}))};e.prototype.setFocus=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){clearTimeout(this.setFocusTimer);this.setFocusTimer=setTimeout((function(){if(e.inputElement&&!e.disabled){e.inputElement.focus()}}));return[2]}))}))};e.prototype.getValue=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.rawValue]}))}))};e.prototype.clear=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.focusIndex=-1;if(this.inputElement){this.updateInputValue("");this.updateRawValue([],S);this.value=this.multiple?[]:""}return[2]}))}))};e.prototype.open=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:if(!(!this.disabled&&!this.readonly&&!l(this.popoverElement)))return[3,2];return[4,this.popoverElement.present()];case 1:e.sent();e.label=2;case 2:return[2]}}))}))};e.prototype.close=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(!this.disabled&&!this.readonly&&!l(this.popoverElement)){this.blurSelect()}return[2]}))}))};e.prototype.cancel=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.labelToScrollTo="";this.close();this.scrollTo(0);this.balCancel.emit();return[2]}))}))};e.prototype.select=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(o){t=this.options.get(e);if(!l(t)){this.optionSelected(t)}return[2]}))}))};e.prototype.setAriaForm=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.ariaForm=Object.assign({},e);return[2]}))}))};e.prototype.waitForOptionsAndThenUpdateRawValues=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(o){switch(o.label){case 0:clearTimeout(this.waitForOptionsAndThenUpdateRawValuesTimer);return[4,a(this.el)];case 1:o.sent();e=this.options.size>0;if(e){if(!this.remote){this.syncRawValue(L)}}else{this.waitForOptionsAndThenUpdateRawValuesTimer=setTimeout((function(){return t.waitForOptionsAndThenUpdateRawValues()}),10)}return[2]}}))}))};e.prototype.updateOptions=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,o,i,o,n,r;return __generator(this,(function(l){switch(l.label){case 0:e=this.getChildOpts();t=new Map;for(o=0;o<e.length;o++){i=e[o];t.set(i.value,{value:i.value,label:i.label,disabled:i.disabled,id:i.for,textContent:i.textContent,innerHTML:i.innerHTML})}if(!this.selectionOptional&&Array.isArray(this.rawValue)){for(o=0;o<this.rawValue.length;o++){n=this.rawValue[o];if(!t.has(n)){r=m(this.rawValue,n);this.updateRawValue(r,L)}}}this.options=new Map(t);if(!!this.typeahead)return[3,2];return[4,this.syncNativeInput()];case 1:l.sent();l.label=2;case 2:if(this.didInit&&!this.remote){this.validateAfterBlur()}return[2]}}))}))};Object.defineProperty(e.prototype,"optionArray",{get:function(){var e=this;var t=Array.from(this.options,(function(e){var t=e[0],o=e[1];return o}));if(!this.typeahead||this.remote){return t}return t.filter((function(t){return e.filter==="includes"?w(t.textContent,e.inputValue):x(t.textContent,e.inputValue)}))},enumerable:false,configurable:true});e.prototype.hasOptions=function(){return this.optionArray.length>0};Object.defineProperty(e.prototype,"inputPlaceholder",{get:function(){if(this.multiple){if(y(this.rawValue)<1){return this.placeholder}return undefined}else{if(!l(this.rawValue)&&y(this.rawValue)>0){return undefined}}return this.placeholder},enumerable:false,configurable:true});e.prototype.getChildOpts=function(){return Array.from(this.el.querySelectorAll("bal-select-option"))};e.prototype.getPopoverContent=function(){return this.popoverElement.querySelector(".bal-popover__content__inner")};e.prototype.updateFocus=function(){var e=this;if(this.focusIndex<-1){this.focusIndex=-1}var t=this.optionArray;if(t.length>0){if(t.length<=this.focusIndex){this.focusIndex=t.length-1}var o=t[this.focusIndex];if(o&&o.id){var i=this.el.querySelector("button#".concat(o.id));if(i){clearTimeout(this.updateFocusTimer);this.updateFocusTimer=setTimeout((function(){e.scrollToFocusedOption(i)}),0)}}}else{this.focusIndex=-1}};e.prototype.scrollToFocusedOption=function(e){if(e&&this.popoverElement){var t=this.getPopoverContent();if(t){var o=e.offsetTop;var i=t.scrollTop;if(o<i){t.scrollTop=o}var n=e.offsetTop+e.clientHeight;var r=t.scrollTop+t.clientHeight;if(n>r){t.scrollTop=t.scrollTop+e.clientHeight}}}};e.prototype.scrollTo=function(e){var t=this.getPopoverContent();if(t){t.scrollTop=e}};e.prototype.selectedFocusedOption=function(){var e=this.optionArray;if(e.length>this.focusIndex){var t=e[this.focusIndex];if(t){this.optionSelected(t)}}};e.prototype.navigateWithArrowKey=function(e){if(p(e)){this.focusIndex=this.focusIndex+1}else{if(h(e)){this.focusIndex=this.focusIndex-1}}};e.prototype.focusOptionByLabel=function(e){var t=this;this.labelToScrollTo=this.labelToScrollTo+e;clearTimeout(this.clearScrollToValue);this.clearScrollToValue=setTimeout((function(){t.scrollToLabel(t.labelToScrollTo)}),600)};e.prototype.selectOptionByLabel=function(e){var t=this;this.labelToSelectTo=this.labelToSelectTo+e;clearTimeout(this.clearSelectValue);this.clearSelectValue=setTimeout((function(){t.selectLabel(t.labelToSelectTo);t.labelToSelectTo=""}),600)};e.prototype.selectLabel=function(e){return __awaiter(this,void 0,void 0,(function(){var t,o,i;return __generator(this,(function(n){if(e!==" "){t=this.optionArray.find((function(t){return x(t.label||"",e)}));if(!l(t)&&t.id){o=this.el.querySelector("button#".concat(t.id));if(!l(o)){i=this.optionArray.indexOf(t);this.focusIndex=i;this.select(t.value)}}this.labelToScrollTo=""}return[2]}))}))};e.prototype.scrollToLabel=function(e){return __awaiter(this,void 0,void 0,(function(){var t,o,i;return __generator(this,(function(n){if(e!==" "){t=this.optionArray.find((function(t){return x(t.label||"",e)}));if(!l(t)&&t.id){o=this.el.querySelector("button#".concat(t.id));if(!l(o)){i=this.optionArray.indexOf(t);this.focusIndex=i;this.scrollTo(o.offsetTop)}}this.labelToScrollTo=""}return[2]}))}))};e.prototype.syncRawValue=function(e){if(e===void 0){e=true}var t=[];if(!l(this.value)&&this.value!==""){if(Array.isArray(this.value)){t=__spreadArray([],this.value.filter((function(e){return!l(e)})),true)}else{if(this.value.split("").includes(",")){t=__spreadArray([],this.value.split(",").filter((function(e){return e})).map((function(e){return e.trim()})),true)}else{t=[this.value]}}}this.updateRawValue(t,e)};e.prototype.blurSelect=function(){this.popoverElement.dismiss()};e.prototype.optionSelected=function(e){var t=_(this.rawValue);var o=t.some((function(t){return t===e.value}));this.updateValue(e.value,!o);if(!this.multiple){this.blurSelect()}else{if(this.typeahead){this.setFocus()}}};e.prototype.updateValue=function(e,t){if(t===void 0){t=true}if(this.multiple){if(t){this.updateRawValue(k(this.rawValue,e,this.multiple),S)}else{this.updateRawValue(m(this.rawValue,e),S)}}else{this.updateRawValue(k(this.rawValue,e,this.multiple),S);if(this.rawValue&&this.rawValue.length>0){this.updateInputValue(O(this.options,this.rawValue[0]))}}};e.prototype.validateAfterBlur=function(e){if(e===void 0){e=L}var t=this.rawValue;if(this.didInit&&!this.multiple){if(this.typeahead&&(this.selectionOptional||this.remote)){var o=V(this.options,this.inputElement.value);if(o){t=[o.value]}else{t=[this.inputElement.value]}}else{t=T(this.rawValue,this.options,this.inputElement.value)}this.updateRawValue(t,e)}};e.prototype.syncNativeInput=function(){if(!this.multiple){if(y(this.rawValue)>0){var e=_(this.rawValue);var t=O(this.options,e[0]);if(!this.multiple&&this.typeahead&&this.selectionOptional&&t===""){t=e.join(", ")}return this.updateInputValue(t)}}return Promise.resolve()};e.prototype.updateInputValue=function(e){var t=this;return new Promise((function(o){if(t.updateInputValueTimer){clearTimeout(t.updateInputValueTimer)}t.updateInputValueTimer=setTimeout((function(){if(!l(t.inputElement)){t.inputElement.value=e;t.inputValue=e;o()}}),0)}))};e.prototype.isChipClicked=function(e){var t=false;if(this.multiple){var o=this.selectionEl.querySelectorAll("bal-tag");var i=e.target;o.forEach((function(e){var o=s(e,i)||e===i;if(o){t=o}}))}return t};e.prototype.isInsideOfFooter=function(){this.inverted=this.el.closest("bal-footer")!==null};e.prototype.render=function(){var e=this;var t;var o=function(t){return i("bal-tag",{size:"",closable:!e.disabled,disabled:e.disabled,invalid:e.invalid,tabindex:-1,onBalCloseClick:function(o){return e.removeValue(t.value)},"data-testid":"bal-select-chip"},O(e.options,t.value)||t.value)};var r=_(this.rawValue);var l=j.block("select");var a=l.element("native");var s=l.element("control");var c=s.element("icon");var u=s.element("selections");var d=s.element("input");var p=l.element("popover");var h=p.element("empty");var f=l.element("option");var b=f.element("content");var v=b.element("checkbox");var m=b.element("label");return i(n,{role:"listbox",onClick:this.handleClick,"aria-disabled":this.disabled?"true":null,"data-value":(t=this.rawValue)===null||t===void 0?void 0:t.map((function(t){return O(e.options,t)})).join(","),class:Object.assign(Object.assign(Object.assign(Object.assign({},l.class()),l.modifier("disabled").class(this.disabled||this.readonly)),l.modifier("inverted").class(this.inverted)),l.modifier("inverted-footer").class(this.inverted))},i("select",{class:Object.assign({},a.class()),name:this.name,multiple:this.multiple,required:this.required,tabindex:-1,ref:function(t){return e.nativeSelectEl=t}},r.map((function(e){return i("option",{value:e,selected:true},e)}))),i("bal-popover",{onBalChange:this.handlePopoverChange,ref:function(t){return e.popoverElement=t}},i("div",{"bal-popover-trigger":true,class:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s.class()),s.modifier("invalid").class(this.invalid)),s.modifier("disabled").class(this.disabled||this.readonly)),s.modifier("focused").class(this.isPopoverOpen)),s.modifier("inverted-footer").class(this.inverted))},i("div",{class:Object.assign(Object.assign({},u.class()),u.modifier("clickable").class(!this.isPopoverOpen&&!this.disabled&&!this.readonly)),onClick:this.handleInputClick,ref:function(t){return e.selectionEl=t}},r.filter((function(t){return e.multiple})).map((function(e){return i(o,{value:e})})),i("input",{type:"text",class:Object.assign(Object.assign({},d.class()),{input:true,"is-inverted":this.inverted,"is-danger":this.invalid,"is-disabled":this.disabled||this.readonly,"is-clickable":!this.isPopoverOpen&&!this.disabled&&!this.readonly,"data-test-select-input":true}),id:this.ariaForm.controlId||this.inputId,"aria-labelledby":this.ariaForm.labelId,"aria-describedby":this.ariaForm.messageId,"aria-invalid":this.invalid===true?"true":"false","aria-disabled":this.disabled?"true":null,"data-testid":"bal-select-input",autocomplete:this.autocomplete,placeholder:this.inputPlaceholder,readonly:!this.typeahead||this.disabled||this.readonly,contentEditable:this.typeahead,disabled:this.disabled,maxLength:this.maxLength,tabindex:this.balTabindex,onInput:this.handleInput,onClick:this.handleInputClick,onChange:this.handleInputChange,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onKeyPress:this.handleKeyPress,ref:function(t){return e.inputElement=t}})),!this.freeSolo&&!this.loading?i("bal-icon",{class:Object.assign(Object.assign(Object.assign({},c.class()),c.modifier("loading").class(this.loading)),c.modifier("clickable").class(!this.disabled&&!this.readonly)),name:!this.inverted?"caret-down":"caret-up",color:this.disabled||this.readonly?"grey-light":this.inverted?"white":this.invalid?"danger":"primary",turn:this.isPopoverOpen,onClick:function(t){return e.handleInputClick(t,true)},size:!this.inverted?"":"x-small"}):""),i("bal-popover-content",{class:Object.assign({},p.class()),scrollable:this.scrollable,spaceless:true,expanded:true},this.optionArray.map((function(t,o){return i("button",{type:"button",role:"option",id:t.id,"data-value":t.value,"data-label":t.label,class:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f.class()),f.modifier("selected").class(r.includes(t.value)&&!(e.typeahead&&!e.multiple))),f.modifier("focused").class(e.focusIndex===o)),f.modifier("checkbox").class(e.multiple)),f.modifier("disabled").class(t.disabled===true)),"data-testid":"bal-select-option",disabled:t.disabled,tabIndex:-1,onMouseEnter:function(){return e.handleOptionMouseEnter(o)},onClick:function(){return e.optionSelected(t)}},i("div",{class:Object.assign({},b.class())},i("span",{class:Object.assign({},v.class()),style:{display:e.multiple?"flex":"none"}},i("bal-checkbox",{checked:r.includes(t.value),tabindex:-1,hidden:true,flat:true,onBalChange:g})),i("span",{class:Object.assign({},m.class()),innerHTML:t.innerHTML})))})),i("div",{class:Object.assign(Object.assign({},h.class()),h.modifier("hidden").class(this.noDataLabel===undefined||this.hasOptions()||!this.typeahead||this.selectionOptional))},this.noDataLabel))))};Object.defineProperty(e.prototype,"el",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{value:["valueWatcher"]}},enumerable:false,configurable:true});return e}());F([C("bal-select")],R.prototype,"createLogger",null);var B=0;R.style={css:P};var z=undefined&&undefined.__decorate||function(e,t,o,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,o):i,l;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)if(l=e[a])r=(n<3?l(r):n>3?l(t,o,r):l(t,o))||r;return n>3&&r&&Object.defineProperty(t,o,r),r};var M=e("bal_select_option",function(){function e(e){t(this,e);this.label=undefined;this.disabled=false;this.value=undefined;this.for="bal-selopt-".concat(H++)}e.prototype.createLogger=function(e){this.log=e};e.prototype.render=function(){return i(n,{style:{display:"none"}},i("slot",null))};return e}());z([C("bal-select-option")],M.prototype,"createLogger",null);var H=0}}}));